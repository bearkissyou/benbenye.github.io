{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/yilia/source/main.d221b8.css","path":"main.d221b8.css","modified":0,"renderable":1},{"_id":"themes/yilia/source/mobile.c853ad.js","path":"mobile.c853ad.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/slider.59dfdc.js","path":"slider.59dfdc.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/main.d221b8.js","path":"main.d221b8.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","path":"fonts/default-skin.b257fa.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.b7ae25.ttf","path":"fonts/iconfont.b7ae25.ttf","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.59e68b.eot","path":"fonts/iconfont.59e68b.eot","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.ca3627.woff","path":"fonts/iconfont.ca3627.woff","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","path":"fonts/tooltip.4004ff.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.dba24b.svg","path":"fonts/iconfont.dba24b.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/default-skin.png","path":"img/default-skin.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/preloader.gif","path":"img/preloader.gif","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","path":"img/scrollbar_arrow.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/weixin.png","path":"img/weixin.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/zhifubao.png","path":"img/zhifubao.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/5770486.png","path":"img/5770486.png","modified":0,"renderable":1}],"Cache":[{"_id":"themes/yilia/.babelrc","hash":"b1b76475ac17dc9e2fa50af96c9e31eea2d0f2b4","modified":1483606695000},{"_id":"themes/yilia/.eslintrc.js","hash":"5696ae049de010ed3786768b0c359f14c05b5ec6","modified":1483606695000},{"_id":"themes/yilia/.eslintignore","hash":"df0a50b13cc00acb749226fee3cee6e0351fb1d9","modified":1483606695000},{"_id":"themes/yilia/.editorconfig","hash":"da6d022b8f4d9c961e2f8f80677e92af8de0db4d","modified":1483606695000},{"_id":"themes/yilia/.gitattributes","hash":"e0f24dceeb1e6878a1dd9b01a2b9df1bc037a867","modified":1483606695000},{"_id":"themes/yilia/.gitignore","hash":"9c4b7d27a1e3e5efa0c8ed143a032a85d586b03b","modified":1483606695000},{"_id":"themes/yilia/_config.yml","hash":"03927b3beb6afb9dff5d6af013a5f757a21c7e7e","modified":1483674443000},{"_id":"themes/yilia/README.md","hash":"0becd9c18f9d44fc364788a34a4f3ec82ca7940a","modified":1483606695000},{"_id":"themes/yilia/package.json","hash":"bbd736a2e0b68c1838441ee1c3e0f09398aaef59","modified":1483606695000},{"_id":"themes/yilia/webpack.config.js","hash":"eed8e87c05ed8f72995b507870f364253f826317","modified":1483606695000},{"_id":"source/_posts/CentOS 6.4 上安装 Python 2.7.x.md","hash":"20b36366b216ef0b52f12384d9277472a52b4b5c","modified":1483675287000},{"_id":"source/_posts/TODO-1：数组去重方法大全.md","hash":"7e6249f16268bb0ba5d5c6eb82dffbb8cad7171b","modified":1483675321000},{"_id":"source/_posts/TODO-2：浏览器唤醒APP.md","hash":"d7c127b9251f5565456cbafb7c875d62f4d33fc4","modified":1483686065000},{"_id":"source/_posts/TODO-3：css relative and absolute.md","hash":"66020341a0881d236d0631597c40c9778fad07ec","modified":1483675334000},{"_id":"source/_posts/TODO-4：nodejs 实现一部漫画爬取.md","hash":"b68a167df70d2a4a53f79873938f38cf3608d392","modified":1483686014000},{"_id":"source/_posts/fadora 23 dnf 更新错误.md","hash":"4fcdef561b62ef8ddf71c0f42c2a20a8374eebb1","modified":1483675292000},{"_id":"source/_posts/fedora 22 安装 elixir.md","hash":"29a6a610a3dabeb7ad619664b81daedd8b7b3a98","modified":1483675303000},{"_id":"source/_posts/fedora 21 安装搜狗输入法.md","hash":"47aa149164a2d9a394857167bd825ca208e22836","modified":1483675297000},{"_id":"source/_posts/fedora下yum重新安装npm失败及解决.md","hash":"15506d38d85cb1de3adcf66ce7fb4c6bf52f0563","modified":1483675295000},{"_id":"source/_posts/fedora wifi频繁断开.md","hash":"464bcf2813dae2dd952d31e387c3df67c72d8c58","modified":1483675306000},{"_id":"source/_posts/linux 下使用n配置使用淘宝镜像.md","hash":"892a809a425c7c955b0266512e97fa86c4feff4a","modified":1483674694000},{"_id":"source/_posts/gnome 3 的几个桌面扩展.md","hash":"8d1ed0dff73b1311e382ebdfc2447786fa318392","modified":1483673715000},{"_id":"source/_posts/mongodb 基于地理位置的查询.md","hash":"b8803fa5bd593c1e32b6d826010ae7e62bbc4fc7","modified":1483675313000},{"_id":"source/_posts/react with JSX for {if…else…}.md","hash":"e51823a22525ced071417f2e8234ba2246652680","modified":1483675318000},{"_id":"source/_posts/【codewarns-8kyu】-  Arguments to Binary addition.md","hash":"962898f9b828cc9dd3a597b2874dc37c357acd14","modified":1483686085000},{"_id":"source/_posts/使用 npm 私有仓库安装依赖遇到的坑.md","hash":"d3c5753b49123b4e7eba8852d60ddc805d0bedb7","modified":1483686035000},{"_id":"source/_posts/学习Angular2-typescript编译.md","hash":"3db2f5d061ba2dee76e013eb2f73d1810773691e","modified":1483675258000},{"_id":"source/_posts/手机端网页监测是否打开键盘.md","hash":"b9b4ee75532ec902f3aa8cd59e62a372d8365138","modified":1483675261000},{"_id":"source/_posts/解决fedora下webstorm中文字符不显示的问题.md","hash":"d8acc630fc538718351d8fb65e754a6e29883337","modified":1483675272000},{"_id":"themes/yilia/.git/config","hash":"256e47c5a4386e6881318e44d2a716fdc3197863","modified":1483606695000},{"_id":"themes/yilia/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1483606695000},{"_id":"themes/yilia/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1483606551000},{"_id":"themes/yilia/.git/index","hash":"31080741be51fe7abf5f30882e19773902c77f6f","modified":1483668894000},{"_id":"themes/yilia/.git/packed-refs","hash":"704490cfb91c64768d799966fc11bee4f7104bc7","modified":1483606695000},{"_id":"themes/yilia/languages/default.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1483606695000},{"_id":"themes/yilia/languages/fr.yml","hash":"84ab164b37c6abf625473e9a0c18f6f815dd5fd9","modified":1483606695000},{"_id":"themes/yilia/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1483606695000},{"_id":"themes/yilia/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1483606695000},{"_id":"themes/yilia/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1483606695000},{"_id":"themes/yilia/languages/zh-CN.yml","hash":"ca40697097ab0b3672a80b455d3f4081292d1eed","modified":1483606695000},{"_id":"themes/yilia/languages/zh-tw.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1483606695000},{"_id":"themes/yilia/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1483606695000},{"_id":"themes/yilia/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1483606695000},{"_id":"themes/yilia/layout/index.ejs","hash":"a35dc900203f9d8dd863ea4c1722198d6d457ec8","modified":1483606695000},{"_id":"themes/yilia/layout/layout.ejs","hash":"0a332bdbd3b86c231d690614687f5b97186b85d5","modified":1483606695000},{"_id":"themes/yilia/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1483606695000},{"_id":"themes/yilia/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1483606695000},{"_id":"themes/yilia/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1483606695000},{"_id":"themes/yilia/source/main.d221b8.css","hash":"9e853b14b4c70a560bb6c12c9c98600d0abf798d","modified":1483606695000},{"_id":"themes/yilia/source/mobile.c853ad.js","hash":"527ce9d0d479ed467c24113ed8833b09f2aa2300","modified":1483606695000},{"_id":"themes/yilia/source-src/css.ejs","hash":"edc89a945d271abfb24240ab31d5ea0285530b23","modified":1483606695000},{"_id":"themes/yilia/source/slider.59dfdc.js","hash":"28e623e183fd004ac5e0fe7984b904bd398b55c4","modified":1483606695000},{"_id":"themes/yilia/source-src/script.ejs","hash":"946b5e60b24438e8b876fa22b8a9864068e859ae","modified":1483606695000},{"_id":"themes/yilia/source/main.d221b8.js","hash":"79cb6470c3a7e6851121c545a992029293b5b401","modified":1483606695000},{"_id":"themes/yilia/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1483606551000},{"_id":"themes/yilia/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1483606551000},{"_id":"themes/yilia/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1483606551000},{"_id":"themes/yilia/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1483606551000},{"_id":"themes/yilia/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1483606551000},{"_id":"themes/yilia/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1483606551000},{"_id":"themes/yilia/.git/hooks/pre-rebase.sample","hash":"5885a56ab4fca8075a05a562d005e922cde9853b","modified":1483606551000},{"_id":"themes/yilia/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1483606551000},{"_id":"themes/yilia/.git/hooks/update.sample","hash":"39355a075977d05708ef74e1b66d09a36e486df1","modified":1483606551000},{"_id":"themes/yilia/.git/logs/HEAD","hash":"c001a990a9299e7bb23d4350cf7809fd868e7fd0","modified":1483606695000},{"_id":"themes/yilia/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1483606551000},{"_id":"themes/yilia/layout/_partial/after-footer.ejs","hash":"143710485f734c5a997e0b1c26192bbba2982bcc","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/archive-post.ejs","hash":"1f7d4819b7f67602c4a1b99871808d2160b60978","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/archive.ejs","hash":"a6e94061ac55b9eb55275f87b608d62f6ea35659","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/baidu-analytics.ejs","hash":"f0e6e88f9f7eb08b8fe51449a8a3016273507924","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/article.ejs","hash":"7308ffd24debef7ff898813800d31aa6ff773310","modified":1483667046000},{"_id":"themes/yilia/layout/_partial/footer.ejs","hash":"f2994e0acd1d606ebf4680afc4fa652e148ccf4e","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/css.ejs","hash":"facc996e4a5bb798e0e5476e233699c4ccc0630e","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/google-analytics.ejs","hash":"f921e7f9223d7c95165e0f835f353b2938e40c45","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/head.ejs","hash":"64f092186b5a744aa1603ce22bb1d44a34446add","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/left-col.ejs","hash":"2387d91cf94b0b36e8a36841992a5fce63ebd069","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/header.ejs","hash":"6387a93dad7c3d778eb91e3821852fbf6813880c","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/mathjax.ejs","hash":"151a1ef2173ba7b6789d349f0f8da89616cc1394","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/mobile-nav.ejs","hash":"7fbbfabf5e29525b24ada14613c21a26789132b4","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/script.ejs","hash":"7d6c08c650c54f2ae86ccdb47ef43f038b0a4385","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/tools.ejs","hash":"f5e98b6013c968afb867626ed6617cd1cedc3d3a","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/viewer.ejs","hash":"e495790b2abe2290875817e42bd505bc611d3e26","modified":1483606695000},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1483606695000},{"_id":"themes/yilia/source/fonts/iconfont.b7ae25.ttf","hash":"697449e7790edd12e208706ecaa8d5d0eed44cde","modified":1483606695000},{"_id":"themes/yilia/source/fonts/iconfont.59e68b.eot","hash":"b7f28dc802d6e32281e8fe7930d4dd2022d00717","modified":1483606695000},{"_id":"themes/yilia/source/fonts/iconfont.ca3627.woff","hash":"cda0ea1dc25dc3d329d7637afe2cd6aec37e351b","modified":1483606695000},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1483606695000},{"_id":"themes/yilia/source/fonts/iconfont.dba24b.svg","hash":"3313bf984fbee56b022942a5d19c916b4734fd60","modified":1483606695000},{"_id":"themes/yilia/source-src/css/_core.scss","hash":"24f347a2412abbf58318369152504da9538f8d3b","modified":1483606695000},{"_id":"themes/yilia/source-src/css/_function.scss","hash":"93a50dd19a93485712da1f8d0a1672482dd1eabc","modified":1483606695000},{"_id":"themes/yilia/source-src/css/archive.scss","hash":"b750499d5120f963b683d0c96ac3f345c714e448","modified":1483606695000},{"_id":"themes/yilia/source-src/css/article-inner.scss","hash":"ce24ab7049be634c17a163e2db39f1f0b1f7c119","modified":1483606695000},{"_id":"themes/yilia/source-src/css/article-main.scss","hash":"3fad68bd74260326f83090b0974dd80707e7bac7","modified":1483606695000},{"_id":"themes/yilia/source-src/css/article-nav.scss","hash":"b68772aa2b47d0ed89ce95d4e9d3d27931fe885c","modified":1483606695000},{"_id":"themes/yilia/source-src/css/article.scss","hash":"0f6d61af99ed4db87f8589db1feaea7747b55963","modified":1483606695000},{"_id":"themes/yilia/source-src/css/duoshuo.scss","hash":"7c00f9102c9b102aa1370a346a0730e743351fbb","modified":1483606695000},{"_id":"themes/yilia/source-src/css/footer.scss","hash":"7c995410b25baaf61dfc5e148e22ca60330abcd3","modified":1483606695000},{"_id":"themes/yilia/source-src/css/fonts.scss","hash":"a73d37ff38d44c774e3ac081d59416b0e8592ca4","modified":1483606695000},{"_id":"themes/yilia/source-src/css/grid.scss","hash":"849a29fcd7150214fcf7b9715fa5dc71d1f9b896","modified":1483606695000},{"_id":"themes/yilia/source-src/css/highlight.scss","hash":"819774a2979d0d94eb4e3ebf62afc96f803bac67","modified":1483606695000},{"_id":"themes/yilia/source-src/css/global.scss","hash":"b4cb4f45a55d4250cd9056f76dab2a3c0dabcec4","modified":1483606695000},{"_id":"themes/yilia/source-src/css/left.scss","hash":"0ce6345a86c44e3fea5a4aa439614541112538f3","modified":1483606695000},{"_id":"themes/yilia/source-src/css/main.scss","hash":"40c055e8360973a75db7c13f3280a4f465f9e5e3","modified":1483606695000},{"_id":"themes/yilia/source-src/css/mobile-slider.scss","hash":"f053c609d84df0dd9eee1d11ddf0c19163a456be","modified":1483606695000},{"_id":"themes/yilia/source-src/css/mobile.scss","hash":"12abb65289eed5391d657b963a20f96a473b1cbd","modified":1483606695000},{"_id":"themes/yilia/source-src/css/scroll.scss","hash":"9c8dfd1c76854ef063494ca76fac6360b391ed6d","modified":1483606695000},{"_id":"themes/yilia/source-src/css/reward.scss","hash":"80a4fcf9171d4a33235da96ac8a2b7dcabc45dfb","modified":1483606695000},{"_id":"themes/yilia/source-src/css/page.scss","hash":"bf206bb7f7d0967bc8b7fdf01b7ffc99aff9ba88","modified":1483606695000},{"_id":"themes/yilia/source-src/css/tags-cloud.scss","hash":"c8aa84fca93862d3caae77c552873b8610f33327","modified":1483606695000},{"_id":"themes/yilia/source-src/css/social.scss","hash":"a14f37a57ce7a720a36196f6469d8be955284f8c","modified":1483606695000},{"_id":"themes/yilia/source-src/css/share.scss","hash":"150c6425f6582e7ec78a873256ce49c9930e8805","modified":1483606695000},{"_id":"themes/yilia/source-src/css/tags.scss","hash":"ac67a3c7097849206244db9b0ba91daaba017ef5","modified":1483606695000},{"_id":"themes/yilia/source-src/css/tools.scss","hash":"61917c928d09783a3bc8a91503a59ab3a8696e90","modified":1483606695000},{"_id":"themes/yilia/source-src/css/tooltip.scss","hash":"53d5a554bc2f38e9bb3d26400a47767013c05216","modified":1483606695000},{"_id":"themes/yilia/source-src/js/Q.js","hash":"d011af172064b6c6e0c7051d8f9879373ddac113","modified":1483606695000},{"_id":"themes/yilia/source-src/js/browser.js","hash":"04095b38cfd4316a23f8eb14b1ffaf95f78a4260","modified":1483606695000},{"_id":"themes/yilia/source-src/js/anm.js","hash":"4a4c5d82b09a3063f91a434388e6aa064fd7fd98","modified":1483606695000},{"_id":"themes/yilia/source-src/js/fix.js","hash":"17be4f27eb8951835c29dafd0f6ba1b18e47cc6b","modified":1483606695000},{"_id":"themes/yilia/source-src/js/main.js","hash":"d665f4cf30450984591bc8ad2348a1baf720d04b","modified":1483606695000},{"_id":"themes/yilia/source-src/js/share.js","hash":"b090f82cf80cba7da764753906d9e2cc2acdf30d","modified":1483606695000},{"_id":"themes/yilia/source-src/js/report.js","hash":"4f1d9a18a936ce40b037f636a39127dd19175b6e","modified":1483606695000},{"_id":"themes/yilia/source-src/js/mobile.js","hash":"4d823b039fd296d24a454eae5a798b93c44560cb","modified":1483606695000},{"_id":"themes/yilia/source-src/js/slider.js","hash":"0adaf1e0d0dac9099fa0186fe784262a88f5b004","modified":1483606695000},{"_id":"themes/yilia/source-src/js/util.js","hash":"8456e9d6b19532742582c99b2fb9d09e146e1c58","modified":1483606695000},{"_id":"themes/yilia/source-src/js/viewer.js","hash":"808a2e1ed407984cfdc929b827d3638f70ec9a2a","modified":1483606695000},{"_id":"themes/yilia/source/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1483606695000},{"_id":"themes/yilia/source/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1483606695000},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1483606695000},{"_id":"themes/yilia/source/img/weixin.png","hash":"985de230c524b41078b8160c6832bd7f80dc06e4","modified":1483607554000},{"_id":"themes/yilia/.git/refs/heads/master","hash":"d8581514d9fcdef2803a87f7ea3e386c648ef01f","modified":1483606695000},{"_id":"themes/yilia/.git/objects/pack/pack-385eef61d7d85e82c35063ea7c8ebeb5c036bbc4.idx","hash":"8522d483c0b7c7e778ea365ef09ab589e15227aa","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/post/category.ejs","hash":"8d8ce25f9a0f9d975bc04c36933844a0ef7bb45d","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/post/duoshuo.ejs","hash":"e8399025ed3b980aedb821c92855889f5f12fd5b","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/post/nav.ejs","hash":"1036c8e4e1a7bc935ba173744da735a0d6ed09cd","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/post/date.ejs","hash":"ef71c4081e866a494367575c59610e7e6339ece0","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/post/share.ejs","hash":"341103df70d0b476e3acd0afbc507a4a120d8f5f","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/post/tag.ejs","hash":"2e783e68755abb852760eb0e627a3fbb50a05a55","modified":1483606695000},{"_id":"themes/yilia/layout/_partial/post/title.ejs","hash":"2f275739b6f1193c123646a5a31f37d48644c667","modified":1483606695000},{"_id":"themes/yilia/source-src/css/core/_animation.scss","hash":"63a37f26276f9207405afe0f2d65339ce295bbaf","modified":1483606695000},{"_id":"themes/yilia/source-src/css/core/_media-queries.scss","hash":"491ab3378d5c11005ba65c607608bb36b368a9d5","modified":1483606695000},{"_id":"themes/yilia/source-src/css/core/_variables.scss","hash":"fb511c505d1309249f21dc577d4ad2bad99a764f","modified":1483606695000},{"_id":"themes/yilia/source-src/css/core/_reset.scss","hash":"fab871fa93bd542e76a71a56428f2994a4aaf443","modified":1483606695000},{"_id":"themes/yilia/source-src/css/core/_mixin.scss","hash":"3bba5c77bad5981eac859fe05c9561d580ba7fa9","modified":1483606695000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.eot","hash":"b7f28dc802d6e32281e8fe7930d4dd2022d00717","modified":1483606695000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.ttf","hash":"697449e7790edd12e208706ecaa8d5d0eed44cde","modified":1483606695000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.svg","hash":"3313bf984fbee56b022942a5d19c916b4734fd60","modified":1483606695000},{"_id":"themes/yilia/source-src/css/img/checkered-pattern.png","hash":"049262fa0886989d750637b264bed34ab51c23c8","modified":1483606695000},{"_id":"themes/yilia/source-src/css/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1483606695000},{"_id":"themes/yilia/source-src/css/img/tooltip.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1483606695000},{"_id":"themes/yilia/source-src/css/fonts/iconfont.woff","hash":"cda0ea1dc25dc3d329d7637afe2cd6aec37e351b","modified":1483606695000},{"_id":"themes/yilia/source/img/zhifubao.png","hash":"b08220df28a205227d877b0db35a924811c09c42","modified":1483607577000},{"_id":"themes/yilia/source/img/5770486.png","hash":"b4b6a0f746e8ea92f16a1a169940edfd71dbd83e","modified":1431568942000},{"_id":"themes/yilia/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1483606695000},{"_id":"themes/yilia/.git/logs/refs/heads/master","hash":"c001a990a9299e7bb23d4350cf7809fd868e7fd0","modified":1483606695000},{"_id":"themes/yilia/.git/logs/refs/remotes/origin/HEAD","hash":"c001a990a9299e7bb23d4350cf7809fd868e7fd0","modified":1483606695000},{"_id":"themes/yilia/.git/objects/pack/pack-385eef61d7d85e82c35063ea7c8ebeb5c036bbc4.pack","hash":"041d1c2dc933e7c6a74a906db577e8c3e88009d6","modified":1483606695000},{"_id":"public/content.json","hash":"b9f0677ec8b71fe17c6bd9058bea1350b99ebda9","modified":1483686098599},{"_id":"public/2017/01/03/TODO-4：nodejs 实现一部漫画爬取/index.html","hash":"8db35eb1dcde51bc3f5a56aea12a507518ca5d9d","modified":1483686099184},{"_id":"public/2016/11/17/使用 npm 私有仓库安装依赖遇到的坑/index.html","hash":"b391da17dce49e45e6058067cf912f6e1f868ad3","modified":1483686099184},{"_id":"public/2016/11/14/TODO-3：css relative and absolute/index.html","hash":"490a9fca6bcd76b1bdcb3ef9529c0970b502c56e","modified":1483675345179},{"_id":"public/2016/09/13/TODO-2：浏览器唤醒APP/index.html","hash":"524b0a22f9accbf027c7ac7802c162a9951d3a2d","modified":1483686099184},{"_id":"public/2016/09/01/TODO-1：数组去重方法大全/index.html","hash":"b1cef09ad9a46c46ad65420b19d9675572e82962","modified":1483675345179},{"_id":"public/2016/07/22/fadora 23 dnf 更新错误/index.html","hash":"6b359647f3b71023ff07ff396efe45d7f4952d33","modified":1483675345179},{"_id":"public/archives/index.html","hash":"e6b0824c77be1ff134cc78671d215a977e3c4f82","modified":1483675086387},{"_id":"public/archives/2016/index.html","hash":"8887f9237c75abf7d531a70d2a415ac06f50aff5","modified":1483675086387},{"_id":"public/archives/2016/07/index.html","hash":"05cf3176c2128b09810d315f6438284080096218","modified":1483675086387},{"_id":"public/archives/2016/09/index.html","hash":"1795c6a60fd492d20999e906e9c44ff30c589e9e","modified":1483675086387},{"_id":"public/archives/2016/10/index.html","hash":"ceb6366cc8be44678bfc527e0c1f5477e2d7ddca","modified":1483675086387},{"_id":"public/archives/2016/11/index.html","hash":"259545fe2604fa4d699ac663ebe63ccbb083d118","modified":1483675086387},{"_id":"public/archives/2017/index.html","hash":"100f9ce2d184bee1c9166e7c8e87676aad69667e","modified":1483675086387},{"_id":"public/archives/2017/01/index.html","hash":"ec0643eb232acb491c21d034a73bc82246a97b78","modified":1483675086387},{"_id":"public/index.html","hash":"70983e6d73c3b8a0c3a18bf99b1b81146d9a2f76","modified":1483686099185},{"_id":"public/2016/10/29/linux 下使用n配置使用淘宝镜像/index.html","hash":"daf31875adbd5cbaeb39c82941441f091b9d0e67","modified":1483675086395},{"_id":"public/2016/07/13/【codewarns-8kyu】-  Arguments to Binary addition/index.html","hash":"640b3f08938241b45a5a4f97cba1889707b69fe0","modified":1483686099185},{"_id":"public/2016/05/30/react with JSX for {if…else…}/index.html","hash":"bc974e5a900c0a3473b8933cd6a533120a8c5028","modified":1483675345179},{"_id":"public/2016/05/03/手机端网页监测是否打开键盘/index.html","hash":"5f1d53398f349b3345333f0cd9843c7b8e7c29d4","modified":1483675345179},{"_id":"public/2016/03/15/fedora 22 安装 elixir/index.html","hash":"7def5eccda8d40f52c20a7811cba831acf4b3332","modified":1483675345180},{"_id":"public/2016/01/08/mongodb 基于地理位置的查询/index.html","hash":"02c4aae61b978d6b699ecb492c841747fed783fd","modified":1483675345180},{"_id":"public/2015/11/30/CentOS 6.4 上安装 Python 2.7.x/index.html","hash":"2c888b1b313acd70acfc9399a931b7730a8a7cc4","modified":1483675345180},{"_id":"public/2015/11/13/学习Angular2-typescript编译/index.html","hash":"5a7be3dd4947983f8939335a7964a44ca00cf9da","modified":1483675345180},{"_id":"public/2015/05/17/gnome 3 的几个桌面扩展/index.html","hash":"638cfba31f11861617a9172d69b96fc424f68b71","modified":1483675086396},{"_id":"public/2015/06/24/fedora 21 安装搜狗输入法/index.html","hash":"6e02ba4ade470e4dda58da70bd28b2401ac7deca","modified":1483675345180},{"_id":"public/2015/04/28/fedora下yum重新安装npm失败及解决/index.html","hash":"26e02198c4a68bdd5ea17a55d6b4f6351c2a2bd8","modified":1483675345180},{"_id":"public/2015/04/20/fedora wifi频繁断开/index.html","hash":"ba6a9152e924296d62c98d1f05f00650e89d9dfb","modified":1483675345180},{"_id":"public/2015/04/19/解决fedora下webstorm中文字符不显示的问题/index.html","hash":"a2644ee9c0cd1f7ba5773735f2c9b91e984427b9","modified":1483675345180},{"_id":"public/archives/page/2/index.html","hash":"8b02f87db94478d2d24ae5e134e73e7cd4defa83","modified":1483675086396},{"_id":"public/archives/2015/index.html","hash":"3f9f9db6c56e43fac7b50adea0196505073527be","modified":1483675086396},{"_id":"public/archives/2015/04/index.html","hash":"1e2aac7d96a7e59233c11e347868cd4c46ddd4b5","modified":1483675086396},{"_id":"public/archives/2015/05/index.html","hash":"ecf3f49155545a30ce73468bec0e7d0fc8fc1299","modified":1483675086396},{"_id":"public/archives/2015/11/index.html","hash":"ee8ae84686ca8abae5b8c62eb258913fca9fe8b0","modified":1483675086396},{"_id":"public/archives/2015/06/index.html","hash":"0c07ff2e057c4075bc2e895e834d22eccf485570","modified":1483675086397},{"_id":"public/archives/2016/page/2/index.html","hash":"e6a9f1b260bcd2c725ec0f635e2289889acdee2c","modified":1483675086397},{"_id":"public/archives/2016/01/index.html","hash":"73aeb3fdc3138a28d7d066ae8bb7c3caaaf1af9d","modified":1483675086397},{"_id":"public/archives/2016/03/index.html","hash":"ca0a11d9fc13f3ee8024e1e546c5918e17279304","modified":1483675086397},{"_id":"public/archives/2016/05/index.html","hash":"e4fbc92fa82ba6bf43dd14b1af1607f96e9e6224","modified":1483675086397},{"_id":"public/page/2/index.html","hash":"131c155e150db3c66cac9cb2bae493a0c3cf0347","modified":1483675345180},{"_id":"public/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1483675086400},{"_id":"public/fonts/iconfont.b7ae25.ttf","hash":"697449e7790edd12e208706ecaa8d5d0eed44cde","modified":1483675086400},{"_id":"public/fonts/iconfont.59e68b.eot","hash":"b7f28dc802d6e32281e8fe7930d4dd2022d00717","modified":1483675086400},{"_id":"public/fonts/iconfont.ca3627.woff","hash":"cda0ea1dc25dc3d329d7637afe2cd6aec37e351b","modified":1483675086400},{"_id":"public/fonts/tooltip.4004ff.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1483675086400},{"_id":"public/fonts/iconfont.dba24b.svg","hash":"3313bf984fbee56b022942a5d19c916b4734fd60","modified":1483675086400},{"_id":"public/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1483675086400},{"_id":"public/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1483675086400},{"_id":"public/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1483675086400},{"_id":"public/img/weixin.png","hash":"985de230c524b41078b8160c6832bd7f80dc06e4","modified":1483675086403},{"_id":"public/slider.59dfdc.js","hash":"28e623e183fd004ac5e0fe7984b904bd398b55c4","modified":1483675086409},{"_id":"public/main.d221b8.css","hash":"9e853b14b4c70a560bb6c12c9c98600d0abf798d","modified":1483675086410},{"_id":"public/mobile.c853ad.js","hash":"527ce9d0d479ed467c24113ed8833b09f2aa2300","modified":1483675086410},{"_id":"public/main.d221b8.js","hash":"79cb6470c3a7e6851121c545a992029293b5b401","modified":1483675086410},{"_id":"public/img/zhifubao.png","hash":"b08220df28a205227d877b0db35a924811c09c42","modified":1483675086410},{"_id":"public/img/5770486.png","hash":"b4b6a0f746e8ea92f16a1a169940edfd71dbd83e","modified":1483675086411}],"Category":[],"Data":[],"Page":[],"Post":[{"title":"TODO-1：数组去重方法大全","date":"2016-09-01T05:10:00.000Z","_content":"\n前两天看到有一个人在总结面试的时候写到问到了数组去重，说是方法很多。一时手痒把我能想到的都写出来了。\n\n1、最传统的方法，“链式”检索，这个方法虽说是双层for循环嵌套，但是能够保留数组原有的顺序，对于有顺序要求的可以用这个，而且可以兼容低版本浏览器。\n\n``` javascript\nlet ary = [2,324,35,2,36,1,2,5,3,51,31,2,5,2,24,5,46,789,0,'2','2'];\n\nfunction uniq (ary){\n    let l = ary.length,\n        isRepeat = false,\n        res = [];\n\n    res[0] = ary[0];\n\n    for(let i = 1; i < l; ++i){\n        isRepeat = false;\n        for(let j = 0; j < res.length; ++j){\n            if(res[j] === ary[i]) {isRepeat =true; break;}\n        }\n        !isRepeat && res.push(ary[i])\n    }\n    return res;\n}\n```\n<!--more-->\n2、利用对象的属性不能重复的特性，但是对象的属性不能保留定义的时候的顺序，所以这个方法会破坏原有数组的顺序。\n\ntips:为了防止太多重复，之后的代码都只写关键部分，同时用了箭头函数。\n\n```javascript\nlet obj = {};\n\nary.forEach(e=>{\n    if(obj[e] !== e) {res.push(e);obj[e] = e;}\n    return true;\n})\n```\n3、在数组中检索，能够被检索到便认为是重复，思路感觉跟第一个方法略有些相似\n```javascript\nres.push(ary[0]);\nary.forEach(e=>{\n    if(res.indexOf(e) == -1) {res.push(e)}\n})\n```\n4、先将数组排序，将相邻相同的值去掉，但是这个只适用于数据类型一致的数组。当然也破坏了原有的数组，如果想要不破坏数据源，可以先拷贝一份。\n```javascript\nary.sort().forEach((e, i, array)=>{\n    if(e !== array[i-1]) res.push(e);\n})\n```\n5、利用数据的筛选和some等方法，主要思路同方法一，但是这个方法的效率应该是不如方法一的，毕竟每次都要拷贝一个新的数组。\n\n```javscript\nary.filter((e, i, array)=>!array.slice(i+1).some(ele=>ele === e));\n```\n如果想要保证原有的顺序，可以先倒序数组。\n\n```javascript\nary.reverse().filter((e, i, array)=>!array.slice(i+1).some(ele=>ele === e)).reverse();\n```\n6、最后一个是ES6提供的新的数据结构Set。它类似于数组，但是成员的值都是唯一的，没有重复的值。\n\n```javascript\nres = [ ...new Set(ary)];\n```\n哈哈，是不是看起来炒鸡棒！","source":"_posts/TODO-1：数组去重方法大全.md","raw":"---\ntitle: TODO-1：数组去重方法大全\ndate: 2016-09-01 13:10\n---\n\n前两天看到有一个人在总结面试的时候写到问到了数组去重，说是方法很多。一时手痒把我能想到的都写出来了。\n\n1、最传统的方法，“链式”检索，这个方法虽说是双层for循环嵌套，但是能够保留数组原有的顺序，对于有顺序要求的可以用这个，而且可以兼容低版本浏览器。\n\n``` javascript\nlet ary = [2,324,35,2,36,1,2,5,3,51,31,2,5,2,24,5,46,789,0,'2','2'];\n\nfunction uniq (ary){\n    let l = ary.length,\n        isRepeat = false,\n        res = [];\n\n    res[0] = ary[0];\n\n    for(let i = 1; i < l; ++i){\n        isRepeat = false;\n        for(let j = 0; j < res.length; ++j){\n            if(res[j] === ary[i]) {isRepeat =true; break;}\n        }\n        !isRepeat && res.push(ary[i])\n    }\n    return res;\n}\n```\n<!--more-->\n2、利用对象的属性不能重复的特性，但是对象的属性不能保留定义的时候的顺序，所以这个方法会破坏原有数组的顺序。\n\ntips:为了防止太多重复，之后的代码都只写关键部分，同时用了箭头函数。\n\n```javascript\nlet obj = {};\n\nary.forEach(e=>{\n    if(obj[e] !== e) {res.push(e);obj[e] = e;}\n    return true;\n})\n```\n3、在数组中检索，能够被检索到便认为是重复，思路感觉跟第一个方法略有些相似\n```javascript\nres.push(ary[0]);\nary.forEach(e=>{\n    if(res.indexOf(e) == -1) {res.push(e)}\n})\n```\n4、先将数组排序，将相邻相同的值去掉，但是这个只适用于数据类型一致的数组。当然也破坏了原有的数组，如果想要不破坏数据源，可以先拷贝一份。\n```javascript\nary.sort().forEach((e, i, array)=>{\n    if(e !== array[i-1]) res.push(e);\n})\n```\n5、利用数据的筛选和some等方法，主要思路同方法一，但是这个方法的效率应该是不如方法一的，毕竟每次都要拷贝一个新的数组。\n\n```javscript\nary.filter((e, i, array)=>!array.slice(i+1).some(ele=>ele === e));\n```\n如果想要保证原有的顺序，可以先倒序数组。\n\n```javascript\nary.reverse().filter((e, i, array)=>!array.slice(i+1).some(ele=>ele === e)).reverse();\n```\n6、最后一个是ES6提供的新的数据结构Set。它类似于数组，但是成员的值都是唯一的，没有重复的值。\n\n```javascript\nres = [ ...new Set(ary)];\n```\n哈哈，是不是看起来炒鸡棒！","slug":"TODO-1：数组去重方法大全","published":1,"updated":"2017-01-06T04:02:01.000Z","_id":"cixl9u5wt0000hjfyozxbabmw","comments":1,"layout":"post","photos":[],"link":"","content":"<p>前两天看到有一个人在总结面试的时候写到问到了数组去重，说是方法很多。一时手痒把我能想到的都写出来了。</p>\n<p>1、最传统的方法，“链式”检索，这个方法虽说是双层for循环嵌套，但是能够保留数组原有的顺序，对于有顺序要求的可以用这个，而且可以兼容低版本浏览器。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> ary = [<span class=\"number\">2</span>,<span class=\"number\">324</span>,<span class=\"number\">35</span>,<span class=\"number\">2</span>,<span class=\"number\">36</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">3</span>,<span class=\"number\">51</span>,<span class=\"number\">31</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">2</span>,<span class=\"number\">24</span>,<span class=\"number\">5</span>,<span class=\"number\">46</span>,<span class=\"number\">789</span>,<span class=\"number\">0</span>,<span class=\"string\">'2'</span>,<span class=\"string\">'2'</span>];</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">uniq</span> (<span class=\"params\">ary</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> l = ary.length,</div><div class=\"line\">        isRepeat = <span class=\"literal\">false</span>,</div><div class=\"line\">        res = [];</div><div class=\"line\"></div><div class=\"line\">    res[<span class=\"number\">0</span>] = ary[<span class=\"number\">0</span>];</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; l; ++i)&#123;</div><div class=\"line\">        isRepeat = <span class=\"literal\">false</span>;</div><div class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; res.length; ++j)&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>(res[j] === ary[i]) &#123;isRepeat =<span class=\"literal\">true</span>; <span class=\"keyword\">break</span>;&#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        !isRepeat &amp;&amp; res.push(ary[i])</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> res;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>2、利用对象的属性不能重复的特性，但是对象的属性不能保留定义的时候的顺序，所以这个方法会破坏原有数组的顺序。</p>\n<p>tips:为了防止太多重复，之后的代码都只写关键部分，同时用了箭头函数。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;&#125;;</div><div class=\"line\"></div><div class=\"line\">ary.forEach(<span class=\"function\"><span class=\"params\">e</span>=&gt;</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(obj[e] !== e) &#123;res.push(e);obj[e] = e;&#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>3、在数组中检索，能够被检索到便认为是重复，思路感觉跟第一个方法略有些相似<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">res.push(ary[<span class=\"number\">0</span>]);</div><div class=\"line\">ary.forEach(<span class=\"function\"><span class=\"params\">e</span>=&gt;</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(res.indexOf(e) == <span class=\"number\">-1</span>) &#123;res.push(e)&#125;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<p>4、先将数组排序，将相邻相同的值去掉，但是这个只适用于数据类型一致的数组。当然也破坏了原有的数组，如果想要不破坏数据源，可以先拷贝一份。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">ary.sort().forEach(<span class=\"function\">(<span class=\"params\">e, i, array</span>)=&gt;</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(e !== array[i<span class=\"number\">-1</span>]) res.push(e);</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<p>5、利用数据的筛选和some等方法，主要思路同方法一，但是这个方法的效率应该是不如方法一的，毕竟每次都要拷贝一个新的数组。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ary.filter((e, i, array)=&gt;!array.slice(i+1).some(ele=&gt;ele === e));</div></pre></td></tr></table></figure>\n<p>如果想要保证原有的顺序，可以先倒序数组。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ary.reverse().filter(<span class=\"function\">(<span class=\"params\">e, i, array</span>)=&gt;</span>!array.slice(i+<span class=\"number\">1</span>).some(<span class=\"function\"><span class=\"params\">ele</span>=&gt;</span>ele === e)).reverse();</div></pre></td></tr></table></figure>\n<p>6、最后一个是ES6提供的新的数据结构Set。它类似于数组，但是成员的值都是唯一的，没有重复的值。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">res = [ ...new <span class=\"built_in\">Set</span>(ary)];</div></pre></td></tr></table></figure>\n<p>哈哈，是不是看起来炒鸡棒！</p>\n","excerpt":"<p>前两天看到有一个人在总结面试的时候写到问到了数组去重，说是方法很多。一时手痒把我能想到的都写出来了。</p>\n<p>1、最传统的方法，“链式”检索，这个方法虽说是双层for循环嵌套，但是能够保留数组原有的顺序，对于有顺序要求的可以用这个，而且可以兼容低版本浏览器。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> ary = [<span class=\"number\">2</span>,<span class=\"number\">324</span>,<span class=\"number\">35</span>,<span class=\"number\">2</span>,<span class=\"number\">36</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">3</span>,<span class=\"number\">51</span>,<span class=\"number\">31</span>,<span class=\"number\">2</span>,<span class=\"number\">5</span>,<span class=\"number\">2</span>,<span class=\"number\">24</span>,<span class=\"number\">5</span>,<span class=\"number\">46</span>,<span class=\"number\">789</span>,<span class=\"number\">0</span>,<span class=\"string\">'2'</span>,<span class=\"string\">'2'</span>];</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">uniq</span> (<span class=\"params\">ary</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> l = ary.length,</div><div class=\"line\">        isRepeat = <span class=\"literal\">false</span>,</div><div class=\"line\">        res = [];</div><div class=\"line\"></div><div class=\"line\">    res[<span class=\"number\">0</span>] = ary[<span class=\"number\">0</span>];</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">1</span>; i &lt; l; ++i)&#123;</div><div class=\"line\">        isRepeat = <span class=\"literal\">false</span>;</div><div class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; res.length; ++j)&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>(res[j] === ary[i]) &#123;isRepeat =<span class=\"literal\">true</span>; <span class=\"keyword\">break</span>;&#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        !isRepeat &amp;&amp; res.push(ary[i])</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> res;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>","more":"<p>2、利用对象的属性不能重复的特性，但是对象的属性不能保留定义的时候的顺序，所以这个方法会破坏原有数组的顺序。</p>\n<p>tips:为了防止太多重复，之后的代码都只写关键部分，同时用了箭头函数。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">let</span> obj = &#123;&#125;;</div><div class=\"line\"></div><div class=\"line\">ary.forEach(<span class=\"function\"><span class=\"params\">e</span>=&gt;</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(obj[e] !== e) &#123;res.push(e);obj[e] = e;&#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>3、在数组中检索，能够被检索到便认为是重复，思路感觉跟第一个方法略有些相似<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">res.push(ary[<span class=\"number\">0</span>]);</div><div class=\"line\">ary.forEach(<span class=\"function\"><span class=\"params\">e</span>=&gt;</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(res.indexOf(e) == <span class=\"number\">-1</span>) &#123;res.push(e)&#125;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<p>4、先将数组排序，将相邻相同的值去掉，但是这个只适用于数据类型一致的数组。当然也破坏了原有的数组，如果想要不破坏数据源，可以先拷贝一份。<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">ary.sort().forEach(<span class=\"function\">(<span class=\"params\">e, i, array</span>)=&gt;</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(e !== array[i<span class=\"number\">-1</span>]) res.push(e);</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure></p>\n<p>5、利用数据的筛选和some等方法，主要思路同方法一，但是这个方法的效率应该是不如方法一的，毕竟每次都要拷贝一个新的数组。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ary.filter((e, i, array)=&gt;!array.slice(i+1).some(ele=&gt;ele === e));</div></pre></td></tr></table></figure>\n<p>如果想要保证原有的顺序，可以先倒序数组。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">ary.reverse().filter(<span class=\"function\">(<span class=\"params\">e, i, array</span>)=&gt;</span>!array.slice(i+<span class=\"number\">1</span>).some(<span class=\"function\"><span class=\"params\">ele</span>=&gt;</span>ele === e)).reverse();</div></pre></td></tr></table></figure>\n<p>6、最后一个是ES6提供的新的数据结构Set。它类似于数组，但是成员的值都是唯一的，没有重复的值。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">res = [ ...new <span class=\"built_in\">Set</span>(ary)];</div></pre></td></tr></table></figure>\n<p>哈哈，是不是看起来炒鸡棒！</p>"},{"title":"TODO-2：浏览器唤醒APP","date":"2016-09-13T08:09:00.000Z","_content":"代码块收藏\n\n<!--more-->\n\n``` javascript\n\n(function() {\n  var UA = navigator.userAgent;\n  var isIPad = (UA.match(/(iPad).*OS\\s([\\d_]+)/)) ? true: false;\n  var isIPhone = (!isIPad && UA.match(/(iPhone\\sOS)\\s([\\d_]+)/)) ? true: false;\n  var isSafari = (isIPhone || isIPad) && UA.match(/Safari/);\n  var SafariVersion = 0;\n  isSafari && (SafariVersion = UA.match(/Version\\/([\\d\\.]+)/));\n  SafariVersion = parseFloat(SafariVersion[1], 10);\n  var isWeixin = navigator.userAgent.indexOf(\"MicroMessenger\") >= 0;\n  var j = false;\n  var s = \"plugIn_downloadAppPlugIn_loadIframe\";\n  var t = false;\n  var D = {};\n  var query = null;\n  var J = {};\n  var isQuery = window.Zepto || window.jQuery ? true: false;\n  var timerAry = [];\n\n  function bindEvent(P, O, N) {\n    if (isQuery) {\n      query(\"#\" + P).bind(O, N)\n    } else {\n      query(\"#\" + P).addEventListener(O, N, !1)\n    }\n  }\n  if (isQuery) {\n    query = window.$;\n    J = window.$\n  } else {\n    query = function(N) {\n      if (typeof N == \"object\") {\n        return N\n      }\n      return document.querySelector(N)\n    };\n    if (!window.$) {\n      window.$ = J = query\n    } else {\n      J = window.$\n    }\n  }\n  window.onblur = function() {\n    for (var N = 0; N < timerAry.length; N++) {\n      clearTimeout(timerAry[N])\n    }\n  };\n  function getCookieByName(P) {\n    var O = document.cookie.indexOf(P + \"=\");\n    if (O == -1) {\n      return \"\"\n    }\n    O = O + P.length + 1;\n    var N = document.cookie.indexOf(\";\", O);\n    if (N == -1) {\n      N = document.cookie.length\n    }\n    return document.cookie.substring(O, N)\n  }\n  function setCookie(P, R, N, S, Q) {\n    var T = P + \"=\" + escape(R);\n    if (N != \"\") {\n      var O = new Date();\n      O.setTime(O.getTime() + N * 24 * 3600 * 1000);\n      T += \";expires=\" + O.toGMTString()\n    }\n    if (S != \"\") {\n      T += \";path=\" + S\n    }\n    if (Q != \"\") {\n      T += \";domain=\" + Q\n    }\n    document.cookie = T\n  }\n  function merageConfig(N) {\n    var P = {\n      downAppURl: \"http://static.chunboimg.com/app/\"+$('#andriod_app_download_version').val() || \"ChunBoMall_2.5.2.apk\",\n      downAppIos: \"https://itunes.apple.com/us/app/chun-bo/id967139095?mt=8\",\n      downWeixin: \"http://www.chunbo.com/app/check_app_source\",\n      downIpad: \"https://itunes.apple.com/us/app/chun-bo/id967139095?mt=8\",\n      inteneUrl: \"chunbo://chunbo/startApp\",\n      inteneUrlParams: null,\n      inteneUrlPage: 3,\n      openAppBtnId: \"\",\n      closePanelBtnId: \"\",\n      closePanelId: \"\",\n      closeCallblack: null,\n      closeCallblackSource: null,\n      cookieFlag: null,\n      noRecord: false,\n      sourceType: \"JSHOP_SOURCE_TYPE\",\n      sourceValue: \"JSHOP_SOURCE_VALUE\",\n      openAppEventId: \"MDownLoadFloat_OpenNow\",\n      closePanelEventId: \"MDownLoadFloat_Close\"\n    };\n    if (N) {\n      for (var O in N) {\n        if (O && N[O]) {\n          P[O] = N[O]\n        }\n      }\n    }\n    return P\n  }\n\n  function getSchemaUrlWithParams(P) {\n    var Y = [];\n    var S = P.inteneUrlParams;\n    var ParamsStr = \"\";\n\n    if (S && !S.sourceType && !S.sourceValue) {\n      S.sourceType = P.sourceType;\n      S.sourceValue = P.sourceValue\n    }\n    if (S) {\n      for (var X in S) {\n        if (X && S[X]) {\n          Y.push('\"' + X + '\":\"' + S[X] + '\"')\n        }\n      }\n    }\n//            不调用默认参数,只有传参里面有值才添加到params\n    if (Y.length) {\n      var O = \"{\" + Y.join(\",\") + \"}\";\n      ParamsStr = \"&params=\" + O\n    }\n\n    return (P.inteneUrl + \"?page=\" + P.inteneUrlPage + ParamsStr)\n  }\n  function tryOpenApp(P, N) {\n    var T = getSchemaUrlWithParams(P);\n    var Q = null;\n    if (isWeixin) {\n      var O = null;\n      if (j) {\n        O = T\n      } else {\n        O = P.downWeixin\n      }\n      location.href = O;\n      return\n    }\n    if (isIPad) {\n      Q = P.downIpad\n    } else {\n      if (isIPhone) {\n        Q = P.downAppIos\n      } else {\n        Q = P.downAppURl\n      }\n    }\n    if (isSafari && SafariVersion >= 9) {\n      setTimeout(function() {\n          var U = document.createElement(\"a\");\n          U.setAttribute(\"href\", T),\n            U.style.display = \"none\",\n            document.body.appendChild(U);\n          var V = document.createEvent(\"HTMLEvents\");\n          V.initEvent(\"click\", !1, !1),\n            U.dispatchEvent(V)\n        },\n        0)\n    } else {\n      document.querySelector(\"#\" + s).src = T\n    }\n    var R = Date.now();\n    setTimeout(function() {\n        if (N) {\n          var U = setTimeout(function() {\n              openFailTryOpen(R, Q)\n            },\n            1500);\n          timerAry.push(U)\n        }\n      },\n      100)\n  }\n  function openFailTryOpen(P, O) {\n    var N = Date.now();\n    if (P && (N - P) < (1500 + 200)) {\n      window.location.href = O\n    }\n  }\n\n  function bindOpenBtnClick(N) {\n    if (N.openAppBtnId) {\n      D[N.openAppBtnId] = N;\n//                I(N.openAppBtnId, N.openAppEventId);\n      bindEvent(N.openAppBtnId, \"click\",\n        function() {\n          var R = this.getAttribute(\"id\");\n          var O = D[R];\n          if (!t) {\n            var P = document.createElement(\"iframe\");\n            P.id = s;\n            document.body.appendChild(P);\n            document.getElementById(s).style.display = \"none\";\n            document.getElementById(s).style.width = \"0px\";\n            document.getElementById(s).style.height = \"0px\";\n            t = true\n          }\n          var Q = O.cookieFlag ? \"downloadAppPlugIn_downCloseDate_\" + O.cookieFlag: \"downloadAppPlugIn_downCloseDate\";\n          setCookie(Q, Date.now() + \"_2592000000\", 1, \"/\", \".chunbo.com\");\n          tryOpenApp(O, true)\n        })\n    }\n  }\n  function bindCloseBtnClick (O) {\n    if (O.closePanelBtnId && O.closePanelId) {\n      D[O.closePanelBtnId] = O;\n//                I(O.closePanelBtnId, O.closePanelEventId);\n      var S = O.cookieFlag ? \"downloadAppPlugIn_downCloseDate_\" + O.cookieFlag: \"downloadAppPlugIn_downCloseDate\";\n      var Q = getCookieByName(S);\n      var R = null;\n      if (Q) {\n        R = Q.split(\"_\");\n        if (R.length == 2) {\n          R[0] = parseInt(R[0], 10);\n          R[1] = parseInt(R[1], 10)\n        } else {\n          R = null\n        }\n      }\n      var N = Date.now();\n      if (!O.noRecord && R && R.length == 2 && (N - R[0]) < R[1]) {\n        document.querySelector(\"#\" + O.closePanelId).style.display = \"none\";\n        if (O.closeCallblack) {\n          var P = O.closeCallblackSource ? O.closeCallblackSource: null;\n          O.closeCallblack.call(P)\n        }\n        return\n      } else {\n        document.querySelector(\"#\" + O.closePanelId).style.display = \"block\"\n      }\n      bindEvent(O.closePanelBtnId, \"click\",\n        function() {\n          var W = this.getAttribute(\"id\");\n          var T = D[W];\n          var V = T.cookieFlag ? \"downloadAppPlugIn_downCloseDate_\" + T.cookieFlag: \"downloadAppPlugIn_downCloseDate\";\n          if (!T.noRecord) {\n            setCookie(V, Date.now() + \"_259200000\", 1, \"/\", \".chunbo.com\");\n          }\n          document.querySelector(\"#\" + T.closePanelId).style.display = \"none\";\n          if (T.closeCallblack) {\n            var U = T.closeCallblackSource ? T.closeCallblackSource: null;\n            T.closeCallblack.call(U)\n          }\n        })\n    }\n  }\n\n\n  function E(N) {\n    var config = merageConfig(N);\n    bindOpenBtnClick(config);\n    bindCloseBtnClick (config)\n  }\n  J.downloadAppPlugIn = E;\n})();\n```\n","source":"_posts/TODO-2：浏览器唤醒APP.md","raw":"---\ntitle: TODO-2：浏览器唤醒APP\ndate: 2016-09-13 16:09\n---\n代码块收藏\n\n<!--more-->\n\n``` javascript\n\n(function() {\n  var UA = navigator.userAgent;\n  var isIPad = (UA.match(/(iPad).*OS\\s([\\d_]+)/)) ? true: false;\n  var isIPhone = (!isIPad && UA.match(/(iPhone\\sOS)\\s([\\d_]+)/)) ? true: false;\n  var isSafari = (isIPhone || isIPad) && UA.match(/Safari/);\n  var SafariVersion = 0;\n  isSafari && (SafariVersion = UA.match(/Version\\/([\\d\\.]+)/));\n  SafariVersion = parseFloat(SafariVersion[1], 10);\n  var isWeixin = navigator.userAgent.indexOf(\"MicroMessenger\") >= 0;\n  var j = false;\n  var s = \"plugIn_downloadAppPlugIn_loadIframe\";\n  var t = false;\n  var D = {};\n  var query = null;\n  var J = {};\n  var isQuery = window.Zepto || window.jQuery ? true: false;\n  var timerAry = [];\n\n  function bindEvent(P, O, N) {\n    if (isQuery) {\n      query(\"#\" + P).bind(O, N)\n    } else {\n      query(\"#\" + P).addEventListener(O, N, !1)\n    }\n  }\n  if (isQuery) {\n    query = window.$;\n    J = window.$\n  } else {\n    query = function(N) {\n      if (typeof N == \"object\") {\n        return N\n      }\n      return document.querySelector(N)\n    };\n    if (!window.$) {\n      window.$ = J = query\n    } else {\n      J = window.$\n    }\n  }\n  window.onblur = function() {\n    for (var N = 0; N < timerAry.length; N++) {\n      clearTimeout(timerAry[N])\n    }\n  };\n  function getCookieByName(P) {\n    var O = document.cookie.indexOf(P + \"=\");\n    if (O == -1) {\n      return \"\"\n    }\n    O = O + P.length + 1;\n    var N = document.cookie.indexOf(\";\", O);\n    if (N == -1) {\n      N = document.cookie.length\n    }\n    return document.cookie.substring(O, N)\n  }\n  function setCookie(P, R, N, S, Q) {\n    var T = P + \"=\" + escape(R);\n    if (N != \"\") {\n      var O = new Date();\n      O.setTime(O.getTime() + N * 24 * 3600 * 1000);\n      T += \";expires=\" + O.toGMTString()\n    }\n    if (S != \"\") {\n      T += \";path=\" + S\n    }\n    if (Q != \"\") {\n      T += \";domain=\" + Q\n    }\n    document.cookie = T\n  }\n  function merageConfig(N) {\n    var P = {\n      downAppURl: \"http://static.chunboimg.com/app/\"+$('#andriod_app_download_version').val() || \"ChunBoMall_2.5.2.apk\",\n      downAppIos: \"https://itunes.apple.com/us/app/chun-bo/id967139095?mt=8\",\n      downWeixin: \"http://www.chunbo.com/app/check_app_source\",\n      downIpad: \"https://itunes.apple.com/us/app/chun-bo/id967139095?mt=8\",\n      inteneUrl: \"chunbo://chunbo/startApp\",\n      inteneUrlParams: null,\n      inteneUrlPage: 3,\n      openAppBtnId: \"\",\n      closePanelBtnId: \"\",\n      closePanelId: \"\",\n      closeCallblack: null,\n      closeCallblackSource: null,\n      cookieFlag: null,\n      noRecord: false,\n      sourceType: \"JSHOP_SOURCE_TYPE\",\n      sourceValue: \"JSHOP_SOURCE_VALUE\",\n      openAppEventId: \"MDownLoadFloat_OpenNow\",\n      closePanelEventId: \"MDownLoadFloat_Close\"\n    };\n    if (N) {\n      for (var O in N) {\n        if (O && N[O]) {\n          P[O] = N[O]\n        }\n      }\n    }\n    return P\n  }\n\n  function getSchemaUrlWithParams(P) {\n    var Y = [];\n    var S = P.inteneUrlParams;\n    var ParamsStr = \"\";\n\n    if (S && !S.sourceType && !S.sourceValue) {\n      S.sourceType = P.sourceType;\n      S.sourceValue = P.sourceValue\n    }\n    if (S) {\n      for (var X in S) {\n        if (X && S[X]) {\n          Y.push('\"' + X + '\":\"' + S[X] + '\"')\n        }\n      }\n    }\n//            不调用默认参数,只有传参里面有值才添加到params\n    if (Y.length) {\n      var O = \"{\" + Y.join(\",\") + \"}\";\n      ParamsStr = \"&params=\" + O\n    }\n\n    return (P.inteneUrl + \"?page=\" + P.inteneUrlPage + ParamsStr)\n  }\n  function tryOpenApp(P, N) {\n    var T = getSchemaUrlWithParams(P);\n    var Q = null;\n    if (isWeixin) {\n      var O = null;\n      if (j) {\n        O = T\n      } else {\n        O = P.downWeixin\n      }\n      location.href = O;\n      return\n    }\n    if (isIPad) {\n      Q = P.downIpad\n    } else {\n      if (isIPhone) {\n        Q = P.downAppIos\n      } else {\n        Q = P.downAppURl\n      }\n    }\n    if (isSafari && SafariVersion >= 9) {\n      setTimeout(function() {\n          var U = document.createElement(\"a\");\n          U.setAttribute(\"href\", T),\n            U.style.display = \"none\",\n            document.body.appendChild(U);\n          var V = document.createEvent(\"HTMLEvents\");\n          V.initEvent(\"click\", !1, !1),\n            U.dispatchEvent(V)\n        },\n        0)\n    } else {\n      document.querySelector(\"#\" + s).src = T\n    }\n    var R = Date.now();\n    setTimeout(function() {\n        if (N) {\n          var U = setTimeout(function() {\n              openFailTryOpen(R, Q)\n            },\n            1500);\n          timerAry.push(U)\n        }\n      },\n      100)\n  }\n  function openFailTryOpen(P, O) {\n    var N = Date.now();\n    if (P && (N - P) < (1500 + 200)) {\n      window.location.href = O\n    }\n  }\n\n  function bindOpenBtnClick(N) {\n    if (N.openAppBtnId) {\n      D[N.openAppBtnId] = N;\n//                I(N.openAppBtnId, N.openAppEventId);\n      bindEvent(N.openAppBtnId, \"click\",\n        function() {\n          var R = this.getAttribute(\"id\");\n          var O = D[R];\n          if (!t) {\n            var P = document.createElement(\"iframe\");\n            P.id = s;\n            document.body.appendChild(P);\n            document.getElementById(s).style.display = \"none\";\n            document.getElementById(s).style.width = \"0px\";\n            document.getElementById(s).style.height = \"0px\";\n            t = true\n          }\n          var Q = O.cookieFlag ? \"downloadAppPlugIn_downCloseDate_\" + O.cookieFlag: \"downloadAppPlugIn_downCloseDate\";\n          setCookie(Q, Date.now() + \"_2592000000\", 1, \"/\", \".chunbo.com\");\n          tryOpenApp(O, true)\n        })\n    }\n  }\n  function bindCloseBtnClick (O) {\n    if (O.closePanelBtnId && O.closePanelId) {\n      D[O.closePanelBtnId] = O;\n//                I(O.closePanelBtnId, O.closePanelEventId);\n      var S = O.cookieFlag ? \"downloadAppPlugIn_downCloseDate_\" + O.cookieFlag: \"downloadAppPlugIn_downCloseDate\";\n      var Q = getCookieByName(S);\n      var R = null;\n      if (Q) {\n        R = Q.split(\"_\");\n        if (R.length == 2) {\n          R[0] = parseInt(R[0], 10);\n          R[1] = parseInt(R[1], 10)\n        } else {\n          R = null\n        }\n      }\n      var N = Date.now();\n      if (!O.noRecord && R && R.length == 2 && (N - R[0]) < R[1]) {\n        document.querySelector(\"#\" + O.closePanelId).style.display = \"none\";\n        if (O.closeCallblack) {\n          var P = O.closeCallblackSource ? O.closeCallblackSource: null;\n          O.closeCallblack.call(P)\n        }\n        return\n      } else {\n        document.querySelector(\"#\" + O.closePanelId).style.display = \"block\"\n      }\n      bindEvent(O.closePanelBtnId, \"click\",\n        function() {\n          var W = this.getAttribute(\"id\");\n          var T = D[W];\n          var V = T.cookieFlag ? \"downloadAppPlugIn_downCloseDate_\" + T.cookieFlag: \"downloadAppPlugIn_downCloseDate\";\n          if (!T.noRecord) {\n            setCookie(V, Date.now() + \"_259200000\", 1, \"/\", \".chunbo.com\");\n          }\n          document.querySelector(\"#\" + T.closePanelId).style.display = \"none\";\n          if (T.closeCallblack) {\n            var U = T.closeCallblackSource ? T.closeCallblackSource: null;\n            T.closeCallblack.call(U)\n          }\n        })\n    }\n  }\n\n\n  function E(N) {\n    var config = merageConfig(N);\n    bindOpenBtnClick(config);\n    bindCloseBtnClick (config)\n  }\n  J.downloadAppPlugIn = E;\n})();\n```\n","slug":"TODO-2：浏览器唤醒APP","published":1,"updated":"2017-01-06T07:01:05.000Z","_id":"cixl9u5wy0001hjfyot743yq3","comments":1,"layout":"post","photos":[],"link":"","content":"<p>代码块收藏</p>\n<a id=\"more\"></a>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div><div class=\"line\">212</div><div class=\"line\">213</div><div class=\"line\">214</div><div class=\"line\">215</div><div class=\"line\">216</div><div class=\"line\">217</div><div class=\"line\">218</div><div class=\"line\">219</div><div class=\"line\">220</div><div class=\"line\">221</div><div class=\"line\">222</div><div class=\"line\">223</div><div class=\"line\">224</div><div class=\"line\">225</div><div class=\"line\">226</div><div class=\"line\">227</div><div class=\"line\">228</div><div class=\"line\">229</div><div class=\"line\">230</div><div class=\"line\">231</div><div class=\"line\">232</div><div class=\"line\">233</div><div class=\"line\">234</div><div class=\"line\">235</div><div class=\"line\">236</div><div class=\"line\">237</div><div class=\"line\">238</div><div class=\"line\">239</div><div class=\"line\">240</div><div class=\"line\">241</div><div class=\"line\">242</div><div class=\"line\">243</div><div class=\"line\">244</div><div class=\"line\">245</div><div class=\"line\">246</div><div class=\"line\">247</div><div class=\"line\">248</div><div class=\"line\">249</div><div class=\"line\">250</div><div class=\"line\">251</div><div class=\"line\">252</div><div class=\"line\">253</div><div class=\"line\">254</div><div class=\"line\">255</div><div class=\"line\">256</div><div class=\"line\">257</div><div class=\"line\">258</div><div class=\"line\">259</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> UA = navigator.userAgent;</div><div class=\"line\">  <span class=\"keyword\">var</span> isIPad = (UA.match(<span class=\"regexp\">/(iPad).*OS\\s([\\d_]+)/</span>)) ? <span class=\"literal\">true</span>: <span class=\"literal\">false</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> isIPhone = (!isIPad &amp;&amp; UA.match(<span class=\"regexp\">/(iPhone\\sOS)\\s([\\d_]+)/</span>)) ? <span class=\"literal\">true</span>: <span class=\"literal\">false</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> isSafari = (isIPhone || isIPad) &amp;&amp; UA.match(<span class=\"regexp\">/Safari/</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> SafariVersion = <span class=\"number\">0</span>;</div><div class=\"line\">  isSafari &amp;&amp; (SafariVersion = UA.match(<span class=\"regexp\">/Version\\/([\\d\\.]+)/</span>));</div><div class=\"line\">  SafariVersion = <span class=\"built_in\">parseFloat</span>(SafariVersion[<span class=\"number\">1</span>], <span class=\"number\">10</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> isWeixin = navigator.userAgent.indexOf(<span class=\"string\">\"MicroMessenger\"</span>) &gt;= <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> j = <span class=\"literal\">false</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> s = <span class=\"string\">\"plugIn_downloadAppPlugIn_loadIframe\"</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> t = <span class=\"literal\">false</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> D = &#123;&#125;;</div><div class=\"line\">  <span class=\"keyword\">var</span> query = <span class=\"literal\">null</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> J = &#123;&#125;;</div><div class=\"line\">  <span class=\"keyword\">var</span> isQuery = <span class=\"built_in\">window</span>.Zepto || <span class=\"built_in\">window</span>.jQuery ? <span class=\"literal\">true</span>: <span class=\"literal\">false</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> timerAry = [];</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindEvent</span>(<span class=\"params\">P, O, N</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (isQuery) &#123;</div><div class=\"line\">      query(<span class=\"string\">\"#\"</span> + P).bind(O, N)</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      query(<span class=\"string\">\"#\"</span> + P).addEventListener(O, N, !<span class=\"number\">1</span>)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">if</span> (isQuery) &#123;</div><div class=\"line\">    query = <span class=\"built_in\">window</span>.$;</div><div class=\"line\">    J = <span class=\"built_in\">window</span>.$</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    query = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">N</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> N == <span class=\"string\">\"object\"</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> N</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">document</span>.querySelector(N)</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">window</span>.$) &#123;</div><div class=\"line\">      <span class=\"built_in\">window</span>.$ = J = query</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      J = <span class=\"built_in\">window</span>.$</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">window</span>.onblur = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> N = <span class=\"number\">0</span>; N &lt; timerAry.length; N++) &#123;</div><div class=\"line\">      clearTimeout(timerAry[N])</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getCookieByName</span>(<span class=\"params\">P</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> O = <span class=\"built_in\">document</span>.cookie.indexOf(P + <span class=\"string\">\"=\"</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span> (O == <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">\"\"</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    O = O + P.length + <span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> N = <span class=\"built_in\">document</span>.cookie.indexOf(<span class=\"string\">\";\"</span>, O);</div><div class=\"line\">    <span class=\"keyword\">if</span> (N == <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">      N = <span class=\"built_in\">document</span>.cookie.length</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">document</span>.cookie.substring(O, N)</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setCookie</span>(<span class=\"params\">P, R, N, S, Q</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> T = P + <span class=\"string\">\"=\"</span> + <span class=\"built_in\">escape</span>(R);</div><div class=\"line\">    <span class=\"keyword\">if</span> (N != <span class=\"string\">\"\"</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> O = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</div><div class=\"line\">      O.setTime(O.getTime() + N * <span class=\"number\">24</span> * <span class=\"number\">3600</span> * <span class=\"number\">1000</span>);</div><div class=\"line\">      T += <span class=\"string\">\";expires=\"</span> + O.toGMTString()</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (S != <span class=\"string\">\"\"</span>) &#123;</div><div class=\"line\">      T += <span class=\"string\">\";path=\"</span> + S</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (Q != <span class=\"string\">\"\"</span>) &#123;</div><div class=\"line\">      T += <span class=\"string\">\";domain=\"</span> + Q</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"built_in\">document</span>.cookie = T</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">merageConfig</span>(<span class=\"params\">N</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> P = &#123;</div><div class=\"line\">      <span class=\"attr\">downAppURl</span>: <span class=\"string\">\"http://static.chunboimg.com/app/\"</span>+$(<span class=\"string\">'#andriod_app_download_version'</span>).val() || <span class=\"string\">\"ChunBoMall_2.5.2.apk\"</span>,</div><div class=\"line\">      <span class=\"attr\">downAppIos</span>: <span class=\"string\">\"https://itunes.apple.com/us/app/chun-bo/id967139095?mt=8\"</span>,</div><div class=\"line\">      <span class=\"attr\">downWeixin</span>: <span class=\"string\">\"http://www.chunbo.com/app/check_app_source\"</span>,</div><div class=\"line\">      <span class=\"attr\">downIpad</span>: <span class=\"string\">\"https://itunes.apple.com/us/app/chun-bo/id967139095?mt=8\"</span>,</div><div class=\"line\">      <span class=\"attr\">inteneUrl</span>: <span class=\"string\">\"chunbo://chunbo/startApp\"</span>,</div><div class=\"line\">      <span class=\"attr\">inteneUrlParams</span>: <span class=\"literal\">null</span>,</div><div class=\"line\">      <span class=\"attr\">inteneUrlPage</span>: <span class=\"number\">3</span>,</div><div class=\"line\">      <span class=\"attr\">openAppBtnId</span>: <span class=\"string\">\"\"</span>,</div><div class=\"line\">      <span class=\"attr\">closePanelBtnId</span>: <span class=\"string\">\"\"</span>,</div><div class=\"line\">      <span class=\"attr\">closePanelId</span>: <span class=\"string\">\"\"</span>,</div><div class=\"line\">      <span class=\"attr\">closeCallblack</span>: <span class=\"literal\">null</span>,</div><div class=\"line\">      <span class=\"attr\">closeCallblackSource</span>: <span class=\"literal\">null</span>,</div><div class=\"line\">      <span class=\"attr\">cookieFlag</span>: <span class=\"literal\">null</span>,</div><div class=\"line\">      <span class=\"attr\">noRecord</span>: <span class=\"literal\">false</span>,</div><div class=\"line\">      <span class=\"attr\">sourceType</span>: <span class=\"string\">\"JSHOP_SOURCE_TYPE\"</span>,</div><div class=\"line\">      <span class=\"attr\">sourceValue</span>: <span class=\"string\">\"JSHOP_SOURCE_VALUE\"</span>,</div><div class=\"line\">      <span class=\"attr\">openAppEventId</span>: <span class=\"string\">\"MDownLoadFloat_OpenNow\"</span>,</div><div class=\"line\">      <span class=\"attr\">closePanelEventId</span>: <span class=\"string\">\"MDownLoadFloat_Close\"</span></div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"keyword\">if</span> (N) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> O <span class=\"keyword\">in</span> N) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (O &amp;&amp; N[O]) &#123;</div><div class=\"line\">          P[O] = N[O]</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> P</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSchemaUrlWithParams</span>(<span class=\"params\">P</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> Y = [];</div><div class=\"line\">    <span class=\"keyword\">var</span> S = P.inteneUrlParams;</div><div class=\"line\">    <span class=\"keyword\">var</span> ParamsStr = <span class=\"string\">\"\"</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (S &amp;&amp; !S.sourceType &amp;&amp; !S.sourceValue) &#123;</div><div class=\"line\">      S.sourceType = P.sourceType;</div><div class=\"line\">      S.sourceValue = P.sourceValue</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (S) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> X <span class=\"keyword\">in</span> S) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (X &amp;&amp; S[X]) &#123;</div><div class=\"line\">          Y.push(<span class=\"string\">'\"'</span> + X + <span class=\"string\">'\":\"'</span> + S[X] + <span class=\"string\">'\"'</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"><span class=\"comment\">//            不调用默认参数,只有传参里面有值才添加到params</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (Y.length) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> O = <span class=\"string\">\"&#123;\"</span> + Y.join(<span class=\"string\">\",\"</span>) + <span class=\"string\">\"&#125;\"</span>;</div><div class=\"line\">      ParamsStr = <span class=\"string\">\"&amp;params=\"</span> + O</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> (P.inteneUrl + <span class=\"string\">\"?page=\"</span> + P.inteneUrlPage + ParamsStr)</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tryOpenApp</span>(<span class=\"params\">P, N</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> T = getSchemaUrlWithParams(P);</div><div class=\"line\">    <span class=\"keyword\">var</span> Q = <span class=\"literal\">null</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (isWeixin) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> O = <span class=\"literal\">null</span>;</div><div class=\"line\">      <span class=\"keyword\">if</span> (j) &#123;</div><div class=\"line\">        O = T</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        O = P.downWeixin</div><div class=\"line\">      &#125;</div><div class=\"line\">      location.href = O;</div><div class=\"line\">      <span class=\"keyword\">return</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (isIPad) &#123;</div><div class=\"line\">      Q = P.downIpad</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (isIPhone) &#123;</div><div class=\"line\">        Q = P.downAppIos</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        Q = P.downAppURl</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (isSafari &amp;&amp; SafariVersion &gt;= <span class=\"number\">9</span>) &#123;</div><div class=\"line\">      setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">          <span class=\"keyword\">var</span> U = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"a\"</span>);</div><div class=\"line\">          U.setAttribute(<span class=\"string\">\"href\"</span>, T),</div><div class=\"line\">            U.style.display = <span class=\"string\">\"none\"</span>,</div><div class=\"line\">            <span class=\"built_in\">document</span>.body.appendChild(U);</div><div class=\"line\">          <span class=\"keyword\">var</span> V = <span class=\"built_in\">document</span>.createEvent(<span class=\"string\">\"HTMLEvents\"</span>);</div><div class=\"line\">          V.initEvent(<span class=\"string\">\"click\"</span>, !<span class=\"number\">1</span>, !<span class=\"number\">1</span>),</div><div class=\"line\">            U.dispatchEvent(V)</div><div class=\"line\">        &#125;,</div><div class=\"line\">        <span class=\"number\">0</span>)</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\"#\"</span> + s).src = T</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">var</span> R = <span class=\"built_in\">Date</span>.now();</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (N) &#123;</div><div class=\"line\">          <span class=\"keyword\">var</span> U = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">              openFailTryOpen(R, Q)</div><div class=\"line\">            &#125;,</div><div class=\"line\">            <span class=\"number\">1500</span>);</div><div class=\"line\">          timerAry.push(U)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;,</div><div class=\"line\">      <span class=\"number\">100</span>)</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">openFailTryOpen</span>(<span class=\"params\">P, O</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> N = <span class=\"built_in\">Date</span>.now();</div><div class=\"line\">    <span class=\"keyword\">if</span> (P &amp;&amp; (N - P) &lt; (<span class=\"number\">1500</span> + <span class=\"number\">200</span>)) &#123;</div><div class=\"line\">      <span class=\"built_in\">window</span>.location.href = O</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindOpenBtnClick</span>(<span class=\"params\">N</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (N.openAppBtnId) &#123;</div><div class=\"line\">      D[N.openAppBtnId] = N;</div><div class=\"line\"><span class=\"comment\">//                I(N.openAppBtnId, N.openAppEventId);</span></div><div class=\"line\">      bindEvent(N.openAppBtnId, <span class=\"string\">\"click\"</span>,</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">          <span class=\"keyword\">var</span> R = <span class=\"keyword\">this</span>.getAttribute(<span class=\"string\">\"id\"</span>);</div><div class=\"line\">          <span class=\"keyword\">var</span> O = D[R];</div><div class=\"line\">          <span class=\"keyword\">if</span> (!t) &#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> P = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"iframe\"</span>);</div><div class=\"line\">            P.id = s;</div><div class=\"line\">            <span class=\"built_in\">document</span>.body.appendChild(P);</div><div class=\"line\">            <span class=\"built_in\">document</span>.getElementById(s).style.display = <span class=\"string\">\"none\"</span>;</div><div class=\"line\">            <span class=\"built_in\">document</span>.getElementById(s).style.width = <span class=\"string\">\"0px\"</span>;</div><div class=\"line\">            <span class=\"built_in\">document</span>.getElementById(s).style.height = <span class=\"string\">\"0px\"</span>;</div><div class=\"line\">            t = <span class=\"literal\">true</span></div><div class=\"line\">          &#125;</div><div class=\"line\">          <span class=\"keyword\">var</span> Q = O.cookieFlag ? <span class=\"string\">\"downloadAppPlugIn_downCloseDate_\"</span> + O.cookieFlag: <span class=\"string\">\"downloadAppPlugIn_downCloseDate\"</span>;</div><div class=\"line\">          setCookie(Q, <span class=\"built_in\">Date</span>.now() + <span class=\"string\">\"_2592000000\"</span>, <span class=\"number\">1</span>, <span class=\"string\">\"/\"</span>, <span class=\"string\">\".chunbo.com\"</span>);</div><div class=\"line\">          tryOpenApp(O, <span class=\"literal\">true</span>)</div><div class=\"line\">        &#125;)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindCloseBtnClick</span> (<span class=\"params\">O</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (O.closePanelBtnId &amp;&amp; O.closePanelId) &#123;</div><div class=\"line\">      D[O.closePanelBtnId] = O;</div><div class=\"line\"><span class=\"comment\">//                I(O.closePanelBtnId, O.closePanelEventId);</span></div><div class=\"line\">      <span class=\"keyword\">var</span> S = O.cookieFlag ? <span class=\"string\">\"downloadAppPlugIn_downCloseDate_\"</span> + O.cookieFlag: <span class=\"string\">\"downloadAppPlugIn_downCloseDate\"</span>;</div><div class=\"line\">      <span class=\"keyword\">var</span> Q = getCookieByName(S);</div><div class=\"line\">      <span class=\"keyword\">var</span> R = <span class=\"literal\">null</span>;</div><div class=\"line\">      <span class=\"keyword\">if</span> (Q) &#123;</div><div class=\"line\">        R = Q.split(<span class=\"string\">\"_\"</span>);</div><div class=\"line\">        <span class=\"keyword\">if</span> (R.length == <span class=\"number\">2</span>) &#123;</div><div class=\"line\">          R[<span class=\"number\">0</span>] = <span class=\"built_in\">parseInt</span>(R[<span class=\"number\">0</span>], <span class=\"number\">10</span>);</div><div class=\"line\">          R[<span class=\"number\">1</span>] = <span class=\"built_in\">parseInt</span>(R[<span class=\"number\">1</span>], <span class=\"number\">10</span>)</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">          R = <span class=\"literal\">null</span></div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">var</span> N = <span class=\"built_in\">Date</span>.now();</div><div class=\"line\">      <span class=\"keyword\">if</span> (!O.noRecord &amp;&amp; R &amp;&amp; R.length == <span class=\"number\">2</span> &amp;&amp; (N - R[<span class=\"number\">0</span>]) &lt; R[<span class=\"number\">1</span>]) &#123;</div><div class=\"line\">        <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\"#\"</span> + O.closePanelId).style.display = <span class=\"string\">\"none\"</span>;</div><div class=\"line\">        <span class=\"keyword\">if</span> (O.closeCallblack) &#123;</div><div class=\"line\">          <span class=\"keyword\">var</span> P = O.closeCallblackSource ? O.closeCallblackSource: <span class=\"literal\">null</span>;</div><div class=\"line\">          O.closeCallblack.call(P)</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span></div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\"#\"</span> + O.closePanelId).style.display = <span class=\"string\">\"block\"</span></div><div class=\"line\">      &#125;</div><div class=\"line\">      bindEvent(O.closePanelBtnId, <span class=\"string\">\"click\"</span>,</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">          <span class=\"keyword\">var</span> W = <span class=\"keyword\">this</span>.getAttribute(<span class=\"string\">\"id\"</span>);</div><div class=\"line\">          <span class=\"keyword\">var</span> T = D[W];</div><div class=\"line\">          <span class=\"keyword\">var</span> V = T.cookieFlag ? <span class=\"string\">\"downloadAppPlugIn_downCloseDate_\"</span> + T.cookieFlag: <span class=\"string\">\"downloadAppPlugIn_downCloseDate\"</span>;</div><div class=\"line\">          <span class=\"keyword\">if</span> (!T.noRecord) &#123;</div><div class=\"line\">            setCookie(V, <span class=\"built_in\">Date</span>.now() + <span class=\"string\">\"_259200000\"</span>, <span class=\"number\">1</span>, <span class=\"string\">\"/\"</span>, <span class=\"string\">\".chunbo.com\"</span>);</div><div class=\"line\">          &#125;</div><div class=\"line\">          <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\"#\"</span> + T.closePanelId).style.display = <span class=\"string\">\"none\"</span>;</div><div class=\"line\">          <span class=\"keyword\">if</span> (T.closeCallblack) &#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> U = T.closeCallblackSource ? T.closeCallblackSource: <span class=\"literal\">null</span>;</div><div class=\"line\">            T.closeCallblack.call(U)</div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125;)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">E</span>(<span class=\"params\">N</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> config = merageConfig(N);</div><div class=\"line\">    bindOpenBtnClick(config);</div><div class=\"line\">    bindCloseBtnClick (config)</div><div class=\"line\">  &#125;</div><div class=\"line\">  J.downloadAppPlugIn = E;</div><div class=\"line\">&#125;)();</div></pre></td></tr></table></figure>\n","excerpt":"<p>代码块收藏</p>","more":"<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div><div class=\"line\">212</div><div class=\"line\">213</div><div class=\"line\">214</div><div class=\"line\">215</div><div class=\"line\">216</div><div class=\"line\">217</div><div class=\"line\">218</div><div class=\"line\">219</div><div class=\"line\">220</div><div class=\"line\">221</div><div class=\"line\">222</div><div class=\"line\">223</div><div class=\"line\">224</div><div class=\"line\">225</div><div class=\"line\">226</div><div class=\"line\">227</div><div class=\"line\">228</div><div class=\"line\">229</div><div class=\"line\">230</div><div class=\"line\">231</div><div class=\"line\">232</div><div class=\"line\">233</div><div class=\"line\">234</div><div class=\"line\">235</div><div class=\"line\">236</div><div class=\"line\">237</div><div class=\"line\">238</div><div class=\"line\">239</div><div class=\"line\">240</div><div class=\"line\">241</div><div class=\"line\">242</div><div class=\"line\">243</div><div class=\"line\">244</div><div class=\"line\">245</div><div class=\"line\">246</div><div class=\"line\">247</div><div class=\"line\">248</div><div class=\"line\">249</div><div class=\"line\">250</div><div class=\"line\">251</div><div class=\"line\">252</div><div class=\"line\">253</div><div class=\"line\">254</div><div class=\"line\">255</div><div class=\"line\">256</div><div class=\"line\">257</div><div class=\"line\">258</div><div class=\"line\">259</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> UA = navigator.userAgent;</div><div class=\"line\">  <span class=\"keyword\">var</span> isIPad = (UA.match(<span class=\"regexp\">/(iPad).*OS\\s([\\d_]+)/</span>)) ? <span class=\"literal\">true</span>: <span class=\"literal\">false</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> isIPhone = (!isIPad &amp;&amp; UA.match(<span class=\"regexp\">/(iPhone\\sOS)\\s([\\d_]+)/</span>)) ? <span class=\"literal\">true</span>: <span class=\"literal\">false</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> isSafari = (isIPhone || isIPad) &amp;&amp; UA.match(<span class=\"regexp\">/Safari/</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> SafariVersion = <span class=\"number\">0</span>;</div><div class=\"line\">  isSafari &amp;&amp; (SafariVersion = UA.match(<span class=\"regexp\">/Version\\/([\\d\\.]+)/</span>));</div><div class=\"line\">  SafariVersion = <span class=\"built_in\">parseFloat</span>(SafariVersion[<span class=\"number\">1</span>], <span class=\"number\">10</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> isWeixin = navigator.userAgent.indexOf(<span class=\"string\">\"MicroMessenger\"</span>) &gt;= <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> j = <span class=\"literal\">false</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> s = <span class=\"string\">\"plugIn_downloadAppPlugIn_loadIframe\"</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> t = <span class=\"literal\">false</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> D = &#123;&#125;;</div><div class=\"line\">  <span class=\"keyword\">var</span> query = <span class=\"literal\">null</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> J = &#123;&#125;;</div><div class=\"line\">  <span class=\"keyword\">var</span> isQuery = <span class=\"built_in\">window</span>.Zepto || <span class=\"built_in\">window</span>.jQuery ? <span class=\"literal\">true</span>: <span class=\"literal\">false</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> timerAry = [];</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindEvent</span>(<span class=\"params\">P, O, N</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (isQuery) &#123;</div><div class=\"line\">      query(<span class=\"string\">\"#\"</span> + P).bind(O, N)</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      query(<span class=\"string\">\"#\"</span> + P).addEventListener(O, N, !<span class=\"number\">1</span>)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">if</span> (isQuery) &#123;</div><div class=\"line\">    query = <span class=\"built_in\">window</span>.$;</div><div class=\"line\">    J = <span class=\"built_in\">window</span>.$</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    query = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">N</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> N == <span class=\"string\">\"object\"</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> N</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">document</span>.querySelector(N)</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">window</span>.$) &#123;</div><div class=\"line\">      <span class=\"built_in\">window</span>.$ = J = query</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      J = <span class=\"built_in\">window</span>.$</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"built_in\">window</span>.onblur = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> N = <span class=\"number\">0</span>; N &lt; timerAry.length; N++) &#123;</div><div class=\"line\">      clearTimeout(timerAry[N])</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getCookieByName</span>(<span class=\"params\">P</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> O = <span class=\"built_in\">document</span>.cookie.indexOf(P + <span class=\"string\">\"=\"</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span> (O == <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">\"\"</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    O = O + P.length + <span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> N = <span class=\"built_in\">document</span>.cookie.indexOf(<span class=\"string\">\";\"</span>, O);</div><div class=\"line\">    <span class=\"keyword\">if</span> (N == <span class=\"number\">-1</span>) &#123;</div><div class=\"line\">      N = <span class=\"built_in\">document</span>.cookie.length</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">document</span>.cookie.substring(O, N)</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setCookie</span>(<span class=\"params\">P, R, N, S, Q</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> T = P + <span class=\"string\">\"=\"</span> + <span class=\"built_in\">escape</span>(R);</div><div class=\"line\">    <span class=\"keyword\">if</span> (N != <span class=\"string\">\"\"</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> O = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</div><div class=\"line\">      O.setTime(O.getTime() + N * <span class=\"number\">24</span> * <span class=\"number\">3600</span> * <span class=\"number\">1000</span>);</div><div class=\"line\">      T += <span class=\"string\">\";expires=\"</span> + O.toGMTString()</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (S != <span class=\"string\">\"\"</span>) &#123;</div><div class=\"line\">      T += <span class=\"string\">\";path=\"</span> + S</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (Q != <span class=\"string\">\"\"</span>) &#123;</div><div class=\"line\">      T += <span class=\"string\">\";domain=\"</span> + Q</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"built_in\">document</span>.cookie = T</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">merageConfig</span>(<span class=\"params\">N</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> P = &#123;</div><div class=\"line\">      <span class=\"attr\">downAppURl</span>: <span class=\"string\">\"http://static.chunboimg.com/app/\"</span>+$(<span class=\"string\">'#andriod_app_download_version'</span>).val() || <span class=\"string\">\"ChunBoMall_2.5.2.apk\"</span>,</div><div class=\"line\">      <span class=\"attr\">downAppIos</span>: <span class=\"string\">\"https://itunes.apple.com/us/app/chun-bo/id967139095?mt=8\"</span>,</div><div class=\"line\">      <span class=\"attr\">downWeixin</span>: <span class=\"string\">\"http://www.chunbo.com/app/check_app_source\"</span>,</div><div class=\"line\">      <span class=\"attr\">downIpad</span>: <span class=\"string\">\"https://itunes.apple.com/us/app/chun-bo/id967139095?mt=8\"</span>,</div><div class=\"line\">      <span class=\"attr\">inteneUrl</span>: <span class=\"string\">\"chunbo://chunbo/startApp\"</span>,</div><div class=\"line\">      <span class=\"attr\">inteneUrlParams</span>: <span class=\"literal\">null</span>,</div><div class=\"line\">      <span class=\"attr\">inteneUrlPage</span>: <span class=\"number\">3</span>,</div><div class=\"line\">      <span class=\"attr\">openAppBtnId</span>: <span class=\"string\">\"\"</span>,</div><div class=\"line\">      <span class=\"attr\">closePanelBtnId</span>: <span class=\"string\">\"\"</span>,</div><div class=\"line\">      <span class=\"attr\">closePanelId</span>: <span class=\"string\">\"\"</span>,</div><div class=\"line\">      <span class=\"attr\">closeCallblack</span>: <span class=\"literal\">null</span>,</div><div class=\"line\">      <span class=\"attr\">closeCallblackSource</span>: <span class=\"literal\">null</span>,</div><div class=\"line\">      <span class=\"attr\">cookieFlag</span>: <span class=\"literal\">null</span>,</div><div class=\"line\">      <span class=\"attr\">noRecord</span>: <span class=\"literal\">false</span>,</div><div class=\"line\">      <span class=\"attr\">sourceType</span>: <span class=\"string\">\"JSHOP_SOURCE_TYPE\"</span>,</div><div class=\"line\">      <span class=\"attr\">sourceValue</span>: <span class=\"string\">\"JSHOP_SOURCE_VALUE\"</span>,</div><div class=\"line\">      <span class=\"attr\">openAppEventId</span>: <span class=\"string\">\"MDownLoadFloat_OpenNow\"</span>,</div><div class=\"line\">      <span class=\"attr\">closePanelEventId</span>: <span class=\"string\">\"MDownLoadFloat_Close\"</span></div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"keyword\">if</span> (N) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> O <span class=\"keyword\">in</span> N) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (O &amp;&amp; N[O]) &#123;</div><div class=\"line\">          P[O] = N[O]</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> P</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSchemaUrlWithParams</span>(<span class=\"params\">P</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> Y = [];</div><div class=\"line\">    <span class=\"keyword\">var</span> S = P.inteneUrlParams;</div><div class=\"line\">    <span class=\"keyword\">var</span> ParamsStr = <span class=\"string\">\"\"</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (S &amp;&amp; !S.sourceType &amp;&amp; !S.sourceValue) &#123;</div><div class=\"line\">      S.sourceType = P.sourceType;</div><div class=\"line\">      S.sourceValue = P.sourceValue</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (S) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> X <span class=\"keyword\">in</span> S) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (X &amp;&amp; S[X]) &#123;</div><div class=\"line\">          Y.push(<span class=\"string\">'\"'</span> + X + <span class=\"string\">'\":\"'</span> + S[X] + <span class=\"string\">'\"'</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"><span class=\"comment\">//            不调用默认参数,只有传参里面有值才添加到params</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (Y.length) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> O = <span class=\"string\">\"&#123;\"</span> + Y.join(<span class=\"string\">\",\"</span>) + <span class=\"string\">\"&#125;\"</span>;</div><div class=\"line\">      ParamsStr = <span class=\"string\">\"&amp;params=\"</span> + O</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> (P.inteneUrl + <span class=\"string\">\"?page=\"</span> + P.inteneUrlPage + ParamsStr)</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tryOpenApp</span>(<span class=\"params\">P, N</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> T = getSchemaUrlWithParams(P);</div><div class=\"line\">    <span class=\"keyword\">var</span> Q = <span class=\"literal\">null</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (isWeixin) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> O = <span class=\"literal\">null</span>;</div><div class=\"line\">      <span class=\"keyword\">if</span> (j) &#123;</div><div class=\"line\">        O = T</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        O = P.downWeixin</div><div class=\"line\">      &#125;</div><div class=\"line\">      location.href = O;</div><div class=\"line\">      <span class=\"keyword\">return</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (isIPad) &#123;</div><div class=\"line\">      Q = P.downIpad</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (isIPhone) &#123;</div><div class=\"line\">        Q = P.downAppIos</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        Q = P.downAppURl</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (isSafari &amp;&amp; SafariVersion &gt;= <span class=\"number\">9</span>) &#123;</div><div class=\"line\">      setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">          <span class=\"keyword\">var</span> U = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"a\"</span>);</div><div class=\"line\">          U.setAttribute(<span class=\"string\">\"href\"</span>, T),</div><div class=\"line\">            U.style.display = <span class=\"string\">\"none\"</span>,</div><div class=\"line\">            <span class=\"built_in\">document</span>.body.appendChild(U);</div><div class=\"line\">          <span class=\"keyword\">var</span> V = <span class=\"built_in\">document</span>.createEvent(<span class=\"string\">\"HTMLEvents\"</span>);</div><div class=\"line\">          V.initEvent(<span class=\"string\">\"click\"</span>, !<span class=\"number\">1</span>, !<span class=\"number\">1</span>),</div><div class=\"line\">            U.dispatchEvent(V)</div><div class=\"line\">        &#125;,</div><div class=\"line\">        <span class=\"number\">0</span>)</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\"#\"</span> + s).src = T</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">var</span> R = <span class=\"built_in\">Date</span>.now();</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (N) &#123;</div><div class=\"line\">          <span class=\"keyword\">var</span> U = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">              openFailTryOpen(R, Q)</div><div class=\"line\">            &#125;,</div><div class=\"line\">            <span class=\"number\">1500</span>);</div><div class=\"line\">          timerAry.push(U)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;,</div><div class=\"line\">      <span class=\"number\">100</span>)</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">openFailTryOpen</span>(<span class=\"params\">P, O</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> N = <span class=\"built_in\">Date</span>.now();</div><div class=\"line\">    <span class=\"keyword\">if</span> (P &amp;&amp; (N - P) &lt; (<span class=\"number\">1500</span> + <span class=\"number\">200</span>)) &#123;</div><div class=\"line\">      <span class=\"built_in\">window</span>.location.href = O</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindOpenBtnClick</span>(<span class=\"params\">N</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (N.openAppBtnId) &#123;</div><div class=\"line\">      D[N.openAppBtnId] = N;</div><div class=\"line\"><span class=\"comment\">//                I(N.openAppBtnId, N.openAppEventId);</span></div><div class=\"line\">      bindEvent(N.openAppBtnId, <span class=\"string\">\"click\"</span>,</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">          <span class=\"keyword\">var</span> R = <span class=\"keyword\">this</span>.getAttribute(<span class=\"string\">\"id\"</span>);</div><div class=\"line\">          <span class=\"keyword\">var</span> O = D[R];</div><div class=\"line\">          <span class=\"keyword\">if</span> (!t) &#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> P = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"iframe\"</span>);</div><div class=\"line\">            P.id = s;</div><div class=\"line\">            <span class=\"built_in\">document</span>.body.appendChild(P);</div><div class=\"line\">            <span class=\"built_in\">document</span>.getElementById(s).style.display = <span class=\"string\">\"none\"</span>;</div><div class=\"line\">            <span class=\"built_in\">document</span>.getElementById(s).style.width = <span class=\"string\">\"0px\"</span>;</div><div class=\"line\">            <span class=\"built_in\">document</span>.getElementById(s).style.height = <span class=\"string\">\"0px\"</span>;</div><div class=\"line\">            t = <span class=\"literal\">true</span></div><div class=\"line\">          &#125;</div><div class=\"line\">          <span class=\"keyword\">var</span> Q = O.cookieFlag ? <span class=\"string\">\"downloadAppPlugIn_downCloseDate_\"</span> + O.cookieFlag: <span class=\"string\">\"downloadAppPlugIn_downCloseDate\"</span>;</div><div class=\"line\">          setCookie(Q, <span class=\"built_in\">Date</span>.now() + <span class=\"string\">\"_2592000000\"</span>, <span class=\"number\">1</span>, <span class=\"string\">\"/\"</span>, <span class=\"string\">\".chunbo.com\"</span>);</div><div class=\"line\">          tryOpenApp(O, <span class=\"literal\">true</span>)</div><div class=\"line\">        &#125;)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bindCloseBtnClick</span> (<span class=\"params\">O</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (O.closePanelBtnId &amp;&amp; O.closePanelId) &#123;</div><div class=\"line\">      D[O.closePanelBtnId] = O;</div><div class=\"line\"><span class=\"comment\">//                I(O.closePanelBtnId, O.closePanelEventId);</span></div><div class=\"line\">      <span class=\"keyword\">var</span> S = O.cookieFlag ? <span class=\"string\">\"downloadAppPlugIn_downCloseDate_\"</span> + O.cookieFlag: <span class=\"string\">\"downloadAppPlugIn_downCloseDate\"</span>;</div><div class=\"line\">      <span class=\"keyword\">var</span> Q = getCookieByName(S);</div><div class=\"line\">      <span class=\"keyword\">var</span> R = <span class=\"literal\">null</span>;</div><div class=\"line\">      <span class=\"keyword\">if</span> (Q) &#123;</div><div class=\"line\">        R = Q.split(<span class=\"string\">\"_\"</span>);</div><div class=\"line\">        <span class=\"keyword\">if</span> (R.length == <span class=\"number\">2</span>) &#123;</div><div class=\"line\">          R[<span class=\"number\">0</span>] = <span class=\"built_in\">parseInt</span>(R[<span class=\"number\">0</span>], <span class=\"number\">10</span>);</div><div class=\"line\">          R[<span class=\"number\">1</span>] = <span class=\"built_in\">parseInt</span>(R[<span class=\"number\">1</span>], <span class=\"number\">10</span>)</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">          R = <span class=\"literal\">null</span></div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">var</span> N = <span class=\"built_in\">Date</span>.now();</div><div class=\"line\">      <span class=\"keyword\">if</span> (!O.noRecord &amp;&amp; R &amp;&amp; R.length == <span class=\"number\">2</span> &amp;&amp; (N - R[<span class=\"number\">0</span>]) &lt; R[<span class=\"number\">1</span>]) &#123;</div><div class=\"line\">        <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\"#\"</span> + O.closePanelId).style.display = <span class=\"string\">\"none\"</span>;</div><div class=\"line\">        <span class=\"keyword\">if</span> (O.closeCallblack) &#123;</div><div class=\"line\">          <span class=\"keyword\">var</span> P = O.closeCallblackSource ? O.closeCallblackSource: <span class=\"literal\">null</span>;</div><div class=\"line\">          O.closeCallblack.call(P)</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span></div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\"#\"</span> + O.closePanelId).style.display = <span class=\"string\">\"block\"</span></div><div class=\"line\">      &#125;</div><div class=\"line\">      bindEvent(O.closePanelBtnId, <span class=\"string\">\"click\"</span>,</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">          <span class=\"keyword\">var</span> W = <span class=\"keyword\">this</span>.getAttribute(<span class=\"string\">\"id\"</span>);</div><div class=\"line\">          <span class=\"keyword\">var</span> T = D[W];</div><div class=\"line\">          <span class=\"keyword\">var</span> V = T.cookieFlag ? <span class=\"string\">\"downloadAppPlugIn_downCloseDate_\"</span> + T.cookieFlag: <span class=\"string\">\"downloadAppPlugIn_downCloseDate\"</span>;</div><div class=\"line\">          <span class=\"keyword\">if</span> (!T.noRecord) &#123;</div><div class=\"line\">            setCookie(V, <span class=\"built_in\">Date</span>.now() + <span class=\"string\">\"_259200000\"</span>, <span class=\"number\">1</span>, <span class=\"string\">\"/\"</span>, <span class=\"string\">\".chunbo.com\"</span>);</div><div class=\"line\">          &#125;</div><div class=\"line\">          <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">\"#\"</span> + T.closePanelId).style.display = <span class=\"string\">\"none\"</span>;</div><div class=\"line\">          <span class=\"keyword\">if</span> (T.closeCallblack) &#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> U = T.closeCallblackSource ? T.closeCallblackSource: <span class=\"literal\">null</span>;</div><div class=\"line\">            T.closeCallblack.call(U)</div><div class=\"line\">          &#125;</div><div class=\"line\">        &#125;)</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">E</span>(<span class=\"params\">N</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> config = merageConfig(N);</div><div class=\"line\">    bindOpenBtnClick(config);</div><div class=\"line\">    bindCloseBtnClick (config)</div><div class=\"line\">  &#125;</div><div class=\"line\">  J.downloadAppPlugIn = E;</div><div class=\"line\">&#125;)();</div></pre></td></tr></table></figure>"},{"title":"CentOS 6.4 上安装 Python 2.7.x","date":"2015-11-30T04:37:00.000Z","_content":"\n0. 去官网下载解压相应版本的源码包，我用的这个：[https://www.python.org/ftp/python/2.7.10/Python-2.7.10.tgz](https://www.python.org/ftp/python/2.7.10/Python-2.7.10.tgz)\n0. 安装编译需要的工具：\n``` bash\nsudo yum groupinstall -y development\n```\n<!--more-->\n0. 编译安装：\n``` bash\n./configure\nmake\nsudo make altinstall\n```\n\n使用 `altinstall` 而不是 `install` 可以防止覆盖系统自带的 `python` \n\n参考：[https://www.digitalocean.com/community/tutorials/how-to-set-up-python-2-7-6-and-3-3-3-on-centos-6-4](https://www.digitalocean.com/community/tutorials/how-to-set-up-python-2-7-6-and-3-3-3-on-centos-6-4)","source":"_posts/CentOS 6.4 上安装 Python 2.7.x.md","raw":"---\ntitle: CentOS 6.4 上安装 Python 2.7.x\ndate: 2015-11-30 12:37\n---\n\n0. 去官网下载解压相应版本的源码包，我用的这个：[https://www.python.org/ftp/python/2.7.10/Python-2.7.10.tgz](https://www.python.org/ftp/python/2.7.10/Python-2.7.10.tgz)\n0. 安装编译需要的工具：\n``` bash\nsudo yum groupinstall -y development\n```\n<!--more-->\n0. 编译安装：\n``` bash\n./configure\nmake\nsudo make altinstall\n```\n\n使用 `altinstall` 而不是 `install` 可以防止覆盖系统自带的 `python` \n\n参考：[https://www.digitalocean.com/community/tutorials/how-to-set-up-python-2-7-6-and-3-3-3-on-centos-6-4](https://www.digitalocean.com/community/tutorials/how-to-set-up-python-2-7-6-and-3-3-3-on-centos-6-4)","slug":"CentOS 6.4 上安装 Python 2.7.x","published":1,"updated":"2017-01-06T04:01:27.000Z","_id":"cixl9u5x10002hjfynq18de1v","comments":1,"layout":"post","photos":[],"link":"","content":"<ol>\n<li>去官网下载解压相应版本的源码包，我用的这个：<a href=\"https://www.python.org/ftp/python/2.7.10/Python-2.7.10.tgz\" target=\"_blank\" rel=\"external\">https://www.python.org/ftp/python/2.7.10/Python-2.7.10.tgz</a></li>\n<li>安装编译需要的工具：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo yum groupinstall -y development</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<a id=\"more\"></a>\n<ol>\n<li>编译安装：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">./configure</div><div class=\"line\">make</div><div class=\"line\">sudo make altinstall</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>使用 <code>altinstall</code> 而不是 <code>install</code> 可以防止覆盖系统自带的 <code>python</code> </p>\n<p>参考：<a href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-python-2-7-6-and-3-3-3-on-centos-6-4\" target=\"_blank\" rel=\"external\">https://www.digitalocean.com/community/tutorials/how-to-set-up-python-2-7-6-and-3-3-3-on-centos-6-4</a></p>\n","excerpt":"<ol>\n<li>去官网下载解压相应版本的源码包，我用的这个：<a href=\"https://www.python.org/ftp/python/2.7.10/Python-2.7.10.tgz\">https://www.python.org/ftp/python/2.7.10/Python-2.7.10.tgz</a></li>\n<li>安装编译需要的工具：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo yum groupinstall -y development</div></pre></td></tr></table></figure>\n</li>\n</ol>","more":"<ol>\n<li>编译安装：<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">./configure</div><div class=\"line\">make</div><div class=\"line\">sudo make altinstall</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>使用 <code>altinstall</code> 而不是 <code>install</code> 可以防止覆盖系统自带的 <code>python</code> </p>\n<p>参考：<a href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-python-2-7-6-and-3-3-3-on-centos-6-4\">https://www.digitalocean.com/community/tutorials/how-to-set-up-python-2-7-6-and-3-3-3-on-centos-6-4</a></p>"},{"title":"TODO-3：css relative and absolute","date":"2016-11-14T03:42:00.000Z","_content":"\ncss中很多属性都是很近似的，平时在项目中使用并不会太在意两者之间的区别，之前在css定位上吃过亏，这次细致的解析一下。\n\n``` css\ncss position: fixed | static | absolute | relative | center | page | sticky\n```\n\n`static` 和 `fixed` 的概念很简单，这里不做详细解释。\n\n`center` `page` `sticky` 属于css3新增属性。\n<!--more-->\n`relative` 相对定位，它的地位计算基于自身在文档中的位置，同时会占用文档流，使用`top` `right` `bottom` `left` 时不会影响到页面中其他元素的位置（除非在这个元素中含有带有定位的元素）。\n\n`absolute` 绝对定位，它的定位计算基于父元素，父元素没有则向上追溯，直到body 应用了`absolute` 的元素会脱离文档流，不在页面中占位，使用`top` `right` `bottom` `left` 时也不会影响到页面中其他元素的位置（除非在这个元素中含有带有定位的元素）。\n\n下面是我写的关于`absolute` `relative` 的[demo](http://dabblet.com/gist/cd727f543cb129f9e0fa71214a7bc9b9%20)","source":"_posts/TODO-3：css relative and absolute.md","raw":"---\ntitle: TODO-3：css relative and absolute\ndate: 2016-11-14 11:42\n---\n\ncss中很多属性都是很近似的，平时在项目中使用并不会太在意两者之间的区别，之前在css定位上吃过亏，这次细致的解析一下。\n\n``` css\ncss position: fixed | static | absolute | relative | center | page | sticky\n```\n\n`static` 和 `fixed` 的概念很简单，这里不做详细解释。\n\n`center` `page` `sticky` 属于css3新增属性。\n<!--more-->\n`relative` 相对定位，它的地位计算基于自身在文档中的位置，同时会占用文档流，使用`top` `right` `bottom` `left` 时不会影响到页面中其他元素的位置（除非在这个元素中含有带有定位的元素）。\n\n`absolute` 绝对定位，它的定位计算基于父元素，父元素没有则向上追溯，直到body 应用了`absolute` 的元素会脱离文档流，不在页面中占位，使用`top` `right` `bottom` `left` 时也不会影响到页面中其他元素的位置（除非在这个元素中含有带有定位的元素）。\n\n下面是我写的关于`absolute` `relative` 的[demo](http://dabblet.com/gist/cd727f543cb129f9e0fa71214a7bc9b9%20)","slug":"TODO-3：css relative and absolute","published":1,"updated":"2017-01-06T04:02:14.000Z","_id":"cixl9u5x20003hjfyxh6a1evh","comments":1,"layout":"post","photos":[],"link":"","content":"<p>css中很多属性都是很近似的，平时在项目中使用并不会太在意两者之间的区别，之前在css定位上吃过亏，这次细致的解析一下。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">css position: fixed | static | absolute | relative | center | page | sticky</div></pre></td></tr></table></figure>\n<p><code>static</code> 和 <code>fixed</code> 的概念很简单，这里不做详细解释。</p>\n<p><code>center</code> <code>page</code> <code>sticky</code> 属于css3新增属性。<br><a id=\"more\"></a><br><code>relative</code> 相对定位，它的地位计算基于自身在文档中的位置，同时会占用文档流，使用<code>top</code> <code>right</code> <code>bottom</code> <code>left</code> 时不会影响到页面中其他元素的位置（除非在这个元素中含有带有定位的元素）。</p>\n<p><code>absolute</code> 绝对定位，它的定位计算基于父元素，父元素没有则向上追溯，直到body 应用了<code>absolute</code> 的元素会脱离文档流，不在页面中占位，使用<code>top</code> <code>right</code> <code>bottom</code> <code>left</code> 时也不会影响到页面中其他元素的位置（除非在这个元素中含有带有定位的元素）。</p>\n<p>下面是我写的关于<code>absolute</code> <code>relative</code> 的<a href=\"http://dabblet.com/gist/cd727f543cb129f9e0fa71214a7bc9b9%20\" target=\"_blank\" rel=\"external\">demo</a></p>\n","excerpt":"<p>css中很多属性都是很近似的，平时在项目中使用并不会太在意两者之间的区别，之前在css定位上吃过亏，这次细致的解析一下。</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">css position: fixed | static | absolute | relative | center | page | sticky</div></pre></td></tr></table></figure>\n<p><code>static</code> 和 <code>fixed</code> 的概念很简单，这里不做详细解释。</p>\n<p><code>center</code> <code>page</code> <code>sticky</code> 属于css3新增属性。<br>","more":"<br><code>relative</code> 相对定位，它的地位计算基于自身在文档中的位置，同时会占用文档流，使用<code>top</code> <code>right</code> <code>bottom</code> <code>left</code> 时不会影响到页面中其他元素的位置（除非在这个元素中含有带有定位的元素）。</p>\n<p><code>absolute</code> 绝对定位，它的定位计算基于父元素，父元素没有则向上追溯，直到body 应用了<code>absolute</code> 的元素会脱离文档流，不在页面中占位，使用<code>top</code> <code>right</code> <code>bottom</code> <code>left</code> 时也不会影响到页面中其他元素的位置（除非在这个元素中含有带有定位的元素）。</p>\n<p>下面是我写的关于<code>absolute</code> <code>relative</code> 的<a href=\"http://dabblet.com/gist/cd727f543cb129f9e0fa71214a7bc9b9%20\">demo</a></p>"},{"title":"TODO-4：nodejs 实现一部漫画爬取","date":"2017-01-03T07:23:00.000Z","_content":"很早之前一直很喜欢听一些有声评书，当时为了找这些音频也是煞费苦心。但是找的过程中也发现，我每次下载音频的时候都是在重复同样的操作，所以也想过是不是可以用程序实现。那时候并没有很强的意念去实现是这个工具，所以只是停留在了想的层面。\n\n前不久无意发现一部感觉不错的动漫《镇魂街》，看了动画片之后觉得不过瘾，又发现官方的漫画版还挺有看头的，于是又从头开始后撸漫画，但是发现一页一页的翻翻找找好累，所以又想着把这些图片一次性down下来该多爽。\n正巧手头有个ng2的项目，于是借助这个框架开始尝试爬取这部漫画，没有广告，没有连接，简单粗暴直接看图。\n\n抓取网页的几个必要工具先罗列一下： \n1. superagent github 地址 代替客户端发起请求； \n2. cheerio github地址 解析html \n3. fs node 的文件系统模块\n\n\n<!--more-->\n\n首先找个稳定点的网站用来抓取，不然刚研究好怎么解析这个网站下的页面，结果页面不稳定，白费力气。 \n解析的思路一定是顺序的，首先要把一部漫画的章节找出来，然后根据每个章节下载里面的图片。\n\n下面说说我在抓取的过程遇到的几个小问题： \n1：编码问题； \n默认情况下superagent是utf-8的编码，但是如果遇到网站的编码不是utf-8就会出现抓取下来的页面都是乱码，自然就不好解析了。 \n所以出现这种情况的时候，可以在发起请求的时候添加编码设置，这就涉及到了第四个必要工具：superagent-charset，github地址，防止乱码用的。 \n2：请求头的问题； \n一般这种网站都会有防盗链的措施，所以如果随意请求，很快就会被反套路，所以最安全的方案就是用浏览器打开需要抓取的页面，找到相应的网络请求头，全copy下来，不过要特别注意一下有的Referer这个字段是固定的连接，但是有的是根据章节，每个章节不同。 \n3：请求‘顺序’还是‘并发’ \n最初使用并发的形式抓取，但是会出现抓取的图片不全的现象。这种情况还不是很清楚什么原因导致的。不过转为顺序并且把每次请求都间隔了一定时间，尽量的模仿实际人工请求，没有出现抓取不全的现象。\n\n下面是主要代码逻辑：\n\n用来统一设置请求头的方法：\n\n```javascript\nfunction makeReuest(option){\n    return  request.get(option.url).charset('gbk')\n    .set('Accept','text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8')\n      // .set('Accept-Encoding','gzip, deflate, sdch')\n      .set('Accept-Language','zh-CN,zh;q=0.8,en;q=0.6')\n      .set('Cache-Control','no-cache')\n      .set('Connection','keep-alive')\n      .set('Cookie',option.cookie)\n      .set('Host',option.host)\n      .set('Pragma','no-cache')\n      .set('Referer',option.referer)\n      // .set('Upgrade-Insecure-Requests','1')\n      .set('User-Agent','Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.98 Safari/537.36')\n      .catch(option.cb);\n  }\n  ```\n所有callback转为promise形式\n```javascript\nmodule.exports = function (func, option = {}) {\n  return (...arg) => new Promise((resolve, reject) => {\n    return func.apply(option.context, [...arg, (err, ...data) => {\n      if (err) {\n        return reject(err);\n      }\n      if (option.multiArg) {\n        return resolve(data)\n      }\n      return resolve(data[0]);\n    }]);\n  })\n}\n```\n\n写文件逻辑：\n\n```javascript\nconst writeFileAsync = promisify(fs.writeFile);\nconst mkdirAsync = promisify(fs.mkdir);\n\nwriteFileAsync(imgPath, _picRes.body)\n        .then(function () {\n          console.log('write OK:', imgPath)\n        })\n        .catch(function () {\n          console.log('write err:', imgPath)\n          mkdirAsync(path)\n            .then(function () {\n              return writeFileAsync(imgPath, _picRes.body)\n            })\n            .then(function () {\n               console.log('write file retry finished:', imgPath)\n            })\n            .catch(function (err) {\n              console.log('retry err', err)\n              throw  err;\n            });\n        });\n```","source":"_posts/TODO-4：nodejs 实现一部漫画爬取.md","raw":"---\ntitle: TODO-4：nodejs 实现一部漫画爬取\ndate: 2017-01-03 15:23\n---\n很早之前一直很喜欢听一些有声评书，当时为了找这些音频也是煞费苦心。但是找的过程中也发现，我每次下载音频的时候都是在重复同样的操作，所以也想过是不是可以用程序实现。那时候并没有很强的意念去实现是这个工具，所以只是停留在了想的层面。\n\n前不久无意发现一部感觉不错的动漫《镇魂街》，看了动画片之后觉得不过瘾，又发现官方的漫画版还挺有看头的，于是又从头开始后撸漫画，但是发现一页一页的翻翻找找好累，所以又想着把这些图片一次性down下来该多爽。\n正巧手头有个ng2的项目，于是借助这个框架开始尝试爬取这部漫画，没有广告，没有连接，简单粗暴直接看图。\n\n抓取网页的几个必要工具先罗列一下： \n1. superagent github 地址 代替客户端发起请求； \n2. cheerio github地址 解析html \n3. fs node 的文件系统模块\n\n\n<!--more-->\n\n首先找个稳定点的网站用来抓取，不然刚研究好怎么解析这个网站下的页面，结果页面不稳定，白费力气。 \n解析的思路一定是顺序的，首先要把一部漫画的章节找出来，然后根据每个章节下载里面的图片。\n\n下面说说我在抓取的过程遇到的几个小问题： \n1：编码问题； \n默认情况下superagent是utf-8的编码，但是如果遇到网站的编码不是utf-8就会出现抓取下来的页面都是乱码，自然就不好解析了。 \n所以出现这种情况的时候，可以在发起请求的时候添加编码设置，这就涉及到了第四个必要工具：superagent-charset，github地址，防止乱码用的。 \n2：请求头的问题； \n一般这种网站都会有防盗链的措施，所以如果随意请求，很快就会被反套路，所以最安全的方案就是用浏览器打开需要抓取的页面，找到相应的网络请求头，全copy下来，不过要特别注意一下有的Referer这个字段是固定的连接，但是有的是根据章节，每个章节不同。 \n3：请求‘顺序’还是‘并发’ \n最初使用并发的形式抓取，但是会出现抓取的图片不全的现象。这种情况还不是很清楚什么原因导致的。不过转为顺序并且把每次请求都间隔了一定时间，尽量的模仿实际人工请求，没有出现抓取不全的现象。\n\n下面是主要代码逻辑：\n\n用来统一设置请求头的方法：\n\n```javascript\nfunction makeReuest(option){\n    return  request.get(option.url).charset('gbk')\n    .set('Accept','text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8')\n      // .set('Accept-Encoding','gzip, deflate, sdch')\n      .set('Accept-Language','zh-CN,zh;q=0.8,en;q=0.6')\n      .set('Cache-Control','no-cache')\n      .set('Connection','keep-alive')\n      .set('Cookie',option.cookie)\n      .set('Host',option.host)\n      .set('Pragma','no-cache')\n      .set('Referer',option.referer)\n      // .set('Upgrade-Insecure-Requests','1')\n      .set('User-Agent','Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.98 Safari/537.36')\n      .catch(option.cb);\n  }\n  ```\n所有callback转为promise形式\n```javascript\nmodule.exports = function (func, option = {}) {\n  return (...arg) => new Promise((resolve, reject) => {\n    return func.apply(option.context, [...arg, (err, ...data) => {\n      if (err) {\n        return reject(err);\n      }\n      if (option.multiArg) {\n        return resolve(data)\n      }\n      return resolve(data[0]);\n    }]);\n  })\n}\n```\n\n写文件逻辑：\n\n```javascript\nconst writeFileAsync = promisify(fs.writeFile);\nconst mkdirAsync = promisify(fs.mkdir);\n\nwriteFileAsync(imgPath, _picRes.body)\n        .then(function () {\n          console.log('write OK:', imgPath)\n        })\n        .catch(function () {\n          console.log('write err:', imgPath)\n          mkdirAsync(path)\n            .then(function () {\n              return writeFileAsync(imgPath, _picRes.body)\n            })\n            .then(function () {\n               console.log('write file retry finished:', imgPath)\n            })\n            .catch(function (err) {\n              console.log('retry err', err)\n              throw  err;\n            });\n        });\n```","slug":"TODO-4：nodejs 实现一部漫画爬取","published":1,"updated":"2017-01-06T07:00:14.000Z","_id":"cixl9u5x30004hjfy2gszk553","comments":1,"layout":"post","photos":[],"link":"","content":"<p>很早之前一直很喜欢听一些有声评书，当时为了找这些音频也是煞费苦心。但是找的过程中也发现，我每次下载音频的时候都是在重复同样的操作，所以也想过是不是可以用程序实现。那时候并没有很强的意念去实现是这个工具，所以只是停留在了想的层面。</p>\n<p>前不久无意发现一部感觉不错的动漫《镇魂街》，看了动画片之后觉得不过瘾，又发现官方的漫画版还挺有看头的，于是又从头开始后撸漫画，但是发现一页一页的翻翻找找好累，所以又想着把这些图片一次性down下来该多爽。<br>正巧手头有个ng2的项目，于是借助这个框架开始尝试爬取这部漫画，没有广告，没有连接，简单粗暴直接看图。</p>\n<p>抓取网页的几个必要工具先罗列一下： </p>\n<ol>\n<li>superagent github 地址 代替客户端发起请求； </li>\n<li>cheerio github地址 解析html </li>\n<li>fs node 的文件系统模块</li>\n</ol>\n<a id=\"more\"></a>\n<p>首先找个稳定点的网站用来抓取，不然刚研究好怎么解析这个网站下的页面，结果页面不稳定，白费力气。<br>解析的思路一定是顺序的，首先要把一部漫画的章节找出来，然后根据每个章节下载里面的图片。</p>\n<p>下面说说我在抓取的过程遇到的几个小问题：<br>1：编码问题；<br>默认情况下superagent是utf-8的编码，但是如果遇到网站的编码不是utf-8就会出现抓取下来的页面都是乱码，自然就不好解析了。<br>所以出现这种情况的时候，可以在发起请求的时候添加编码设置，这就涉及到了第四个必要工具：superagent-charset，github地址，防止乱码用的。<br>2：请求头的问题；<br>一般这种网站都会有防盗链的措施，所以如果随意请求，很快就会被反套路，所以最安全的方案就是用浏览器打开需要抓取的页面，找到相应的网络请求头，全copy下来，不过要特别注意一下有的Referer这个字段是固定的连接，但是有的是根据章节，每个章节不同。<br>3：请求‘顺序’还是‘并发’<br>最初使用并发的形式抓取，但是会出现抓取的图片不全的现象。这种情况还不是很清楚什么原因导致的。不过转为顺序并且把每次请求都间隔了一定时间，尽量的模仿实际人工请求，没有出现抓取不全的现象。</p>\n<p>下面是主要代码逻辑：</p>\n<p>用来统一设置请求头的方法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">makeReuest</span>(<span class=\"params\">option</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span>  request.get(option.url).charset(<span class=\"string\">'gbk'</span>)</div><div class=\"line\">    .set(<span class=\"string\">'Accept'</span>,<span class=\"string\">'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8'</span>)</div><div class=\"line\">      <span class=\"comment\">// .set('Accept-Encoding','gzip, deflate, sdch')</span></div><div class=\"line\">      .set(<span class=\"string\">'Accept-Language'</span>,<span class=\"string\">'zh-CN,zh;q=0.8,en;q=0.6'</span>)</div><div class=\"line\">      .set(<span class=\"string\">'Cache-Control'</span>,<span class=\"string\">'no-cache'</span>)</div><div class=\"line\">      .set(<span class=\"string\">'Connection'</span>,<span class=\"string\">'keep-alive'</span>)</div><div class=\"line\">      .set(<span class=\"string\">'Cookie'</span>,option.cookie)</div><div class=\"line\">      .set(<span class=\"string\">'Host'</span>,option.host)</div><div class=\"line\">      .set(<span class=\"string\">'Pragma'</span>,<span class=\"string\">'no-cache'</span>)</div><div class=\"line\">      .set(<span class=\"string\">'Referer'</span>,option.referer)</div><div class=\"line\">      <span class=\"comment\">// .set('Upgrade-Insecure-Requests','1')</span></div><div class=\"line\">      .set(<span class=\"string\">'User-Agent'</span>,<span class=\"string\">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.98 Safari/537.36'</span>)</div><div class=\"line\">      .catch(option.cb);</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<p>所有callback转为promise形式<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">func, option = &#123;&#125;</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">...arg</span>) =&gt;</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> func.apply(option.context, [...arg, (err, ...data) =&gt; &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> reject(err);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">if</span> (option.multiArg) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> resolve(data)</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> resolve(data[<span class=\"number\">0</span>]);</div><div class=\"line\">    &#125;]);</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>写文件逻辑：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> writeFileAsync = promisify(fs.writeFile);</div><div class=\"line\"><span class=\"keyword\">const</span> mkdirAsync = promisify(fs.mkdir);</div><div class=\"line\"></div><div class=\"line\">writeFileAsync(imgPath, _picRes.body)</div><div class=\"line\">        .then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'write OK:'</span>, imgPath)</div><div class=\"line\">        &#125;)</div><div class=\"line\">        .catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'write err:'</span>, imgPath)</div><div class=\"line\">          mkdirAsync(path)</div><div class=\"line\">            .then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">              <span class=\"keyword\">return</span> writeFileAsync(imgPath, _picRes.body)</div><div class=\"line\">            &#125;)</div><div class=\"line\">            .then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">               <span class=\"built_in\">console</span>.log(<span class=\"string\">'write file retry finished:'</span>, imgPath)</div><div class=\"line\">            &#125;)</div><div class=\"line\">            .catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">              <span class=\"built_in\">console</span>.log(<span class=\"string\">'retry err'</span>, err)</div><div class=\"line\">              <span class=\"keyword\">throw</span>  err;</div><div class=\"line\">            &#125;);</div><div class=\"line\">        &#125;);</div></pre></td></tr></table></figure>","excerpt":"<p>很早之前一直很喜欢听一些有声评书，当时为了找这些音频也是煞费苦心。但是找的过程中也发现，我每次下载音频的时候都是在重复同样的操作，所以也想过是不是可以用程序实现。那时候并没有很强的意念去实现是这个工具，所以只是停留在了想的层面。</p>\n<p>前不久无意发现一部感觉不错的动漫《镇魂街》，看了动画片之后觉得不过瘾，又发现官方的漫画版还挺有看头的，于是又从头开始后撸漫画，但是发现一页一页的翻翻找找好累，所以又想着把这些图片一次性down下来该多爽。<br>正巧手头有个ng2的项目，于是借助这个框架开始尝试爬取这部漫画，没有广告，没有连接，简单粗暴直接看图。</p>\n<p>抓取网页的几个必要工具先罗列一下： </p>\n<ol>\n<li>superagent github 地址 代替客户端发起请求； </li>\n<li>cheerio github地址 解析html </li>\n<li>fs node 的文件系统模块</li>\n</ol>","more":"<p>首先找个稳定点的网站用来抓取，不然刚研究好怎么解析这个网站下的页面，结果页面不稳定，白费力气。<br>解析的思路一定是顺序的，首先要把一部漫画的章节找出来，然后根据每个章节下载里面的图片。</p>\n<p>下面说说我在抓取的过程遇到的几个小问题：<br>1：编码问题；<br>默认情况下superagent是utf-8的编码，但是如果遇到网站的编码不是utf-8就会出现抓取下来的页面都是乱码，自然就不好解析了。<br>所以出现这种情况的时候，可以在发起请求的时候添加编码设置，这就涉及到了第四个必要工具：superagent-charset，github地址，防止乱码用的。<br>2：请求头的问题；<br>一般这种网站都会有防盗链的措施，所以如果随意请求，很快就会被反套路，所以最安全的方案就是用浏览器打开需要抓取的页面，找到相应的网络请求头，全copy下来，不过要特别注意一下有的Referer这个字段是固定的连接，但是有的是根据章节，每个章节不同。<br>3：请求‘顺序’还是‘并发’<br>最初使用并发的形式抓取，但是会出现抓取的图片不全的现象。这种情况还不是很清楚什么原因导致的。不过转为顺序并且把每次请求都间隔了一定时间，尽量的模仿实际人工请求，没有出现抓取不全的现象。</p>\n<p>下面是主要代码逻辑：</p>\n<p>用来统一设置请求头的方法：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">makeReuest</span>(<span class=\"params\">option</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span>  request.get(option.url).charset(<span class=\"string\">'gbk'</span>)</div><div class=\"line\">    .set(<span class=\"string\">'Accept'</span>,<span class=\"string\">'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8'</span>)</div><div class=\"line\">      <span class=\"comment\">// .set('Accept-Encoding','gzip, deflate, sdch')</span></div><div class=\"line\">      .set(<span class=\"string\">'Accept-Language'</span>,<span class=\"string\">'zh-CN,zh;q=0.8,en;q=0.6'</span>)</div><div class=\"line\">      .set(<span class=\"string\">'Cache-Control'</span>,<span class=\"string\">'no-cache'</span>)</div><div class=\"line\">      .set(<span class=\"string\">'Connection'</span>,<span class=\"string\">'keep-alive'</span>)</div><div class=\"line\">      .set(<span class=\"string\">'Cookie'</span>,option.cookie)</div><div class=\"line\">      .set(<span class=\"string\">'Host'</span>,option.host)</div><div class=\"line\">      .set(<span class=\"string\">'Pragma'</span>,<span class=\"string\">'no-cache'</span>)</div><div class=\"line\">      .set(<span class=\"string\">'Referer'</span>,option.referer)</div><div class=\"line\">      <span class=\"comment\">// .set('Upgrade-Insecure-Requests','1')</span></div><div class=\"line\">      .set(<span class=\"string\">'User-Agent'</span>,<span class=\"string\">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.98 Safari/537.36'</span>)</div><div class=\"line\">      .catch(option.cb);</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<p>所有callback转为promise形式<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">func, option = &#123;&#125;</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">...arg</span>) =&gt;</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> func.apply(option.context, [...arg, (err, ...data) =&gt; &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> reject(err);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">if</span> (option.multiArg) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> resolve(data)</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> resolve(data[<span class=\"number\">0</span>]);</div><div class=\"line\">    &#125;]);</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>写文件逻辑：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> writeFileAsync = promisify(fs.writeFile);</div><div class=\"line\"><span class=\"keyword\">const</span> mkdirAsync = promisify(fs.mkdir);</div><div class=\"line\"></div><div class=\"line\">writeFileAsync(imgPath, _picRes.body)</div><div class=\"line\">        .then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'write OK:'</span>, imgPath)</div><div class=\"line\">        &#125;)</div><div class=\"line\">        .catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"string\">'write err:'</span>, imgPath)</div><div class=\"line\">          mkdirAsync(path)</div><div class=\"line\">            .then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">              <span class=\"keyword\">return</span> writeFileAsync(imgPath, _picRes.body)</div><div class=\"line\">            &#125;)</div><div class=\"line\">            .then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">               <span class=\"built_in\">console</span>.log(<span class=\"string\">'write file retry finished:'</span>, imgPath)</div><div class=\"line\">            &#125;)</div><div class=\"line\">            .catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">              <span class=\"built_in\">console</span>.log(<span class=\"string\">'retry err'</span>, err)</div><div class=\"line\">              <span class=\"keyword\">throw</span>  err;</div><div class=\"line\">            &#125;);</div><div class=\"line\">        &#125;);</div></pre></td></tr></table></figure>"},{"title":"fadora 23 dnf 更新错误","date":"2016-07-22T00:29:00.000Z","_content":"\n问题： \n执行`sudo dnf update`报错：\n\n``` bash\n上次元数据过期检查：0:27:28 前，执行于 Fri Jul 22 07:42:36 2016。 \n依赖关系解决。 \n错误：该操作将导致移除已启动的内核：kernel-core-4.5.7-202.fc23.x86_64 。\n```\n<!--more-->\n解决方法：\n\n`sudo dnf remove python3-dnf-plugins-core -y`\n\n参考： [https://bugzilla.redhat.com/show_bug.cgi?id=1348766](https://bugzilla.redhat.com/show_bug.cgi?id=1348766)","source":"_posts/fadora 23 dnf 更新错误.md","raw":"---\ntitle: fadora 23 dnf 更新错误\ndate: 2016-07-22 08:29\n---\n\n问题： \n执行`sudo dnf update`报错：\n\n``` bash\n上次元数据过期检查：0:27:28 前，执行于 Fri Jul 22 07:42:36 2016。 \n依赖关系解决。 \n错误：该操作将导致移除已启动的内核：kernel-core-4.5.7-202.fc23.x86_64 。\n```\n<!--more-->\n解决方法：\n\n`sudo dnf remove python3-dnf-plugins-core -y`\n\n参考： [https://bugzilla.redhat.com/show_bug.cgi?id=1348766](https://bugzilla.redhat.com/show_bug.cgi?id=1348766)","slug":"fadora 23 dnf 更新错误","published":1,"updated":"2017-01-06T04:01:32.000Z","_id":"cixl9u5x50005hjfytlv1w7ty","comments":1,"layout":"post","photos":[],"link":"","content":"<p>问题：<br>执行<code>sudo dnf update</code>报错：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">上次元数据过期检查：0:27:28 前，执行于 Fri Jul 22 07:42:36 2016。 </div><div class=\"line\">依赖关系解决。 </div><div class=\"line\">错误：该操作将导致移除已启动的内核：kernel-core-4.5.7-202.fc23.x86_64 。</div></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>解决方法：</p>\n<p><code>sudo dnf remove python3-dnf-plugins-core -y</code></p>\n<p>参考： <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=1348766\" target=\"_blank\" rel=\"external\">https://bugzilla.redhat.com/show_bug.cgi?id=1348766</a></p>\n","excerpt":"<p>问题：<br>执行<code>sudo dnf update</code>报错：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">上次元数据过期检查：0:27:28 前，执行于 Fri Jul 22 07:42:36 2016。 </div><div class=\"line\">依赖关系解决。 </div><div class=\"line\">错误：该操作将导致移除已启动的内核：kernel-core-4.5.7-202.fc23.x86_64 。</div></pre></td></tr></table></figure>","more":"<p>解决方法：</p>\n<p><code>sudo dnf remove python3-dnf-plugins-core -y</code></p>\n<p>参考： <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=1348766\">https://bugzilla.redhat.com/show_bug.cgi?id=1348766</a></p>"},{"title":"fedora 22 安装 elixir","date":"2016-03-15T11:30:00.000Z","_content":"\n0.  安装配置kerl\n  1.1 安装kerl\n  \n  ```bash\n  curl -O https://raw.githubusercontent.com/yrashk/kerl/master/kerl\n  chmod a+x kerl\n  sudo mv kerl /usr/local/bin\n  \n  curl -O  https://github.com/yrashk/kerl/raw/master/bash_completion/kerl\n  sudo mv kerl /etc/bash_completion.d/\n  ```\n  1.2 安装编译依赖\n\n  ```bash\n  sudo dnf install -y gcc ncurses-devel openssl-devel\n  ```\n  1.3 创建 .kerl 配置文件\n\n  ```bash\n  echo 'export KERL_CONFIGURE_OPTIONS=\"--with-ssl=/usr --enable-smp-support --enable-threads --enable-kernel-poll --enable-sctp --without-javac\"' >> .kerlrc\n  ```\n<!--more-->\n0.  使用 kerl 安装 Erlang\n  2.1 列出可选release版本\n  \n  ```bash\n  kerl list releases\n  ```\n  >Getting the available releases from erlang.org...\nR10B-0 R10B-10 R10B-1a R10B-2 R10B-3 R10B-4 R10B-5 R10B-6 R10B-7 R10B-8 R10B-9 R11B-0 R11B-1 R11B-2 R11B-3 R11B-4 R11B-5 R12B-0 R12B-1 R12B-2 R12B-3 R12B-4 R12B-5 R13A R13B01 R13B02-1 R13B02 R13B03 R13B04 R13B R14A R14B01 R14B02 R14B03 R14B04 R14B_erts-5.8.1.1 R14B R15B01 R15B02 R15B02_with_MSVCR100_installer_fix R15B03-1 R15B03 R15B R16A_RELEASE_CANDIDATE R16B01 R16B02 R16B03-1 R16B03 R16B 17.0-rc1 17.0-rc2 17.0 17.1 17.3 17.4 17.5 18.0 18.1 18.2.1 18.2\nRun \"/usr/local/bin/kerl update releases\" to update this list from erlang.org\n\n 2.2 构建 & 安装\n\n ```bash\n kerl build 18.2.1 vanilla_erlang\n kerl install vanilla_erlang ~/.kerl/installations/vanilla_erlang/\n ```\n 2.3 激活\n```bash\n # 查看安装列表\n kerl list installations\n \n # 激活\n source ~/.kerl/installations/vanilla_erlang/activate\n \n # 验证\n erl --version\n ```\n\n0. 安装kiex\n  ```bash\n  curl -sSL https://raw.githubusercontent.com/taylor/kiex/master/install | bash -s\n\n  echo 'test -s \"$HOME/.kiex/scripts/kiex\" && source \"$HOME/.kiex/scripts/kiex\"' >> ~/.bashrc\n\n  source ~/.bashrc\n  ```\n\n0.  使用 kiex 安装 elixir\n \n   ```bash\n     kiex install stable\n     kiex use <version>\n     # 验证\n     iex --version\n   ```\n\n参考： [Installing Erlang using kerl](http://verboseguides.com/2016/01/26/installing-erlang-using-kerl/)","source":"_posts/fedora 22 安装 elixir.md","raw":"---\ntitle: fedora 22 安装 elixir\ndate: 2016-03-15 19:30\n---\n\n0.  安装配置kerl\n  1.1 安装kerl\n  \n  ```bash\n  curl -O https://raw.githubusercontent.com/yrashk/kerl/master/kerl\n  chmod a+x kerl\n  sudo mv kerl /usr/local/bin\n  \n  curl -O  https://github.com/yrashk/kerl/raw/master/bash_completion/kerl\n  sudo mv kerl /etc/bash_completion.d/\n  ```\n  1.2 安装编译依赖\n\n  ```bash\n  sudo dnf install -y gcc ncurses-devel openssl-devel\n  ```\n  1.3 创建 .kerl 配置文件\n\n  ```bash\n  echo 'export KERL_CONFIGURE_OPTIONS=\"--with-ssl=/usr --enable-smp-support --enable-threads --enable-kernel-poll --enable-sctp --without-javac\"' >> .kerlrc\n  ```\n<!--more-->\n0.  使用 kerl 安装 Erlang\n  2.1 列出可选release版本\n  \n  ```bash\n  kerl list releases\n  ```\n  >Getting the available releases from erlang.org...\nR10B-0 R10B-10 R10B-1a R10B-2 R10B-3 R10B-4 R10B-5 R10B-6 R10B-7 R10B-8 R10B-9 R11B-0 R11B-1 R11B-2 R11B-3 R11B-4 R11B-5 R12B-0 R12B-1 R12B-2 R12B-3 R12B-4 R12B-5 R13A R13B01 R13B02-1 R13B02 R13B03 R13B04 R13B R14A R14B01 R14B02 R14B03 R14B04 R14B_erts-5.8.1.1 R14B R15B01 R15B02 R15B02_with_MSVCR100_installer_fix R15B03-1 R15B03 R15B R16A_RELEASE_CANDIDATE R16B01 R16B02 R16B03-1 R16B03 R16B 17.0-rc1 17.0-rc2 17.0 17.1 17.3 17.4 17.5 18.0 18.1 18.2.1 18.2\nRun \"/usr/local/bin/kerl update releases\" to update this list from erlang.org\n\n 2.2 构建 & 安装\n\n ```bash\n kerl build 18.2.1 vanilla_erlang\n kerl install vanilla_erlang ~/.kerl/installations/vanilla_erlang/\n ```\n 2.3 激活\n```bash\n # 查看安装列表\n kerl list installations\n \n # 激活\n source ~/.kerl/installations/vanilla_erlang/activate\n \n # 验证\n erl --version\n ```\n\n0. 安装kiex\n  ```bash\n  curl -sSL https://raw.githubusercontent.com/taylor/kiex/master/install | bash -s\n\n  echo 'test -s \"$HOME/.kiex/scripts/kiex\" && source \"$HOME/.kiex/scripts/kiex\"' >> ~/.bashrc\n\n  source ~/.bashrc\n  ```\n\n0.  使用 kiex 安装 elixir\n \n   ```bash\n     kiex install stable\n     kiex use <version>\n     # 验证\n     iex --version\n   ```\n\n参考： [Installing Erlang using kerl](http://verboseguides.com/2016/01/26/installing-erlang-using-kerl/)","slug":"fedora 22 安装 elixir","published":1,"updated":"2017-01-06T04:01:43.000Z","_id":"cixl9u5x70006hjfyeakgwmfb","comments":1,"layout":"post","photos":[],"link":"","content":"<ol>\n<li><p>安装配置kerl<br>1.1 安装kerl</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -O https://raw.githubusercontent.com/yrashk/kerl/master/kerl</div><div class=\"line\">chmod a+x kerl</div><div class=\"line\">sudo mv kerl /usr/<span class=\"built_in\">local</span>/bin</div><div class=\"line\"></div><div class=\"line\">curl -O  https://github.com/yrashk/kerl/raw/master/bash_completion/kerl</div><div class=\"line\">sudo mv kerl /etc/bash_completion.d/</div></pre></td></tr></table></figure>\n<p>1.2 安装编译依赖</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo dnf install -y gcc ncurses-devel openssl-devel</div></pre></td></tr></table></figure>\n<p>1.3 创建 .kerl 配置文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'export KERL_CONFIGURE_OPTIONS=\"--with-ssl=/usr --enable-smp-support --enable-threads --enable-kernel-poll --enable-sctp --without-javac\"'</span> &gt;&gt; .kerlrc</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<a id=\"more\"></a>\n<ol>\n<li><p>使用 kerl 安装 Erlang<br>2.1 列出可选release版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">kerl list releases</div></pre></td></tr></table></figure>\n<blockquote>\n<p>Getting the available releases from erlang.org…<br>R10B-0 R10B-10 R10B-1a R10B-2 R10B-3 R10B-4 R10B-5 R10B-6 R10B-7 R10B-8 R10B-9 R11B-0 R11B-1 R11B-2 R11B-3 R11B-4 R11B-5 R12B-0 R12B-1 R12B-2 R12B-3 R12B-4 R12B-5 R13A R13B01 R13B02-1 R13B02 R13B03 R13B04 R13B R14A R14B01 R14B02 R14B03 R14B04 R14B_erts-5.8.1.1 R14B R15B01 R15B02 R15B02_with_MSVCR100_installer_fix R15B03-1 R15B03 R15B R16A_RELEASE_CANDIDATE R16B01 R16B02 R16B03-1 R16B03 R16B 17.0-rc1 17.0-rc2 17.0 17.1 17.3 17.4 17.5 18.0 18.1 18.2.1 18.2<br>Run “/usr/local/bin/kerl update releases” to update this list from erlang.org</p>\n</blockquote>\n<p>2.2 构建 &amp; 安装</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">kerl build 18.2.1 vanilla_erlang</div><div class=\"line\">kerl install vanilla_erlang ~/.kerl/installations/vanilla_erlang/</div></pre></td></tr></table></figure>\n<p>2.3 激活</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># 查看安装列表</span></div><div class=\"line\">kerl list installations</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 激活</span></div><div class=\"line\"><span class=\"built_in\">source</span> ~/.kerl/installations/vanilla_erlang/activate</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 验证</span></div><div class=\"line\">erl --version</div></pre></td></tr></table></figure>\n</li>\n<li><p>安装kiex</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl <span class=\"_\">-s</span>SL https://raw.githubusercontent.com/taylor/kiex/master/install | bash <span class=\"_\">-s</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'test -s \"$HOME/.kiex/scripts/kiex\" &amp;&amp; source \"$HOME/.kiex/scripts/kiex\"'</span> &gt;&gt; ~/.bashrc</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">source</span> ~/.bashrc</div></pre></td></tr></table></figure>\n</li>\n<li><p>使用 kiex 安装 elixir</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">kiex install stable</div><div class=\"line\">kiex use &lt;version&gt;</div><div class=\"line\"><span class=\"comment\"># 验证</span></div><div class=\"line\">iex --version</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>参考： <a href=\"http://verboseguides.com/2016/01/26/installing-erlang-using-kerl/\" target=\"_blank\" rel=\"external\">Installing Erlang using kerl</a></p>\n","excerpt":"<ol>\n<li><p>安装配置kerl<br>1.1 安装kerl</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl -O https://raw.githubusercontent.com/yrashk/kerl/master/kerl</div><div class=\"line\">chmod a+x kerl</div><div class=\"line\">sudo mv kerl /usr/<span class=\"built_in\">local</span>/bin</div><div class=\"line\"></div><div class=\"line\">curl -O  https://github.com/yrashk/kerl/raw/master/bash_completion/kerl</div><div class=\"line\">sudo mv kerl /etc/bash_completion.d/</div></pre></td></tr></table></figure>\n<p>1.2 安装编译依赖</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo dnf install -y gcc ncurses-devel openssl-devel</div></pre></td></tr></table></figure>\n<p>1.3 创建 .kerl 配置文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'export KERL_CONFIGURE_OPTIONS=\"--with-ssl=/usr --enable-smp-support --enable-threads --enable-kernel-poll --enable-sctp --without-javac\"'</span> &gt;&gt; .kerlrc</div></pre></td></tr></table></figure>\n</li>\n</ol>","more":"<ol>\n<li><p>使用 kerl 安装 Erlang<br>2.1 列出可选release版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">kerl list releases</div></pre></td></tr></table></figure>\n<blockquote>\n<p>Getting the available releases from erlang.org…<br>R10B-0 R10B-10 R10B-1a R10B-2 R10B-3 R10B-4 R10B-5 R10B-6 R10B-7 R10B-8 R10B-9 R11B-0 R11B-1 R11B-2 R11B-3 R11B-4 R11B-5 R12B-0 R12B-1 R12B-2 R12B-3 R12B-4 R12B-5 R13A R13B01 R13B02-1 R13B02 R13B03 R13B04 R13B R14A R14B01 R14B02 R14B03 R14B04 R14B_erts-5.8.1.1 R14B R15B01 R15B02 R15B02_with_MSVCR100_installer_fix R15B03-1 R15B03 R15B R16A_RELEASE_CANDIDATE R16B01 R16B02 R16B03-1 R16B03 R16B 17.0-rc1 17.0-rc2 17.0 17.1 17.3 17.4 17.5 18.0 18.1 18.2.1 18.2<br>Run “/usr/local/bin/kerl update releases” to update this list from erlang.org</p>\n</blockquote>\n<p>2.2 构建 &amp; 安装</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">kerl build 18.2.1 vanilla_erlang</div><div class=\"line\">kerl install vanilla_erlang ~/.kerl/installations/vanilla_erlang/</div></pre></td></tr></table></figure>\n<p>2.3 激活</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># 查看安装列表</span></div><div class=\"line\">kerl list installations</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 激活</span></div><div class=\"line\"><span class=\"built_in\">source</span> ~/.kerl/installations/vanilla_erlang/activate</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 验证</span></div><div class=\"line\">erl --version</div></pre></td></tr></table></figure>\n</li>\n<li><p>安装kiex</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">curl <span class=\"_\">-s</span>SL https://raw.githubusercontent.com/taylor/kiex/master/install | bash <span class=\"_\">-s</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">'test -s \"$HOME/.kiex/scripts/kiex\" &amp;&amp; source \"$HOME/.kiex/scripts/kiex\"'</span> &gt;&gt; ~/.bashrc</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">source</span> ~/.bashrc</div></pre></td></tr></table></figure>\n</li>\n<li><p>使用 kiex 安装 elixir</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">kiex install stable</div><div class=\"line\">kiex use &lt;version&gt;</div><div class=\"line\"><span class=\"comment\"># 验证</span></div><div class=\"line\">iex --version</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>参考： <a href=\"http://verboseguides.com/2016/01/26/installing-erlang-using-kerl/\">Installing Erlang using kerl</a></p>"},{"title":"fedora 21 安装搜狗输入法","date":"2015-06-24T03:07:00.000Z","_content":"1.添加fedora中文社区软件源\n\n``` bash\nsudo wget http://repo.fdzh.org/FZUG/FZUG.repo -P /etc/yum.repos.d/  \n```\n\n2.安装搜狗输入法\n``` bash\nsudo yum install -y sogoupinyin  \n```\n<!--more-->\n3.卸载ibus (可选）\n[html] view plain copy\nsudo yum autoremove ibus -y  \n\n4.关闭 gnome-shell 对键盘的监听\n``` bash\ngsettings set org.gnome.settings-daemon.plugins.keyboard active false  \n```\n\n5.切换输入法为 fcitx\n``` bash\nimsettings-switch fcitx  \n```\n\n6.配置 xinputrc 链接到 fcitx.con\n``` bash\nsudo alternatives --config xinputrc  \n```\n\n7.设置搜狗输入法开机启动\n\n创建文本文件 【～/.config/autostart/fcitx-ui-sogou-qimpanel.desktop】\n\n输入以下内容并保存：\n\n``` bash\n[Desktop Entry]  \nName=Sogou Pinyin  \nName[zh_CN]=搜狗拼音  \nGenericName=Sogou Pinyin Input Method  \nGenericName[zh_CN]=搜狗拼音输入法  \nComment=a popular pinyin input method  \nComment[zh_CN]=20 年稳定专业的输入法  \nMimeType=application/x-sogouskin;application/x-scel;  \nKeywords=ime;imf;input;  \nExec=sogou-qimpanel %U  \nIcon=fcitx-sogoupinyin  \nTerminal=false  \nType=Application  \nCategories=System;Utility;  \nStartupNotify=false  \nX-GNOME-Autostart-Phase=Applications  \nX-GNOME-Autostart-Notify=false  \nX-GNOME-Autostart-Delay=2  \nX-GNOME-AutoRestart=true  \nX-KDE-autostart-phase=1  \nX-KDE-autostart-after=panel  \n```\n\n或者使用图形界面工具gnome-tweak-tool来添加开机启动项。\n注：如果忽略第5、7步，系统开机时会报错：\n\n``` bash\nunable to keep input method running\nGiving up to bring the process up because main input method process for FCITX rapidly died many times.See $XDG_CACHE_HOME/imsettings/log for more details.\n```\n\n8.reboot\n\n参考：\n\nhttp[://www.8dlive.com/post/199.html](://www.8dlive.com/post/199.html)\n[https://www.netroby.com/view.php?id=3681](https://www.netroby.com/view.php?id=3681)\n[http://repo.fdzh.org/](http://repo.fdzh.org/)\n[http://www.cnblogs.com/pengdonglin137/p/3462492.html](http://www.cnblogs.com/pengdonglin137/p/3462492.html)\n[https://github.com/FZUG/repo/wiki/Sogou-Pinyin-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98](https://github.com/FZUG/repo/wiki/Sogou-Pinyin-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98)","source":"_posts/fedora 21 安装搜狗输入法.md","raw":"---\ntitle: fedora 21 安装搜狗输入法\ndate: 2015-06-24 11:07\n---\n1.添加fedora中文社区软件源\n\n``` bash\nsudo wget http://repo.fdzh.org/FZUG/FZUG.repo -P /etc/yum.repos.d/  \n```\n\n2.安装搜狗输入法\n``` bash\nsudo yum install -y sogoupinyin  \n```\n<!--more-->\n3.卸载ibus (可选）\n[html] view plain copy\nsudo yum autoremove ibus -y  \n\n4.关闭 gnome-shell 对键盘的监听\n``` bash\ngsettings set org.gnome.settings-daemon.plugins.keyboard active false  \n```\n\n5.切换输入法为 fcitx\n``` bash\nimsettings-switch fcitx  \n```\n\n6.配置 xinputrc 链接到 fcitx.con\n``` bash\nsudo alternatives --config xinputrc  \n```\n\n7.设置搜狗输入法开机启动\n\n创建文本文件 【～/.config/autostart/fcitx-ui-sogou-qimpanel.desktop】\n\n输入以下内容并保存：\n\n``` bash\n[Desktop Entry]  \nName=Sogou Pinyin  \nName[zh_CN]=搜狗拼音  \nGenericName=Sogou Pinyin Input Method  \nGenericName[zh_CN]=搜狗拼音输入法  \nComment=a popular pinyin input method  \nComment[zh_CN]=20 年稳定专业的输入法  \nMimeType=application/x-sogouskin;application/x-scel;  \nKeywords=ime;imf;input;  \nExec=sogou-qimpanel %U  \nIcon=fcitx-sogoupinyin  \nTerminal=false  \nType=Application  \nCategories=System;Utility;  \nStartupNotify=false  \nX-GNOME-Autostart-Phase=Applications  \nX-GNOME-Autostart-Notify=false  \nX-GNOME-Autostart-Delay=2  \nX-GNOME-AutoRestart=true  \nX-KDE-autostart-phase=1  \nX-KDE-autostart-after=panel  \n```\n\n或者使用图形界面工具gnome-tweak-tool来添加开机启动项。\n注：如果忽略第5、7步，系统开机时会报错：\n\n``` bash\nunable to keep input method running\nGiving up to bring the process up because main input method process for FCITX rapidly died many times.See $XDG_CACHE_HOME/imsettings/log for more details.\n```\n\n8.reboot\n\n参考：\n\nhttp[://www.8dlive.com/post/199.html](://www.8dlive.com/post/199.html)\n[https://www.netroby.com/view.php?id=3681](https://www.netroby.com/view.php?id=3681)\n[http://repo.fdzh.org/](http://repo.fdzh.org/)\n[http://www.cnblogs.com/pengdonglin137/p/3462492.html](http://www.cnblogs.com/pengdonglin137/p/3462492.html)\n[https://github.com/FZUG/repo/wiki/Sogou-Pinyin-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98](https://github.com/FZUG/repo/wiki/Sogou-Pinyin-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98)","slug":"fedora 21 安装搜狗输入法","published":1,"updated":"2017-01-06T04:01:37.000Z","_id":"cixl9u5x90007hjfytnrunmzs","comments":1,"layout":"post","photos":[],"link":"","content":"<p>1.添加fedora中文社区软件源</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo wget http://repo.fdzh.org/FZUG/FZUG.repo -P /etc/yum.repos.d/</div></pre></td></tr></table></figure>\n<p>2.安装搜狗输入法<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo yum install -y sogoupinyin</div></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>3.卸载ibus (可选）<br>[html] view plain copy<br>sudo yum autoremove ibus -y  </p>\n<p>4.关闭 gnome-shell 对键盘的监听<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">gsettings <span class=\"built_in\">set</span> org.gnome.settings-daemon.plugins.keyboard active <span class=\"literal\">false</span></div></pre></td></tr></table></figure></p>\n<p>5.切换输入法为 fcitx<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">imsettings-switch fcitx</div></pre></td></tr></table></figure></p>\n<p>6.配置 xinputrc 链接到 fcitx.con<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo alternatives --config xinputrc</div></pre></td></tr></table></figure></p>\n<p>7.设置搜狗输入法开机启动</p>\n<p>创建文本文件 【～/.config/autostart/fcitx-ui-sogou-qimpanel.desktop】</p>\n<p>输入以下内容并保存：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">[Desktop Entry]  </div><div class=\"line\">Name=Sogou Pinyin  </div><div class=\"line\">Name[zh_CN]=搜狗拼音  </div><div class=\"line\">GenericName=Sogou Pinyin Input Method  </div><div class=\"line\">GenericName[zh_CN]=搜狗拼音输入法  </div><div class=\"line\">Comment=a popular pinyin input method  </div><div class=\"line\">Comment[zh_CN]=20 年稳定专业的输入法  </div><div class=\"line\">MimeType=application/x-sogouskin;application/x-scel;  </div><div class=\"line\">Keywords=ime;imf;input;  </div><div class=\"line\">Exec=sogou-qimpanel %U  </div><div class=\"line\">Icon=fcitx-sogoupinyin  </div><div class=\"line\">Terminal=<span class=\"literal\">false</span>  </div><div class=\"line\">Type=Application  </div><div class=\"line\">Categories=System;Utility;  </div><div class=\"line\">StartupNotify=<span class=\"literal\">false</span>  </div><div class=\"line\">X-GNOME-Autostart-Phase=Applications  </div><div class=\"line\">X-GNOME-Autostart-Notify=<span class=\"literal\">false</span>  </div><div class=\"line\">X-GNOME-Autostart-Delay=2  </div><div class=\"line\">X-GNOME-AutoRestart=<span class=\"literal\">true</span>  </div><div class=\"line\">X-KDE-autostart-phase=1  </div><div class=\"line\">X-KDE-autostart-after=panel</div></pre></td></tr></table></figure>\n<p>或者使用图形界面工具gnome-tweak-tool来添加开机启动项。<br>注：如果忽略第5、7步，系统开机时会报错：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">unable to keep input method running</div><div class=\"line\">Giving up to bring the process up because main input method process <span class=\"keyword\">for</span> FCITX rapidly died many times.See <span class=\"variable\">$XDG_CACHE_HOME</span>/imsettings/<span class=\"built_in\">log</span> <span class=\"keyword\">for</span> more details.</div></pre></td></tr></table></figure>\n<p>8.reboot</p>\n<p>参考：</p>\n<p>http<a href=\"://www.8dlive.com/post/199.html\">://www.8dlive.com/post/199.html</a><br><a href=\"https://www.netroby.com/view.php?id=3681\" target=\"_blank\" rel=\"external\">https://www.netroby.com/view.php?id=3681</a><br><a href=\"http://repo.fdzh.org/\" target=\"_blank\" rel=\"external\">http://repo.fdzh.org/</a><br><a href=\"http://www.cnblogs.com/pengdonglin137/p/3462492.html\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/pengdonglin137/p/3462492.html</a><br><a href=\"https://github.com/FZUG/repo/wiki/Sogou-Pinyin-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98\" target=\"_blank\" rel=\"external\">https://github.com/FZUG/repo/wiki/Sogou-Pinyin-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98</a></p>\n","excerpt":"<p>1.添加fedora中文社区软件源</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo wget http://repo.fdzh.org/FZUG/FZUG.repo -P /etc/yum.repos.d/</div></pre></td></tr></table></figure>\n<p>2.安装搜狗输入法<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo yum install -y sogoupinyin</div></pre></td></tr></table></figure></p>","more":"<p>3.卸载ibus (可选）<br>[html] view plain copy<br>sudo yum autoremove ibus -y  </p>\n<p>4.关闭 gnome-shell 对键盘的监听<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">gsettings <span class=\"built_in\">set</span> org.gnome.settings-daemon.plugins.keyboard active <span class=\"literal\">false</span></div></pre></td></tr></table></figure></p>\n<p>5.切换输入法为 fcitx<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">imsettings-switch fcitx</div></pre></td></tr></table></figure></p>\n<p>6.配置 xinputrc 链接到 fcitx.con<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo alternatives --config xinputrc</div></pre></td></tr></table></figure></p>\n<p>7.设置搜狗输入法开机启动</p>\n<p>创建文本文件 【～/.config/autostart/fcitx-ui-sogou-qimpanel.desktop】</p>\n<p>输入以下内容并保存：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">[Desktop Entry]  </div><div class=\"line\">Name=Sogou Pinyin  </div><div class=\"line\">Name[zh_CN]=搜狗拼音  </div><div class=\"line\">GenericName=Sogou Pinyin Input Method  </div><div class=\"line\">GenericName[zh_CN]=搜狗拼音输入法  </div><div class=\"line\">Comment=a popular pinyin input method  </div><div class=\"line\">Comment[zh_CN]=20 年稳定专业的输入法  </div><div class=\"line\">MimeType=application/x-sogouskin;application/x-scel;  </div><div class=\"line\">Keywords=ime;imf;input;  </div><div class=\"line\">Exec=sogou-qimpanel %U  </div><div class=\"line\">Icon=fcitx-sogoupinyin  </div><div class=\"line\">Terminal=<span class=\"literal\">false</span>  </div><div class=\"line\">Type=Application  </div><div class=\"line\">Categories=System;Utility;  </div><div class=\"line\">StartupNotify=<span class=\"literal\">false</span>  </div><div class=\"line\">X-GNOME-Autostart-Phase=Applications  </div><div class=\"line\">X-GNOME-Autostart-Notify=<span class=\"literal\">false</span>  </div><div class=\"line\">X-GNOME-Autostart-Delay=2  </div><div class=\"line\">X-GNOME-AutoRestart=<span class=\"literal\">true</span>  </div><div class=\"line\">X-KDE-autostart-phase=1  </div><div class=\"line\">X-KDE-autostart-after=panel</div></pre></td></tr></table></figure>\n<p>或者使用图形界面工具gnome-tweak-tool来添加开机启动项。<br>注：如果忽略第5、7步，系统开机时会报错：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">unable to keep input method running</div><div class=\"line\">Giving up to bring the process up because main input method process <span class=\"keyword\">for</span> FCITX rapidly died many times.See <span class=\"variable\">$XDG_CACHE_HOME</span>/imsettings/<span class=\"built_in\">log</span> <span class=\"keyword\">for</span> more details.</div></pre></td></tr></table></figure>\n<p>8.reboot</p>\n<p>参考：</p>\n<p>http<a href=\"://www.8dlive.com/post/199.html\">://www.8dlive.com/post/199.html</a><br><a href=\"https://www.netroby.com/view.php?id=3681\">https://www.netroby.com/view.php?id=3681</a><br><a href=\"http://repo.fdzh.org/\">http://repo.fdzh.org/</a><br><a href=\"http://www.cnblogs.com/pengdonglin137/p/3462492.html\">http://www.cnblogs.com/pengdonglin137/p/3462492.html</a><br><a href=\"https://github.com/FZUG/repo/wiki/Sogou-Pinyin-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98\">https://github.com/FZUG/repo/wiki/Sogou-Pinyin-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98</a></p>"},{"title":"fedora wifi频繁断开","date":"2015-04-20T09:25:00.000Z","_content":"\n在家时没有问题，到公司时 wifi 总是掉线，显示一个问号，需要手动断开重联。\n\n这可能与公司网络太差有关，在网上查了下资料，发现修改下网络参数可以改善这种情况：\n\n```bash\nsudo vi /etc/ppp/pppoe-server-options\n```\n<!--more-->\n将lcp-echo-interval 参数改大一些，如：\n\n``` bash\nlcp-echo-interval 100\n```\n\n需要重启网络服务。\n\n\n参考：\n\n[http://louisnetwork.blog.sohu.com/164172203.html](http://louisnetwork.blog.sohu.com/164172203.html)\n[http://bbs.chinaunix.net/thread-1553531-1-1.html](http://bbs.chinaunix.net/thread-1553531-1-1.html)\n[http://hefeng1987-net-163-com.iteye.com/blog/967956](http://hefeng1987-net-163-com.iteye.com/blog/967956)","source":"_posts/fedora wifi频繁断开.md","raw":"---\ntitle: fedora wifi频繁断开\ndate: 2015-04-20 17:25\n---\n\n在家时没有问题，到公司时 wifi 总是掉线，显示一个问号，需要手动断开重联。\n\n这可能与公司网络太差有关，在网上查了下资料，发现修改下网络参数可以改善这种情况：\n\n```bash\nsudo vi /etc/ppp/pppoe-server-options\n```\n<!--more-->\n将lcp-echo-interval 参数改大一些，如：\n\n``` bash\nlcp-echo-interval 100\n```\n\n需要重启网络服务。\n\n\n参考：\n\n[http://louisnetwork.blog.sohu.com/164172203.html](http://louisnetwork.blog.sohu.com/164172203.html)\n[http://bbs.chinaunix.net/thread-1553531-1-1.html](http://bbs.chinaunix.net/thread-1553531-1-1.html)\n[http://hefeng1987-net-163-com.iteye.com/blog/967956](http://hefeng1987-net-163-com.iteye.com/blog/967956)","slug":"fedora wifi频繁断开","published":1,"updated":"2017-01-06T04:01:46.000Z","_id":"cixl9u5xd0008hjfyepkt9mio","comments":1,"layout":"post","photos":[],"link":"","content":"<p>在家时没有问题，到公司时 wifi 总是掉线，显示一个问号，需要手动断开重联。</p>\n<p>这可能与公司网络太差有关，在网上查了下资料，发现修改下网络参数可以改善这种情况：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo vi /etc/ppp/pppoe-server-options</div></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>将lcp-echo-interval 参数改大一些，如：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">lcp-echo-interval 100</div></pre></td></tr></table></figure>\n<p>需要重启网络服务。</p>\n<p>参考：</p>\n<p><a href=\"http://louisnetwork.blog.sohu.com/164172203.html\" target=\"_blank\" rel=\"external\">http://louisnetwork.blog.sohu.com/164172203.html</a><br><a href=\"http://bbs.chinaunix.net/thread-1553531-1-1.html\" target=\"_blank\" rel=\"external\">http://bbs.chinaunix.net/thread-1553531-1-1.html</a><br><a href=\"http://hefeng1987-net-163-com.iteye.com/blog/967956\" target=\"_blank\" rel=\"external\">http://hefeng1987-net-163-com.iteye.com/blog/967956</a></p>\n","excerpt":"<p>在家时没有问题，到公司时 wifi 总是掉线，显示一个问号，需要手动断开重联。</p>\n<p>这可能与公司网络太差有关，在网上查了下资料，发现修改下网络参数可以改善这种情况：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo vi /etc/ppp/pppoe-server-options</div></pre></td></tr></table></figure>","more":"<p>将lcp-echo-interval 参数改大一些，如：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">lcp-echo-interval 100</div></pre></td></tr></table></figure>\n<p>需要重启网络服务。</p>\n<p>参考：</p>\n<p><a href=\"http://louisnetwork.blog.sohu.com/164172203.html\">http://louisnetwork.blog.sohu.com/164172203.html</a><br><a href=\"http://bbs.chinaunix.net/thread-1553531-1-1.html\">http://bbs.chinaunix.net/thread-1553531-1-1.html</a><br><a href=\"http://hefeng1987-net-163-com.iteye.com/blog/967956\">http://hefeng1987-net-163-com.iteye.com/blog/967956</a></p>"},{"title":"fedora下yum重新安装npm失败及解决","date":"2015-04-28T10:05:00.000Z","_content":"\n把npm卸载了，重新安装的时候报错：\n\n``` bash\nError unpacking rpm package npm-1.3.6-6.fc21.noarch\nerror: unpacking of archive failed on file /usr/lib/node_modules/npm/doc: cpio: rename\n..................................\n失败:\n  npm.noarch 0:1.3.6-6.fc21  \n``` \n<!--more-->\n运行npm命令报错：\n\n``` bash\n\nmodule.js:340\n    throw err;\n          ^\nError: Cannot find module '../lib/npm.js'\n    at Function.Module._resolveFilename (module.js:338:15)\n    at Function.Module._load (module.js:280:25)\n    at Module.require (module.js:364:17)\n    at require (module.js:380:17)\n    at /usr/lib/node_modules/npm/bin/npm-cli.js:24:11\n    at Object.<anonymous> (/usr/lib/node_modules/npm/bin/npm-cli.js:86:3)\n    at Module._compile (module.js:456:26)\n    at Object.Module._extensions..js (module.js:474:10)\n    at Module.load (module.js:356:32)\n    at Function.Module._load (module.js:312:12)\n```\n\n\n根据错误提示查看/usr/lib/node_modules/npm/目录：\n[错误提示图片](http://img.blog.csdn.net/20150428175940026?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd216eTEwNjcxMTExMTA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n发现用yum卸载的时候并没有删除这个目录，手动删除：\n\n```bash\nsudo rm -r -f /usr/lib/node_modules/npm/\n```\n\n再安装npm就没问题了。\n\n\n造成yum卸载不完全的原因应该是之前使用\n\n```bash\nsudo npm update -g npm\n```\n\n命令升级npm造成了冲突。","source":"_posts/fedora下yum重新安装npm失败及解决.md","raw":"---\ntitle: fedora下yum重新安装npm失败及解决\ndate: 2015-04-28 18:05\n---\n\n把npm卸载了，重新安装的时候报错：\n\n``` bash\nError unpacking rpm package npm-1.3.6-6.fc21.noarch\nerror: unpacking of archive failed on file /usr/lib/node_modules/npm/doc: cpio: rename\n..................................\n失败:\n  npm.noarch 0:1.3.6-6.fc21  \n``` \n<!--more-->\n运行npm命令报错：\n\n``` bash\n\nmodule.js:340\n    throw err;\n          ^\nError: Cannot find module '../lib/npm.js'\n    at Function.Module._resolveFilename (module.js:338:15)\n    at Function.Module._load (module.js:280:25)\n    at Module.require (module.js:364:17)\n    at require (module.js:380:17)\n    at /usr/lib/node_modules/npm/bin/npm-cli.js:24:11\n    at Object.<anonymous> (/usr/lib/node_modules/npm/bin/npm-cli.js:86:3)\n    at Module._compile (module.js:456:26)\n    at Object.Module._extensions..js (module.js:474:10)\n    at Module.load (module.js:356:32)\n    at Function.Module._load (module.js:312:12)\n```\n\n\n根据错误提示查看/usr/lib/node_modules/npm/目录：\n[错误提示图片](http://img.blog.csdn.net/20150428175940026?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd216eTEwNjcxMTExMTA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n发现用yum卸载的时候并没有删除这个目录，手动删除：\n\n```bash\nsudo rm -r -f /usr/lib/node_modules/npm/\n```\n\n再安装npm就没问题了。\n\n\n造成yum卸载不完全的原因应该是之前使用\n\n```bash\nsudo npm update -g npm\n```\n\n命令升级npm造成了冲突。","slug":"fedora下yum重新安装npm失败及解决","published":1,"updated":"2017-01-06T04:01:35.000Z","_id":"cixl9u5xe0009hjfy6292qdtb","comments":1,"layout":"post","photos":[],"link":"","content":"<p>把npm卸载了，重新安装的时候报错：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">Error unpacking rpm package npm-1.3.6-6.fc21.noarch</div><div class=\"line\">error: unpacking of archive failed on file /usr/lib/node_modules/npm/doc: cpio: rename</div><div class=\"line\">..................................</div><div class=\"line\">失败:</div><div class=\"line\">  npm.noarch 0:1.3.6-6.fc21  </div><div class=\"line\">``` </div><div class=\"line\">&lt;!--more--&gt;</div><div class=\"line\">运行npm命令报错：</div><div class=\"line\"></div><div class=\"line\">``` bash</div><div class=\"line\"></div><div class=\"line\">module.js:340</div><div class=\"line\">    throw err;</div><div class=\"line\">          ^</div><div class=\"line\">Error: Cannot find module <span class=\"string\">'../lib/npm.js'</span></div><div class=\"line\">    at Function.Module._resolveFilename (module.js:338:15)</div><div class=\"line\">    at Function.Module._load (module.js:280:25)</div><div class=\"line\">    at Module.require (module.js:364:17)</div><div class=\"line\">    at require (module.js:380:17)</div><div class=\"line\">    at /usr/lib/node_modules/npm/bin/npm-cli.js:24:11</div><div class=\"line\">    at Object.&lt;anonymous&gt; (/usr/lib/node_modules/npm/bin/npm-cli.js:86:3)</div><div class=\"line\">    at Module._compile (module.js:456:26)</div><div class=\"line\">    at Object.Module._extensions..js (module.js:474:10)</div><div class=\"line\">    at Module.load (module.js:356:32)</div><div class=\"line\">    at Function.Module._load (module.js:312:12)</div></pre></td></tr></table></figure>\n<p>根据错误提示查看/usr/lib/node_modules/npm/目录：<br><a href=\"http://img.blog.csdn.net/20150428175940026?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd216eTEwNjcxMTExMTA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" target=\"_blank\" rel=\"external\">错误提示图片</a><br>发现用yum卸载的时候并没有删除这个目录，手动删除：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo rm -r <span class=\"_\">-f</span> /usr/lib/node_modules/npm/</div></pre></td></tr></table></figure>\n<p>再安装npm就没问题了。</p>\n<p>造成yum卸载不完全的原因应该是之前使用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo npm update -g npm</div></pre></td></tr></table></figure>\n<p>命令升级npm造成了冲突。</p>\n","excerpt":"","more":"<p>把npm卸载了，重新安装的时候报错：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">Error unpacking rpm package npm-1.3.6-6.fc21.noarch</div><div class=\"line\">error: unpacking of archive failed on file /usr/lib/node_modules/npm/doc: cpio: rename</div><div class=\"line\">..................................</div><div class=\"line\">失败:</div><div class=\"line\">  npm.noarch 0:1.3.6-6.fc21  </div><div class=\"line\">``` </div><div class=\"line\">&lt;!--more--&gt;</div><div class=\"line\">运行npm命令报错：</div><div class=\"line\"></div><div class=\"line\">``` bash</div><div class=\"line\"></div><div class=\"line\">module.js:340</div><div class=\"line\">    throw err;</div><div class=\"line\">          ^</div><div class=\"line\">Error: Cannot find module <span class=\"string\">'../lib/npm.js'</span></div><div class=\"line\">    at Function.Module._resolveFilename (module.js:338:15)</div><div class=\"line\">    at Function.Module._load (module.js:280:25)</div><div class=\"line\">    at Module.require (module.js:364:17)</div><div class=\"line\">    at require (module.js:380:17)</div><div class=\"line\">    at /usr/lib/node_modules/npm/bin/npm-cli.js:24:11</div><div class=\"line\">    at Object.&lt;anonymous&gt; (/usr/lib/node_modules/npm/bin/npm-cli.js:86:3)</div><div class=\"line\">    at Module._compile (module.js:456:26)</div><div class=\"line\">    at Object.Module._extensions..js (module.js:474:10)</div><div class=\"line\">    at Module.load (module.js:356:32)</div><div class=\"line\">    at Function.Module._load (module.js:312:12)</div></pre></td></tr></table></figure>\n<p>根据错误提示查看/usr/lib/node_modules/npm/目录：<br><a href=\"http://img.blog.csdn.net/20150428175940026?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd216eTEwNjcxMTExMTA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\">错误提示图片</a><br>发现用yum卸载的时候并没有删除这个目录，手动删除：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo rm -r <span class=\"_\">-f</span> /usr/lib/node_modules/npm/</div></pre></td></tr></table></figure>\n<p>再安装npm就没问题了。</p>\n<p>造成yum卸载不完全的原因应该是之前使用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo npm update -g npm</div></pre></td></tr></table></figure>\n<p>命令升级npm造成了冲突。</p>\n"},{"title":"linux 下使用n配置使用淘宝镜像","date":"2016-10-29T04:16:00.000Z","_content":"\nn 是 nodejs 版本管理器，鉴于国内网络环境，作如下配置用起来才会便捷.\n\n``` bash\n# ~/.bashrc 或 ~/.zshrc\n\n# 使用淘宝 nodejs 镜像，注意末尾的'/'不能省略\nexport NODE_MIRROR=https://npm.taobao.org/dist/\n\n# 建议 linux 用户配置 nodejs 安装目录，切换版本不用 root 权限\nexport N_PREFIX=$HOME/.n\nexport PATH=$HOME/.n/bin:$PATH\n```\n","source":"_posts/linux 下使用n配置使用淘宝镜像.md","raw":"---\ntitle: linux 下使用n配置使用淘宝镜像\ndate: 2016-10-29 12:16\n---\n\nn 是 nodejs 版本管理器，鉴于国内网络环境，作如下配置用起来才会便捷.\n\n``` bash\n# ~/.bashrc 或 ~/.zshrc\n\n# 使用淘宝 nodejs 镜像，注意末尾的'/'不能省略\nexport NODE_MIRROR=https://npm.taobao.org/dist/\n\n# 建议 linux 用户配置 nodejs 安装目录，切换版本不用 root 权限\nexport N_PREFIX=$HOME/.n\nexport PATH=$HOME/.n/bin:$PATH\n```\n","slug":"linux 下使用n配置使用淘宝镜像","published":1,"updated":"2017-01-06T03:51:34.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cixl9u5xf000ahjfyth3huo80","content":"<p>n 是 nodejs 版本管理器，鉴于国内网络环境，作如下配置用起来才会便捷.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># ~/.bashrc 或 ~/.zshrc</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 使用淘宝 nodejs 镜像，注意末尾的'/'不能省略</span></div><div class=\"line\"><span class=\"built_in\">export</span> NODE_MIRROR=https://npm.taobao.org/dist/</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 建议 linux 用户配置 nodejs 安装目录，切换版本不用 root 权限</span></div><div class=\"line\"><span class=\"built_in\">export</span> N_PREFIX=<span class=\"variable\">$HOME</span>/.n</div><div class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$HOME</span>/.n/bin:<span class=\"variable\">$PATH</span></div></pre></td></tr></table></figure>\n","excerpt":"","more":"<p>n 是 nodejs 版本管理器，鉴于国内网络环境，作如下配置用起来才会便捷.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># ~/.bashrc 或 ~/.zshrc</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 使用淘宝 nodejs 镜像，注意末尾的'/'不能省略</span></div><div class=\"line\"><span class=\"built_in\">export</span> NODE_MIRROR=https://npm.taobao.org/dist/</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 建议 linux 用户配置 nodejs 安装目录，切换版本不用 root 权限</span></div><div class=\"line\"><span class=\"built_in\">export</span> N_PREFIX=<span class=\"variable\">$HOME</span>/.n</div><div class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$HOME</span>/.n/bin:<span class=\"variable\">$PATH</span></div></pre></td></tr></table></figure>\n"},{"title":"gnome 3 的几个桌面扩展","date":"2015-05-17T12:51:00.000Z","_content":"周末找了几个gnome 3 下简单好用的插件：\n\n1. taskbar\n2. drop-down-terminal\n3. netspeed\n4. settingscenter\n5. todo-list\n\n需要用火狐打开安装。\n\n","source":"_posts/gnome 3 的几个桌面扩展.md","raw":"---\ntitle: gnome 3 的几个桌面扩展\ndate: 2015-05-17 20:51\n---\n周末找了几个gnome 3 下简单好用的插件：\n\n1. taskbar\n2. drop-down-terminal\n3. netspeed\n4. settingscenter\n5. todo-list\n\n需要用火狐打开安装。\n\n","slug":"gnome 3 的几个桌面扩展","published":1,"updated":"2017-01-06T03:35:15.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cixl9u5xg000bhjfylo7dyex2","content":"<p>周末找了几个gnome 3 下简单好用的插件：</p>\n<ol>\n<li>taskbar</li>\n<li>drop-down-terminal</li>\n<li>netspeed</li>\n<li>settingscenter</li>\n<li>todo-list</li>\n</ol>\n<p>需要用火狐打开安装。</p>\n","excerpt":"","more":"<p>周末找了几个gnome 3 下简单好用的插件：</p>\n<ol>\n<li>taskbar</li>\n<li>drop-down-terminal</li>\n<li>netspeed</li>\n<li>settingscenter</li>\n<li>todo-list</li>\n</ol>\n<p>需要用火狐打开安装。</p>\n"},{"title":"mongodb 基于地理位置的查询","date":"2016-01-08T07:33:00.000Z","_content":"####需求：\n查询结果按照到某一点的距离排序。\n\n####schema定义：\n```javascript\nvar UserSchema = new Schema({\n  ...\n  location:[Number]    //经纬度数组\n});\n<!--more-->\nUserSchema.index({'location': '2dsphere'});\n```\n####查询语句\n```javascript\nUser.find({\n  location: {\n    $nearSphere: {\n      $geometry: {\n        type : \"Point\",\n        coordinates : [116.411190, 40.005540]\n      }\n    }\n  }\n});\n```\n\n查询出来的结果是 user 表 location 距离坐标[116.411190, 40.005540]由近到远排序的，**不能同时使用其他排序字段**。\n\n######参考：\nhttp://stackoverflow.com/questions/24297556/mongoose-aggregation-with-geonear\nhttps://docs.mongodb.org/manual/reference/operator/query/nearSphere/\nhttp://tech.meituan.com/lucene-distance.html\n","source":"_posts/mongodb 基于地理位置的查询.md","raw":"---\ntitle: mongodb 基于地理位置的查询\ndate: 2016-01-08 15:33\n---\n####需求：\n查询结果按照到某一点的距离排序。\n\n####schema定义：\n```javascript\nvar UserSchema = new Schema({\n  ...\n  location:[Number]    //经纬度数组\n});\n<!--more-->\nUserSchema.index({'location': '2dsphere'});\n```\n####查询语句\n```javascript\nUser.find({\n  location: {\n    $nearSphere: {\n      $geometry: {\n        type : \"Point\",\n        coordinates : [116.411190, 40.005540]\n      }\n    }\n  }\n});\n```\n\n查询出来的结果是 user 表 location 距离坐标[116.411190, 40.005540]由近到远排序的，**不能同时使用其他排序字段**。\n\n######参考：\nhttp://stackoverflow.com/questions/24297556/mongoose-aggregation-with-geonear\nhttps://docs.mongodb.org/manual/reference/operator/query/nearSphere/\nhttp://tech.meituan.com/lucene-distance.html\n","slug":"mongodb 基于地理位置的查询","published":1,"updated":"2017-01-06T04:01:53.000Z","_id":"cixl9u5xh000chjfyevngri31","comments":1,"layout":"post","photos":[],"link":"","content":"<p>####需求：<br>查询结果按照到某一点的距离排序。</p>\n<p>####schema定义：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> UserSchema = <span class=\"keyword\">new</span> Schema(&#123;</div><div class=\"line\">  ...</div><div class=\"line\">  location:[<span class=\"built_in\">Number</span>]    <span class=\"comment\">//经纬度数组</span></div><div class=\"line\">&#125;);</div><div class=\"line\">&lt;!--more--&gt;</div><div class=\"line\">UserSchema.index(&#123;'location': '2dsphere'&#125;);</div></pre></td></tr></table></figure></p>\n<p>####查询语句<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">User.find(&#123;</div><div class=\"line\">  <span class=\"attr\">location</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">$nearSphere</span>: &#123;</div><div class=\"line\">      <span class=\"attr\">$geometry</span>: &#123;</div><div class=\"line\">        <span class=\"attr\">type</span> : <span class=\"string\">\"Point\"</span>,</div><div class=\"line\">        <span class=\"attr\">coordinates</span> : [<span class=\"number\">116.411190</span>, <span class=\"number\">40.005540</span>]</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<p>查询出来的结果是 user 表 location 距离坐标[116.411190, 40.005540]由近到远排序的，<strong>不能同时使用其他排序字段</strong>。</p>\n<p>######参考：<br><a href=\"http://stackoverflow.com/questions/24297556/mongoose-aggregation-with-geonear\" target=\"_blank\" rel=\"external\">http://stackoverflow.com/questions/24297556/mongoose-aggregation-with-geonear</a><br><a href=\"https://docs.mongodb.org/manual/reference/operator/query/nearSphere/\" target=\"_blank\" rel=\"external\">https://docs.mongodb.org/manual/reference/operator/query/nearSphere/</a><br><a href=\"http://tech.meituan.com/lucene-distance.html\" target=\"_blank\" rel=\"external\">http://tech.meituan.com/lucene-distance.html</a></p>\n","excerpt":"","more":"<p>####需求：<br>查询结果按照到某一点的距离排序。</p>\n<p>####schema定义：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> UserSchema = <span class=\"keyword\">new</span> Schema(&#123;</div><div class=\"line\">  ...</div><div class=\"line\">  location:[<span class=\"built_in\">Number</span>]    <span class=\"comment\">//经纬度数组</span></div><div class=\"line\">&#125;);</div><div class=\"line\">&lt;!--more--&gt;</div><div class=\"line\">UserSchema.index(&#123;'location': '2dsphere'&#125;);</div></pre></td></tr></table></figure></p>\n<p>####查询语句<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">User.find(&#123;</div><div class=\"line\">  <span class=\"attr\">location</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">$nearSphere</span>: &#123;</div><div class=\"line\">      <span class=\"attr\">$geometry</span>: &#123;</div><div class=\"line\">        <span class=\"attr\">type</span> : <span class=\"string\">\"Point\"</span>,</div><div class=\"line\">        <span class=\"attr\">coordinates</span> : [<span class=\"number\">116.411190</span>, <span class=\"number\">40.005540</span>]</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<p>查询出来的结果是 user 表 location 距离坐标[116.411190, 40.005540]由近到远排序的，<strong>不能同时使用其他排序字段</strong>。</p>\n<p>######参考：<br><a href=\"http://stackoverflow.com/questions/24297556/mongoose-aggregation-with-geonear\">http://stackoverflow.com/questions/24297556/mongoose-aggregation-with-geonear</a><br><a href=\"https://docs.mongodb.org/manual/reference/operator/query/nearSphere/\">https://docs.mongodb.org/manual/reference/operator/query/nearSphere/</a><br><a href=\"http://tech.meituan.com/lucene-distance.html\">http://tech.meituan.com/lucene-distance.html</a></p>\n"},{"title":"react with JSX for {if…else…}","date":"2016-05-30T07:13:00.000Z","_content":"\n在react中用jsx渲染dom的时候经常会遇到if条件判断，然而在jsx中竟是不允许if条件判断的。以下有几种判断方式，可以根据自己的应用场景，挑选适合的。\n\n方案一：\n\n```javascript\nclass HelloMessage extends React.Component {\n  render (){\n    let userMessage;\n    if (this.props.loggedIn) {\n      userMessage = (\n        <span>\n          <h2>{ `Welcome Back ${ this.props.name }` }</h2>\n          <p>You can visit settings to reset your password</p>\n        </span>\n      )\n    } else {\n      userMessage = (\n        <h2>Hey man! Sign in to see this section</h2>\n      )\n    }\n    return(\n      <div>\n        <h1>My Super React App</h1>\n        { userMessage }\n      </div>\n    )\n  }\n}\n```\n<!--more-->\n方案二：\n\n```javascript\nclass HelloMessage extends React.Component {\n\n  renderUserMessage(){\n    if (this.props.loggedIn) {\n      return (\n        <span>\n          <h2>{ `Welcome Back ${ this.props.name }` }</h2>\n          <p>You can visit settings to reset your password</p>\n        </span>\n      );\n    } else {\n      return (\n        <h2>Hey man! Log in to see this section</h2>\n      );\n    }\n  }\n\n  render (){        \n    return(\n      <div>\n        <h1>My Super React App</h1>\n        { this.renderUserMessage() }\n      </div>\n    )\n  }\n}\n```\n\n方案三：\n\n```javascript\nclass HelloMessage extends React.Component {\n  render (){        \n    return(\n      <div>\n        <h1>\n          { this.props.loggedIn ?  'You are logged In' : 'You are not logged In' }\n        </h1>\n      </div>\n    )\n  }\n```\n\n方案四：\n\n```javascript\nclass HelloMessage extends React.Component {\n  render (){\n    return(\n      <div>\n        <h1>My Super React App</h1>\n        { this.props.loggedIn ?\n            <span>\n              <h2>{ `Welcome Back ${ this.props.name }` }</h2>\n              <p>You can visit settings to reset your password</p>\n            </span>\n            :\n            <h2>Hey man! Log in to see this section</h2>\n        }\n      </div>\n    )\n  }\n}\n```\n\n方案五：\n\n```javascript\n// 拆分成小函数\nclass HelloMessage extends React.Component {\n  renderLogin() { // 如果这里有多行，推荐用这种方法\n    const {loggedIn, name} = this.props;\n    if (!loggedIn) return;\n    \n    return (<span>\n      <h2>Welcome Back {name}</h2>\n      <p>You can visit settings to reset your password</p>\n    </span>);\n  }\n\n  render (){\n    return(\n      <div>\n        <h1>My Super React App</h1>\n        {this.renderLogin()}\n      </div>\n    );\n  }\n}\n```\n综上：短小的字段判断只能用三元表达式，如果是大块的元素都需要区分，就要利用变量了。","source":"_posts/react with JSX for {if…else…}.md","raw":"---\ntitle: react with JSX for {if…else…}\ndate: 2016-05-30 15:13\n---\n\n在react中用jsx渲染dom的时候经常会遇到if条件判断，然而在jsx中竟是不允许if条件判断的。以下有几种判断方式，可以根据自己的应用场景，挑选适合的。\n\n方案一：\n\n```javascript\nclass HelloMessage extends React.Component {\n  render (){\n    let userMessage;\n    if (this.props.loggedIn) {\n      userMessage = (\n        <span>\n          <h2>{ `Welcome Back ${ this.props.name }` }</h2>\n          <p>You can visit settings to reset your password</p>\n        </span>\n      )\n    } else {\n      userMessage = (\n        <h2>Hey man! Sign in to see this section</h2>\n      )\n    }\n    return(\n      <div>\n        <h1>My Super React App</h1>\n        { userMessage }\n      </div>\n    )\n  }\n}\n```\n<!--more-->\n方案二：\n\n```javascript\nclass HelloMessage extends React.Component {\n\n  renderUserMessage(){\n    if (this.props.loggedIn) {\n      return (\n        <span>\n          <h2>{ `Welcome Back ${ this.props.name }` }</h2>\n          <p>You can visit settings to reset your password</p>\n        </span>\n      );\n    } else {\n      return (\n        <h2>Hey man! Log in to see this section</h2>\n      );\n    }\n  }\n\n  render (){        \n    return(\n      <div>\n        <h1>My Super React App</h1>\n        { this.renderUserMessage() }\n      </div>\n    )\n  }\n}\n```\n\n方案三：\n\n```javascript\nclass HelloMessage extends React.Component {\n  render (){        \n    return(\n      <div>\n        <h1>\n          { this.props.loggedIn ?  'You are logged In' : 'You are not logged In' }\n        </h1>\n      </div>\n    )\n  }\n```\n\n方案四：\n\n```javascript\nclass HelloMessage extends React.Component {\n  render (){\n    return(\n      <div>\n        <h1>My Super React App</h1>\n        { this.props.loggedIn ?\n            <span>\n              <h2>{ `Welcome Back ${ this.props.name }` }</h2>\n              <p>You can visit settings to reset your password</p>\n            </span>\n            :\n            <h2>Hey man! Log in to see this section</h2>\n        }\n      </div>\n    )\n  }\n}\n```\n\n方案五：\n\n```javascript\n// 拆分成小函数\nclass HelloMessage extends React.Component {\n  renderLogin() { // 如果这里有多行，推荐用这种方法\n    const {loggedIn, name} = this.props;\n    if (!loggedIn) return;\n    \n    return (<span>\n      <h2>Welcome Back {name}</h2>\n      <p>You can visit settings to reset your password</p>\n    </span>);\n  }\n\n  render (){\n    return(\n      <div>\n        <h1>My Super React App</h1>\n        {this.renderLogin()}\n      </div>\n    );\n  }\n}\n```\n综上：短小的字段判断只能用三元表达式，如果是大块的元素都需要区分，就要利用变量了。","slug":"react with JSX for {if…else…}","published":1,"updated":"2017-01-06T04:01:58.000Z","_id":"cixl9u5xi000dhjfys46jtuo2","comments":1,"layout":"post","photos":[],"link":"","content":"<p>在react中用jsx渲染dom的时候经常会遇到if条件判断，然而在jsx中竟是不允许if条件判断的。以下有几种判断方式，可以根据自己的应用场景，挑选适合的。</p>\n<p>方案一：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloMessage</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  render ()&#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> userMessage;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.props.loggedIn) &#123;</div><div class=\"line\">      userMessage = (</div><div class=\"line\">        &lt;span&gt;</div><div class=\"line\">          &lt;h2&gt;&#123; `Welcome Back $&#123; this.props.name &#125;` &#125;&lt;/h2&gt;</div><div class=\"line\">          &lt;p&gt;You can visit settings to reset your password&lt;/p&gt;</div><div class=\"line\">        &lt;/span&gt;</div><div class=\"line\">      )</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      userMessage = (</div><div class=\"line\">        &lt;h2&gt;Hey man! Sign in to see this section&lt;/h2&gt;</div><div class=\"line\">      )</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span>(</div><div class=\"line\">      &lt;div&gt;</div><div class=\"line\">        &lt;h1&gt;My Super React App&lt;/h1&gt;</div><div class=\"line\">        &#123; userMessage &#125;</div><div class=\"line\">      &lt;/div&gt;</div><div class=\"line\">    )</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>方案二：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloMessage</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  renderUserMessage()&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.props.loggedIn) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> (</div><div class=\"line\">        &lt;span&gt;</div><div class=\"line\">          &lt;h2&gt;&#123; `Welcome Back $&#123; this.props.name &#125;` &#125;&lt;/h2&gt;</div><div class=\"line\">          &lt;p&gt;You can visit settings to reset your password&lt;/p&gt;</div><div class=\"line\">        &lt;/span&gt;</div><div class=\"line\">      );</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> (</div><div class=\"line\">        &lt;h2&gt;Hey man! Log in to see this section&lt;/h2&gt;</div><div class=\"line\">      );</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  render ()&#123;        </div><div class=\"line\">    <span class=\"keyword\">return</span>(</div><div class=\"line\">      &lt;div&gt;</div><div class=\"line\">        &lt;h1&gt;My Super React App&lt;/h1&gt;</div><div class=\"line\">        &#123; this.renderUserMessage() &#125;</div><div class=\"line\">      &lt;/div&gt;</div><div class=\"line\">    )</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>方案三：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloMessage</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  render ()&#123;        </div><div class=\"line\">    <span class=\"keyword\">return</span>(</div><div class=\"line\">      &lt;div&gt;</div><div class=\"line\">        &lt;h1&gt;</div><div class=\"line\">          &#123; this.props.loggedIn ?  'You are logged In' : 'You are not logged In' &#125;</div><div class=\"line\">        &lt;/h1&gt;</div><div class=\"line\">      &lt;/div&gt;</div><div class=\"line\">    )</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<p>方案四：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloMessage</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  render ()&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span>(</div><div class=\"line\">      &lt;div&gt;</div><div class=\"line\">        &lt;h1&gt;My Super React App&lt;/h1&gt;</div><div class=\"line\">        &#123; this.props.loggedIn ?</div><div class=\"line\">            &lt;span&gt;</div><div class=\"line\">              &lt;h2&gt;&#123; `Welcome Back $&#123; this.props.name &#125;` &#125;&lt;/h2&gt;</div><div class=\"line\">              &lt;p&gt;You can visit settings to reset your password&lt;/p&gt;</div><div class=\"line\">            &lt;/span&gt;</div><div class=\"line\">            :</div><div class=\"line\">            &lt;h2&gt;Hey man! Log in to see this section&lt;/h2&gt;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &lt;/div&gt;</div><div class=\"line\">    )</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>方案五：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 拆分成小函数</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloMessage</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  renderLogin() &#123; <span class=\"comment\">// 如果这里有多行，推荐用这种方法</span></div><div class=\"line\">    <span class=\"keyword\">const</span> &#123;loggedIn, name&#125; = <span class=\"keyword\">this</span>.props;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!loggedIn) <span class=\"keyword\">return</span>;</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"keyword\">return</span> (&lt;span&gt;</div><div class=\"line\">      &lt;h2&gt;Welcome Back &#123;name&#125;&lt;/h2&gt;</div><div class=\"line\">      &lt;p&gt;You can visit settings to reset your password&lt;/p&gt;</div><div class=\"line\">    &lt;/span&gt;);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  render ()&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span>(</div><div class=\"line\">      &lt;div&gt;</div><div class=\"line\">        &lt;h1&gt;My Super React App&lt;/h1&gt;</div><div class=\"line\">        &#123;this.renderLogin()&#125;</div><div class=\"line\">      &lt;/div&gt;</div><div class=\"line\">    );</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>综上：短小的字段判断只能用三元表达式，如果是大块的元素都需要区分，就要利用变量了。</p>\n","excerpt":"<p>在react中用jsx渲染dom的时候经常会遇到if条件判断，然而在jsx中竟是不允许if条件判断的。以下有几种判断方式，可以根据自己的应用场景，挑选适合的。</p>\n<p>方案一：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloMessage</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  render ()&#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> userMessage;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.props.loggedIn) &#123;</div><div class=\"line\">      userMessage = (</div><div class=\"line\">        &lt;span&gt;</div><div class=\"line\">          &lt;h2&gt;&#123; `Welcome Back $&#123; this.props.name &#125;` &#125;&lt;/h2&gt;</div><div class=\"line\">          &lt;p&gt;You can visit settings to reset your password&lt;/p&gt;</div><div class=\"line\">        &lt;/span&gt;</div><div class=\"line\">      )</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      userMessage = (</div><div class=\"line\">        &lt;h2&gt;Hey man! Sign in to see this section&lt;/h2&gt;</div><div class=\"line\">      )</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span>(</div><div class=\"line\">      &lt;div&gt;</div><div class=\"line\">        &lt;h1&gt;My Super React App&lt;/h1&gt;</div><div class=\"line\">        &#123; userMessage &#125;</div><div class=\"line\">      &lt;/div&gt;</div><div class=\"line\">    )</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>","more":"<p>方案二：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloMessage</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  renderUserMessage()&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.props.loggedIn) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> (</div><div class=\"line\">        &lt;span&gt;</div><div class=\"line\">          &lt;h2&gt;&#123; `Welcome Back $&#123; this.props.name &#125;` &#125;&lt;/h2&gt;</div><div class=\"line\">          &lt;p&gt;You can visit settings to reset your password&lt;/p&gt;</div><div class=\"line\">        &lt;/span&gt;</div><div class=\"line\">      );</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> (</div><div class=\"line\">        &lt;h2&gt;Hey man! Log in to see this section&lt;/h2&gt;</div><div class=\"line\">      );</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  render ()&#123;        </div><div class=\"line\">    <span class=\"keyword\">return</span>(</div><div class=\"line\">      &lt;div&gt;</div><div class=\"line\">        &lt;h1&gt;My Super React App&lt;/h1&gt;</div><div class=\"line\">        &#123; this.renderUserMessage() &#125;</div><div class=\"line\">      &lt;/div&gt;</div><div class=\"line\">    )</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>方案三：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloMessage</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  render ()&#123;        </div><div class=\"line\">    <span class=\"keyword\">return</span>(</div><div class=\"line\">      &lt;div&gt;</div><div class=\"line\">        &lt;h1&gt;</div><div class=\"line\">          &#123; this.props.loggedIn ?  'You are logged In' : 'You are not logged In' &#125;</div><div class=\"line\">        &lt;/h1&gt;</div><div class=\"line\">      &lt;/div&gt;</div><div class=\"line\">    )</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n<p>方案四：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloMessage</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  render ()&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span>(</div><div class=\"line\">      &lt;div&gt;</div><div class=\"line\">        &lt;h1&gt;My Super React App&lt;/h1&gt;</div><div class=\"line\">        &#123; this.props.loggedIn ?</div><div class=\"line\">            &lt;span&gt;</div><div class=\"line\">              &lt;h2&gt;&#123; `Welcome Back $&#123; this.props.name &#125;` &#125;&lt;/h2&gt;</div><div class=\"line\">              &lt;p&gt;You can visit settings to reset your password&lt;/p&gt;</div><div class=\"line\">            &lt;/span&gt;</div><div class=\"line\">            :</div><div class=\"line\">            &lt;h2&gt;Hey man! Log in to see this section&lt;/h2&gt;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &lt;/div&gt;</div><div class=\"line\">    )</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>方案五：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 拆分成小函数</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HelloMessage</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</div><div class=\"line\">  renderLogin() &#123; <span class=\"comment\">// 如果这里有多行，推荐用这种方法</span></div><div class=\"line\">    <span class=\"keyword\">const</span> &#123;loggedIn, name&#125; = <span class=\"keyword\">this</span>.props;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!loggedIn) <span class=\"keyword\">return</span>;</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"keyword\">return</span> (&lt;span&gt;</div><div class=\"line\">      &lt;h2&gt;Welcome Back &#123;name&#125;&lt;/h2&gt;</div><div class=\"line\">      &lt;p&gt;You can visit settings to reset your password&lt;/p&gt;</div><div class=\"line\">    &lt;/span&gt;);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  render ()&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span>(</div><div class=\"line\">      &lt;div&gt;</div><div class=\"line\">        &lt;h1&gt;My Super React App&lt;/h1&gt;</div><div class=\"line\">        &#123;this.renderLogin()&#125;</div><div class=\"line\">      &lt;/div&gt;</div><div class=\"line\">    );</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>综上：短小的字段判断只能用三元表达式，如果是大块的元素都需要区分，就要利用变量了。</p>"},{"title":"【codewarns-8kyu】-  Arguments to Binary addition","date":"2016-07-13T08:17:00.000Z","_content":"<h1> Introduction:\n> Given an array add all the number elements and return the binary equivalent of that sum; to make the code bullet proof anything else than a number should be addeded as 0 since it can't be addeded.\n\n>If your language can handle float binaries assume the array won't contain float or doubles.\n\n> `arr2bin([1,2]) == '11'`\n> `arr2bin([1,2,'a']) == '11'`\n>`arr2bin([]) == '0'`\n\n>`NOTE: NaN is a number too in javascript`\n\n\n<!--more-->\n\n<h1> Knowledge:     \n\n<h2>`Array.prototype.filter`\n\nThe `filter()`method creates a new array width all elements that pass the test implemented by the provided function.\n\n`arr.filter(callback[, thisArg])`\n\n[this is the link about the `filter`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n\n<h2>`Array.prototype.reduce`\n\nThe reduce() method applies a function against an accumulator and each value of the array (from left-to-right) to reduce it to a single value.\n\n`arr.reduce(callback,[initialValue])`\n\n[this is the link ahout the `reduce`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n\n<h2>`Number.prototype.toString`\n\nThe toString() method returns a string representing the specified Number object.\n\n`numObj.toString([radix])`\n\n[this is the link about `Number.toString`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toString)","source":"_posts/【codewarns-8kyu】-  Arguments to Binary addition.md","raw":"---\ntitle: 【codewarns-8kyu】-  Arguments to Binary addition\ndate: 2016-07-13 16:17\n---\n<h1> Introduction:\n> Given an array add all the number elements and return the binary equivalent of that sum; to make the code bullet proof anything else than a number should be addeded as 0 since it can't be addeded.\n\n>If your language can handle float binaries assume the array won't contain float or doubles.\n\n> `arr2bin([1,2]) == '11'`\n> `arr2bin([1,2,'a']) == '11'`\n>`arr2bin([]) == '0'`\n\n>`NOTE: NaN is a number too in javascript`\n\n\n<!--more-->\n\n<h1> Knowledge:     \n\n<h2>`Array.prototype.filter`\n\nThe `filter()`method creates a new array width all elements that pass the test implemented by the provided function.\n\n`arr.filter(callback[, thisArg])`\n\n[this is the link about the `filter`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\n\n<h2>`Array.prototype.reduce`\n\nThe reduce() method applies a function against an accumulator and each value of the array (from left-to-right) to reduce it to a single value.\n\n`arr.reduce(callback,[initialValue])`\n\n[this is the link ahout the `reduce`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\n\n<h2>`Number.prototype.toString`\n\nThe toString() method returns a string representing the specified Number object.\n\n`numObj.toString([radix])`\n\n[this is the link about `Number.toString`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toString)","slug":"【codewarns-8kyu】-  Arguments to Binary addition","published":1,"updated":"2017-01-06T07:01:25.000Z","_id":"cixl9u5xk000ehjfy3rcy16zv","comments":1,"layout":"post","photos":[],"link":"","content":"<p></p><h1> Introduction:<p></p>\n<blockquote>\n<p>Given an array add all the number elements and return the binary equivalent of that sum; to make the code bullet proof anything else than a number should be addeded as 0 since it can’t be addeded.</p>\n<p>If your language can handle float binaries assume the array won’t contain float or doubles.</p>\n<p><code>arr2bin([1,2]) == &#39;11&#39;</code><br><code>arr2bin([1,2,&#39;a&#39;]) == &#39;11&#39;</code><br><code>arr2bin([]) == &#39;0&#39;</code></p>\n<p><code>NOTE: NaN is a number too in javascript</code></p>\n</blockquote>\n<a id=\"more\"></a>\n<p></p><h1> Knowledge:     <p></p>\n<p></p><h2><code>Array.prototype.filter</code><p></p>\n<p>The <code>filter()</code>method creates a new array width all elements that pass the test implemented by the provided function.</p>\n<p><code>arr.filter(callback[, thisArg])</code></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\" target=\"_blank\" rel=\"external\">this is the link about the <code>filter</code></a></p>\n<p></p><h2><code>Array.prototype.reduce</code><p></p>\n<p>The reduce() method applies a function against an accumulator and each value of the array (from left-to-right) to reduce it to a single value.</p>\n<p><code>arr.reduce(callback,[initialValue])</code></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce\" target=\"_blank\" rel=\"external\">this is the link ahout the <code>reduce</code></a></p>\n<p></p><h2><code>Number.prototype.toString</code><p></p>\n<p>The toString() method returns a string representing the specified Number object.</p>\n<p><code>numObj.toString([radix])</code></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toString\" target=\"_blank\" rel=\"external\">this is the link about <code>Number.toString</code></a></p>\n</h2></h2></h2></h1></h1>","excerpt":"<p><h1> Introduction:</p>\n<blockquote>\n<p>Given an array add all the number elements and return the binary equivalent of that sum; to make the code bullet proof anything else than a number should be addeded as 0 since it can’t be addeded.</p>\n<p>If your language can handle float binaries assume the array won’t contain float or doubles.</p>\n<p><code>arr2bin([1,2]) == &#39;11&#39;</code><br><code>arr2bin([1,2,&#39;a&#39;]) == &#39;11&#39;</code><br><code>arr2bin([]) == &#39;0&#39;</code></p>\n<p><code>NOTE: NaN is a number too in javascript</code></p>\n</blockquote>","more":"<p><h1> Knowledge:     </p>\n<p><h2><code>Array.prototype.filter</code></p>\n<p>The <code>filter()</code>method creates a new array width all elements that pass the test implemented by the provided function.</p>\n<p><code>arr.filter(callback[, thisArg])</code></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\">this is the link about the <code>filter</code></a></p>\n<p><h2><code>Array.prototype.reduce</code></p>\n<p>The reduce() method applies a function against an accumulator and each value of the array (from left-to-right) to reduce it to a single value.</p>\n<p><code>arr.reduce(callback,[initialValue])</code></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce\">this is the link ahout the <code>reduce</code></a></p>\n<p><h2><code>Number.prototype.toString</code></p>\n<p>The toString() method returns a string representing the specified Number object.</p>\n<p><code>numObj.toString([radix])</code></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toString\">this is the link about <code>Number.toString</code></a></p>"},{"title":"使用 npm 私有仓库安装依赖遇到的坑","date":"2016-11-17T09:14:00.000Z","_content":"最近项目部署的时候时常遇到访问 npm 官方仓库网络抽疯的现象，决定尝试一下公司内部新搭建的私有仓库（使用的 [cnpm](https://github.com/cnpm/cnpmjs.org)）。切换个仓库这么简单的事没想到遇到两个大坑，记录一下：\n\ntarball url 指向不正确\n\n问题：用`npm i --registry=https://rnpm.xxxxx.com xxx` 命令安装时，结果却到 r.cnpmjs.org 这个域下面下载tar包。 \n原因：仓库的`registryHost`配置错误。\n\n项目部署的时候大部分依赖包还是去官方仓库下载\n\n问题：使用`npm i --registry=https://rnpm.xxxxx.com`命令安装依赖的时候发现`registry`参数似乎不起作用，绝大多数包居然又到官方的仓库去拉取数据（包括 metadata 和 tarball），但奇怪的是居然还有两三个包是正常的到 `rnpm.xxxxx.com` 域去下载数据了。\n\n<!--more-->\n\n\n原因：因为用 `npm shrinkwrap` 命令锁定了依赖，而 `npm-shrinkwrap.json` 里有个 `resolved`字段，这个字段指定了tarball下载的地址，npm使用这个地址下载了真正的依赖包。\n解决办法：目前还没有好的解决办法，暂时先替换掉`resolved`字段里的 url，npm@5之后的版本应该会提供一个优雅的解决方案。 \ns替换url的方法：\n\n``` bash\nsed -i -- 's/https:\\/\\/registry\\.npmjs\\.org/https:\\/\\/rnpm\\.xxxxx\\.com/g' npm-shrinkwrap.json\n```\n\n其他的方案还有: [shonkwrap rewrite-shrinkwrap-urls](https://www.npmjs.com/package/rewrite-shrinkwrap-urls)\n\n参考： \n[https://github.com/npm/npm/issues/6445](https://github.com/npm/npm/issues/6445)\n\n[https://github.com/npm/npm/issues/6324](https://github.com/npm/npm/issues/6324)\n\n[http://blog.npmjs.org/post/145724408060/dealing-with-problematic-dependencies-in-a](http://blog.npmjs.org/post/145724408060/dealing-with-problematic-dependencies-in-a)\n\n[https://support.sonatype.com/hc/en-us/articles/213465048-Why-does-npm-client-need-access-to-URLs-other-than-my-private-registry-](https://support.sonatype.com/hc/en-us/articles/213465048-Why-does-npm-client-need-access-to-URLs-other-than-my-private-registry-)\n\n[http://stackoverflow.com/questions/33682804/why-does-npm-install-use-the-shrinkwraps-resolved-property](http://stackoverflow.com/questions/33682804/why-does-npm-install-use-the-shrinkwraps-resolved-property)","source":"_posts/使用 npm 私有仓库安装依赖遇到的坑.md","raw":"---\ntitle: 使用 npm 私有仓库安装依赖遇到的坑\ndate: 2016-11-17 17:14\n---\n最近项目部署的时候时常遇到访问 npm 官方仓库网络抽疯的现象，决定尝试一下公司内部新搭建的私有仓库（使用的 [cnpm](https://github.com/cnpm/cnpmjs.org)）。切换个仓库这么简单的事没想到遇到两个大坑，记录一下：\n\ntarball url 指向不正确\n\n问题：用`npm i --registry=https://rnpm.xxxxx.com xxx` 命令安装时，结果却到 r.cnpmjs.org 这个域下面下载tar包。 \n原因：仓库的`registryHost`配置错误。\n\n项目部署的时候大部分依赖包还是去官方仓库下载\n\n问题：使用`npm i --registry=https://rnpm.xxxxx.com`命令安装依赖的时候发现`registry`参数似乎不起作用，绝大多数包居然又到官方的仓库去拉取数据（包括 metadata 和 tarball），但奇怪的是居然还有两三个包是正常的到 `rnpm.xxxxx.com` 域去下载数据了。\n\n<!--more-->\n\n\n原因：因为用 `npm shrinkwrap` 命令锁定了依赖，而 `npm-shrinkwrap.json` 里有个 `resolved`字段，这个字段指定了tarball下载的地址，npm使用这个地址下载了真正的依赖包。\n解决办法：目前还没有好的解决办法，暂时先替换掉`resolved`字段里的 url，npm@5之后的版本应该会提供一个优雅的解决方案。 \ns替换url的方法：\n\n``` bash\nsed -i -- 's/https:\\/\\/registry\\.npmjs\\.org/https:\\/\\/rnpm\\.xxxxx\\.com/g' npm-shrinkwrap.json\n```\n\n其他的方案还有: [shonkwrap rewrite-shrinkwrap-urls](https://www.npmjs.com/package/rewrite-shrinkwrap-urls)\n\n参考： \n[https://github.com/npm/npm/issues/6445](https://github.com/npm/npm/issues/6445)\n\n[https://github.com/npm/npm/issues/6324](https://github.com/npm/npm/issues/6324)\n\n[http://blog.npmjs.org/post/145724408060/dealing-with-problematic-dependencies-in-a](http://blog.npmjs.org/post/145724408060/dealing-with-problematic-dependencies-in-a)\n\n[https://support.sonatype.com/hc/en-us/articles/213465048-Why-does-npm-client-need-access-to-URLs-other-than-my-private-registry-](https://support.sonatype.com/hc/en-us/articles/213465048-Why-does-npm-client-need-access-to-URLs-other-than-my-private-registry-)\n\n[http://stackoverflow.com/questions/33682804/why-does-npm-install-use-the-shrinkwraps-resolved-property](http://stackoverflow.com/questions/33682804/why-does-npm-install-use-the-shrinkwraps-resolved-property)","slug":"使用 npm 私有仓库安装依赖遇到的坑","published":1,"updated":"2017-01-06T07:00:35.000Z","_id":"cixl9u5xm000fhjfy3uw6jbl8","comments":1,"layout":"post","photos":[],"link":"","content":"<p>最近项目部署的时候时常遇到访问 npm 官方仓库网络抽疯的现象，决定尝试一下公司内部新搭建的私有仓库（使用的 <a href=\"https://github.com/cnpm/cnpmjs.org\" target=\"_blank\" rel=\"external\">cnpm</a>）。切换个仓库这么简单的事没想到遇到两个大坑，记录一下：</p>\n<p>tarball url 指向不正确</p>\n<p>问题：用<code>npm i --registry=https://rnpm.xxxxx.com xxx</code> 命令安装时，结果却到 r.cnpmjs.org 这个域下面下载tar包。<br>原因：仓库的<code>registryHost</code>配置错误。</p>\n<p>项目部署的时候大部分依赖包还是去官方仓库下载</p>\n<p>问题：使用<code>npm i --registry=https://rnpm.xxxxx.com</code>命令安装依赖的时候发现<code>registry</code>参数似乎不起作用，绝大多数包居然又到官方的仓库去拉取数据（包括 metadata 和 tarball），但奇怪的是居然还有两三个包是正常的到 <code>rnpm.xxxxx.com</code> 域去下载数据了。</p>\n<a id=\"more\"></a>\n<p>原因：因为用 <code>npm shrinkwrap</code> 命令锁定了依赖，而 <code>npm-shrinkwrap.json</code> 里有个 <code>resolved</code>字段，这个字段指定了tarball下载的地址，npm使用这个地址下载了真正的依赖包。<br>解决办法：目前还没有好的解决办法，暂时先替换掉<code>resolved</code>字段里的 url，npm@5之后的版本应该会提供一个优雅的解决方案。<br>s替换url的方法：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sed -i -- <span class=\"string\">'s/https:\\/\\/registry\\.npmjs\\.org/https:\\/\\/rnpm\\.xxxxx\\.com/g'</span> npm-shrinkwrap.json</div></pre></td></tr></table></figure>\n<p>其他的方案还有: <a href=\"https://www.npmjs.com/package/rewrite-shrinkwrap-urls\" target=\"_blank\" rel=\"external\">shonkwrap rewrite-shrinkwrap-urls</a></p>\n<p>参考：<br><a href=\"https://github.com/npm/npm/issues/6445\" target=\"_blank\" rel=\"external\">https://github.com/npm/npm/issues/6445</a></p>\n<p><a href=\"https://github.com/npm/npm/issues/6324\" target=\"_blank\" rel=\"external\">https://github.com/npm/npm/issues/6324</a></p>\n<p><a href=\"http://blog.npmjs.org/post/145724408060/dealing-with-problematic-dependencies-in-a\" target=\"_blank\" rel=\"external\">http://blog.npmjs.org/post/145724408060/dealing-with-problematic-dependencies-in-a</a></p>\n<p><a href=\"https://support.sonatype.com/hc/en-us/articles/213465048-Why-does-npm-client-need-access-to-URLs-other-than-my-private-registry-\" target=\"_blank\" rel=\"external\">https://support.sonatype.com/hc/en-us/articles/213465048-Why-does-npm-client-need-access-to-URLs-other-than-my-private-registry-</a></p>\n<p><a href=\"http://stackoverflow.com/questions/33682804/why-does-npm-install-use-the-shrinkwraps-resolved-property\" target=\"_blank\" rel=\"external\">http://stackoverflow.com/questions/33682804/why-does-npm-install-use-the-shrinkwraps-resolved-property</a></p>\n","excerpt":"<p>最近项目部署的时候时常遇到访问 npm 官方仓库网络抽疯的现象，决定尝试一下公司内部新搭建的私有仓库（使用的 <a href=\"https://github.com/cnpm/cnpmjs.org\">cnpm</a>）。切换个仓库这么简单的事没想到遇到两个大坑，记录一下：</p>\n<p>tarball url 指向不正确</p>\n<p>问题：用<code>npm i --registry=https://rnpm.xxxxx.com xxx</code> 命令安装时，结果却到 r.cnpmjs.org 这个域下面下载tar包。<br>原因：仓库的<code>registryHost</code>配置错误。</p>\n<p>项目部署的时候大部分依赖包还是去官方仓库下载</p>\n<p>问题：使用<code>npm i --registry=https://rnpm.xxxxx.com</code>命令安装依赖的时候发现<code>registry</code>参数似乎不起作用，绝大多数包居然又到官方的仓库去拉取数据（包括 metadata 和 tarball），但奇怪的是居然还有两三个包是正常的到 <code>rnpm.xxxxx.com</code> 域去下载数据了。</p>","more":"<p>原因：因为用 <code>npm shrinkwrap</code> 命令锁定了依赖，而 <code>npm-shrinkwrap.json</code> 里有个 <code>resolved</code>字段，这个字段指定了tarball下载的地址，npm使用这个地址下载了真正的依赖包。<br>解决办法：目前还没有好的解决办法，暂时先替换掉<code>resolved</code>字段里的 url，npm@5之后的版本应该会提供一个优雅的解决方案。<br>s替换url的方法：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sed -i -- <span class=\"string\">'s/https:\\/\\/registry\\.npmjs\\.org/https:\\/\\/rnpm\\.xxxxx\\.com/g'</span> npm-shrinkwrap.json</div></pre></td></tr></table></figure>\n<p>其他的方案还有: <a href=\"https://www.npmjs.com/package/rewrite-shrinkwrap-urls\">shonkwrap rewrite-shrinkwrap-urls</a></p>\n<p>参考：<br><a href=\"https://github.com/npm/npm/issues/6445\">https://github.com/npm/npm/issues/6445</a></p>\n<p><a href=\"https://github.com/npm/npm/issues/6324\">https://github.com/npm/npm/issues/6324</a></p>\n<p><a href=\"http://blog.npmjs.org/post/145724408060/dealing-with-problematic-dependencies-in-a\">http://blog.npmjs.org/post/145724408060/dealing-with-problematic-dependencies-in-a</a></p>\n<p><a href=\"https://support.sonatype.com/hc/en-us/articles/213465048-Why-does-npm-client-need-access-to-URLs-other-than-my-private-registry-\">https://support.sonatype.com/hc/en-us/articles/213465048-Why-does-npm-client-need-access-to-URLs-other-than-my-private-registry-</a></p>\n<p><a href=\"http://stackoverflow.com/questions/33682804/why-does-npm-install-use-the-shrinkwraps-resolved-property\">http://stackoverflow.com/questions/33682804/why-does-npm-install-use-the-shrinkwraps-resolved-property</a></p>"},{"title":"学习Angular2-typescript编译","date":"2015-11-13T08:59:00.000Z","_content":"前端这个方向，对于新事物的接受能力和速度决定了你在整个行业的位置。\n\nng2还没有发布官方稳定版本，但是我觉得对于我来说这个时候是最好的蓄力时机，于是开始了ng2的学习之路。\n\n接触ng2之前也接触过一个avalon的东西，但是不知道是不是哪里相克，就是不顺利，后来想想，都是大同小异，不如学学更具参考性的ng2.\n\nng2支持typescript和es5，6开发，当然官方文档目前只有ts的，为了更快的上手，不得不先用ts写，于是就有一个问题就是：编译。\n\n构建工具是gulp，于是开始找gulp上编译ts的插件，到是有一些，本以为不会走什么岔路，偏偏这种地方被缠了段时间。看样子我是真的需要多磨练磨练啊。\n<!--more-->\n进入正题：\n\n最终选用的ts编译插件：`gulp-typescript` 。\n\n官方说明很详细，不多赘述，主要几个细节：\n\n0. 定义模块加载机制\n``` javascript\n\"module\": \"commonjs\"\n```\n\ngulp是node下的构建工具，所以模块加载机制也采用node的机制，否则会提示如下的错误\n\n``` bash\nerror TS1148: Cannot compile modules unless the '--module' flag is provided.  \nerror TS2307: Cannot find module 'angular2/angular2'.  \nerror TS2307: Cannot find module 'angular2/http'.  \n```\n0. 定义编译目标类型\n\n``` javascript\n\"target\": \"es5\" \n```\n\n把ts转换成es5标准的文件，node提示可以更高版本，但是实际操作实验并不可行。\n\n0. 避免警告\n\n``` javascript\n\"experimentalDecorators\": true  \n```\n\n此项不配置，会提示警告，导致编译不成功\n\n``` bash\nerror TS1219: Experimental support for decorators is a feature that is subject to change in a future release. Specify '--experimentalDecorators' to remove this warning.  \n```","source":"_posts/学习Angular2-typescript编译.md","raw":"---\ntitle: 学习Angular2-typescript编译\ndate: 2015-11-13 16:59\n---\n前端这个方向，对于新事物的接受能力和速度决定了你在整个行业的位置。\n\nng2还没有发布官方稳定版本，但是我觉得对于我来说这个时候是最好的蓄力时机，于是开始了ng2的学习之路。\n\n接触ng2之前也接触过一个avalon的东西，但是不知道是不是哪里相克，就是不顺利，后来想想，都是大同小异，不如学学更具参考性的ng2.\n\nng2支持typescript和es5，6开发，当然官方文档目前只有ts的，为了更快的上手，不得不先用ts写，于是就有一个问题就是：编译。\n\n构建工具是gulp，于是开始找gulp上编译ts的插件，到是有一些，本以为不会走什么岔路，偏偏这种地方被缠了段时间。看样子我是真的需要多磨练磨练啊。\n<!--more-->\n进入正题：\n\n最终选用的ts编译插件：`gulp-typescript` 。\n\n官方说明很详细，不多赘述，主要几个细节：\n\n0. 定义模块加载机制\n``` javascript\n\"module\": \"commonjs\"\n```\n\ngulp是node下的构建工具，所以模块加载机制也采用node的机制，否则会提示如下的错误\n\n``` bash\nerror TS1148: Cannot compile modules unless the '--module' flag is provided.  \nerror TS2307: Cannot find module 'angular2/angular2'.  \nerror TS2307: Cannot find module 'angular2/http'.  \n```\n0. 定义编译目标类型\n\n``` javascript\n\"target\": \"es5\" \n```\n\n把ts转换成es5标准的文件，node提示可以更高版本，但是实际操作实验并不可行。\n\n0. 避免警告\n\n``` javascript\n\"experimentalDecorators\": true  \n```\n\n此项不配置，会提示警告，导致编译不成功\n\n``` bash\nerror TS1219: Experimental support for decorators is a feature that is subject to change in a future release. Specify '--experimentalDecorators' to remove this warning.  \n```","slug":"学习Angular2-typescript编译","published":1,"updated":"2017-01-06T04:00:58.000Z","_id":"cixl9u5xo000ghjfypdsh3dln","comments":1,"layout":"post","photos":[],"link":"","content":"<p>前端这个方向，对于新事物的接受能力和速度决定了你在整个行业的位置。</p>\n<p>ng2还没有发布官方稳定版本，但是我觉得对于我来说这个时候是最好的蓄力时机，于是开始了ng2的学习之路。</p>\n<p>接触ng2之前也接触过一个avalon的东西，但是不知道是不是哪里相克，就是不顺利，后来想想，都是大同小异，不如学学更具参考性的ng2.</p>\n<p>ng2支持typescript和es5，6开发，当然官方文档目前只有ts的，为了更快的上手，不得不先用ts写，于是就有一个问题就是：编译。</p>\n<p>构建工具是gulp，于是开始找gulp上编译ts的插件，到是有一些，本以为不会走什么岔路，偏偏这种地方被缠了段时间。看样子我是真的需要多磨练磨练啊。<br><a id=\"more\"></a><br>进入正题：</p>\n<p>最终选用的ts编译插件：<code>gulp-typescript</code> 。</p>\n<p>官方说明很详细，不多赘述，主要几个细节：</p>\n<ol>\n<li>定义模块加载机制<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">\"module\"</span>: <span class=\"string\">\"commonjs\"</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>gulp是node下的构建工具，所以模块加载机制也采用node的机制，否则会提示如下的错误</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">error TS1148: Cannot compile modules unless the <span class=\"string\">'--module'</span> flag is provided.  </div><div class=\"line\">error TS2307: Cannot find module <span class=\"string\">'angular2/angular2'</span>.  </div><div class=\"line\">error TS2307: Cannot find module <span class=\"string\">'angular2/http'</span>.</div></pre></td></tr></table></figure>\n<ol>\n<li>定义编译目标类型</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">\"target\"</span>: <span class=\"string\">\"es5\"</span></div></pre></td></tr></table></figure>\n<p>把ts转换成es5标准的文件，node提示可以更高版本，但是实际操作实验并不可行。</p>\n<ol>\n<li>避免警告</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">\"experimentalDecorators\"</span>: <span class=\"literal\">true</span></div></pre></td></tr></table></figure>\n<p>此项不配置，会提示警告，导致编译不成功</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">error TS1219: Experimental support <span class=\"keyword\">for</span> decorators is a feature that is subject to change <span class=\"keyword\">in</span> a future release. Specify <span class=\"string\">'--experimentalDecorators'</span> to remove this warning.</div></pre></td></tr></table></figure>","excerpt":"<p>前端这个方向，对于新事物的接受能力和速度决定了你在整个行业的位置。</p>\n<p>ng2还没有发布官方稳定版本，但是我觉得对于我来说这个时候是最好的蓄力时机，于是开始了ng2的学习之路。</p>\n<p>接触ng2之前也接触过一个avalon的东西，但是不知道是不是哪里相克，就是不顺利，后来想想，都是大同小异，不如学学更具参考性的ng2.</p>\n<p>ng2支持typescript和es5，6开发，当然官方文档目前只有ts的，为了更快的上手，不得不先用ts写，于是就有一个问题就是：编译。</p>\n<p>构建工具是gulp，于是开始找gulp上编译ts的插件，到是有一些，本以为不会走什么岔路，偏偏这种地方被缠了段时间。看样子我是真的需要多磨练磨练啊。<br>","more":"<br>进入正题：</p>\n<p>最终选用的ts编译插件：<code>gulp-typescript</code> 。</p>\n<p>官方说明很详细，不多赘述，主要几个细节：</p>\n<ol>\n<li>定义模块加载机制<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">\"module\"</span>: <span class=\"string\">\"commonjs\"</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>gulp是node下的构建工具，所以模块加载机制也采用node的机制，否则会提示如下的错误</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">error TS1148: Cannot compile modules unless the <span class=\"string\">'--module'</span> flag is provided.  </div><div class=\"line\">error TS2307: Cannot find module <span class=\"string\">'angular2/angular2'</span>.  </div><div class=\"line\">error TS2307: Cannot find module <span class=\"string\">'angular2/http'</span>.</div></pre></td></tr></table></figure>\n<ol>\n<li>定义编译目标类型</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">\"target\"</span>: <span class=\"string\">\"es5\"</span></div></pre></td></tr></table></figure>\n<p>把ts转换成es5标准的文件，node提示可以更高版本，但是实际操作实验并不可行。</p>\n<ol>\n<li>避免警告</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">\"experimentalDecorators\"</span>: <span class=\"literal\">true</span></div></pre></td></tr></table></figure>\n<p>此项不配置，会提示警告，导致编译不成功</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">error TS1219: Experimental support <span class=\"keyword\">for</span> decorators is a feature that is subject to change <span class=\"keyword\">in</span> a future release. Specify <span class=\"string\">'--experimentalDecorators'</span> to remove this warning.</div></pre></td></tr></table></figure>"},{"title":"手机端网页监测是否打开键盘","date":"2016-05-03T09:15:00.000Z","_content":"做H5页面经常会遇到页面有输入功能的\n例如这种的：\n![输入内容在页面1/2以下](http://img.blog.csdn.net/20160503152800373)\n\nps：测试机仅有一台mi4c\n最开始想，键盘弹出应该占用了浏览器的窗口，所以弹出键盘时页面的可用高度一定是变化的，换句话说就是弹出键盘导致浏览器的高度被压缩。\n所以通过对比输入框获取焦点前后浏览器窗口高度的变化，可以判断出键盘是否弹出。\n\n```\ndocument.documentElement.clientHeight // ==>640\ndocument.body.clientHeight // ==>640\nwindow.innerHeight // ==>640\n\n```\n<!--more-->\n以上都可以用于检测窗口变化。\n如图：\n![这里写图片描述](http://img.blog.csdn.net/20160503171954106)\n\n第一行数据为系统原生浏览器数据，第二行为微信内置浏览器数据。\n\nps：但是这个方法依赖于系统对于键盘弹出的处理，有些手机系统（乐视手机，小米2A等）貌似键盘弹出的时候只是单纯的遮罩一层，并没有影响到浏览器的窗口，所以这个方法有局限性。同时以上三个方法，在Android中的实现和IOS还有一些差异。\n\n\n当然对于这种设计需求在一开始就要杜绝，尽量将输入框的位置放在上半部分，如果页面是长页面对于输入框的位置就没有特别的要求了。","source":"_posts/手机端网页监测是否打开键盘.md","raw":"---\ntitle: 手机端网页监测是否打开键盘\ndate: 2016-05-03 17:15\n---\n做H5页面经常会遇到页面有输入功能的\n例如这种的：\n![输入内容在页面1/2以下](http://img.blog.csdn.net/20160503152800373)\n\nps：测试机仅有一台mi4c\n最开始想，键盘弹出应该占用了浏览器的窗口，所以弹出键盘时页面的可用高度一定是变化的，换句话说就是弹出键盘导致浏览器的高度被压缩。\n所以通过对比输入框获取焦点前后浏览器窗口高度的变化，可以判断出键盘是否弹出。\n\n```\ndocument.documentElement.clientHeight // ==>640\ndocument.body.clientHeight // ==>640\nwindow.innerHeight // ==>640\n\n```\n<!--more-->\n以上都可以用于检测窗口变化。\n如图：\n![这里写图片描述](http://img.blog.csdn.net/20160503171954106)\n\n第一行数据为系统原生浏览器数据，第二行为微信内置浏览器数据。\n\nps：但是这个方法依赖于系统对于键盘弹出的处理，有些手机系统（乐视手机，小米2A等）貌似键盘弹出的时候只是单纯的遮罩一层，并没有影响到浏览器的窗口，所以这个方法有局限性。同时以上三个方法，在Android中的实现和IOS还有一些差异。\n\n\n当然对于这种设计需求在一开始就要杜绝，尽量将输入框的位置放在上半部分，如果页面是长页面对于输入框的位置就没有特别的要求了。","slug":"手机端网页监测是否打开键盘","published":1,"updated":"2017-01-06T04:01:01.000Z","_id":"cixl9u5xq000hhjfym4i5stoz","comments":1,"layout":"post","photos":[],"link":"","content":"<p>做H5页面经常会遇到页面有输入功能的<br>例如这种的：<br><img src=\"http://img.blog.csdn.net/20160503152800373\" alt=\"输入内容在页面1/2以下\"></p>\n<p>ps：测试机仅有一台mi4c<br>最开始想，键盘弹出应该占用了浏览器的窗口，所以弹出键盘时页面的可用高度一定是变化的，换句话说就是弹出键盘导致浏览器的高度被压缩。<br>所以通过对比输入框获取焦点前后浏览器窗口高度的变化，可以判断出键盘是否弹出。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">document.documentElement.clientHeight // ==&gt;640</div><div class=\"line\">document.body.clientHeight // ==&gt;640</div><div class=\"line\">window.innerHeight // ==&gt;640</div></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>以上都可以用于检测窗口变化。<br>如图：<br><img src=\"http://img.blog.csdn.net/20160503171954106\" alt=\"这里写图片描述\"></p>\n<p>第一行数据为系统原生浏览器数据，第二行为微信内置浏览器数据。</p>\n<p>ps：但是这个方法依赖于系统对于键盘弹出的处理，有些手机系统（乐视手机，小米2A等）貌似键盘弹出的时候只是单纯的遮罩一层，并没有影响到浏览器的窗口，所以这个方法有局限性。同时以上三个方法，在Android中的实现和IOS还有一些差异。</p>\n<p>当然对于这种设计需求在一开始就要杜绝，尽量将输入框的位置放在上半部分，如果页面是长页面对于输入框的位置就没有特别的要求了。</p>\n","excerpt":"<p>做H5页面经常会遇到页面有输入功能的<br>例如这种的：<br><img src=\"http://img.blog.csdn.net/20160503152800373\" alt=\"输入内容在页面1/2以下\"></p>\n<p>ps：测试机仅有一台mi4c<br>最开始想，键盘弹出应该占用了浏览器的窗口，所以弹出键盘时页面的可用高度一定是变化的，换句话说就是弹出键盘导致浏览器的高度被压缩。<br>所以通过对比输入框获取焦点前后浏览器窗口高度的变化，可以判断出键盘是否弹出。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">document.documentElement.clientHeight // ==&gt;640</div><div class=\"line\">document.body.clientHeight // ==&gt;640</div><div class=\"line\">window.innerHeight // ==&gt;640</div></pre></td></tr></table></figure>","more":"<p>以上都可以用于检测窗口变化。<br>如图：<br><img src=\"http://img.blog.csdn.net/20160503171954106\" alt=\"这里写图片描述\"></p>\n<p>第一行数据为系统原生浏览器数据，第二行为微信内置浏览器数据。</p>\n<p>ps：但是这个方法依赖于系统对于键盘弹出的处理，有些手机系统（乐视手机，小米2A等）貌似键盘弹出的时候只是单纯的遮罩一层，并没有影响到浏览器的窗口，所以这个方法有局限性。同时以上三个方法，在Android中的实现和IOS还有一些差异。</p>\n<p>当然对于这种设计需求在一开始就要杜绝，尽量将输入框的位置放在上半部分，如果页面是长页面对于输入框的位置就没有特别的要求了。</p>"},{"title":"解决fedora下webstorm中文字符不显示的问题","date":"2015-04-19T06:21:00.000Z","_content":"最近新换了系统(fedra 21)，顺便把webstorm 9换成了10.发现对中文的支持出了问题：\n打开文件时目录中的一些汉字会变成‘口’，编辑器中的一些中文字符直接不显示。\n\n通过查阅一些资料发现是字体的原因，解决办法就是安装【文泉驿等宽正黑】字体：\n\n``` bash\nsudo yum install -y wqy-zenhei-fonts  \n```\n<!--more-->\n参考：\n\n[http://bigc.at/intellij-idea-font-famliy.orz](http://bigc.at/intellij-idea-font-famliy.orz)\n[http://zh.wikipedia.org/wiki/%E7%AD%89%E5%AE%BD%E5%AD%97%E4%BD%93](http://zh.wikipedia.org/wiki/%E7%AD%89%E5%AE%BD%E5%AD%97%E4%BD%93)\n","source":"_posts/解决fedora下webstorm中文字符不显示的问题.md","raw":"---\ntitle: 解决fedora下webstorm中文字符不显示的问题\ndate: 2015-04-19 14:21\n---\n最近新换了系统(fedra 21)，顺便把webstorm 9换成了10.发现对中文的支持出了问题：\n打开文件时目录中的一些汉字会变成‘口’，编辑器中的一些中文字符直接不显示。\n\n通过查阅一些资料发现是字体的原因，解决办法就是安装【文泉驿等宽正黑】字体：\n\n``` bash\nsudo yum install -y wqy-zenhei-fonts  \n```\n<!--more-->\n参考：\n\n[http://bigc.at/intellij-idea-font-famliy.orz](http://bigc.at/intellij-idea-font-famliy.orz)\n[http://zh.wikipedia.org/wiki/%E7%AD%89%E5%AE%BD%E5%AD%97%E4%BD%93](http://zh.wikipedia.org/wiki/%E7%AD%89%E5%AE%BD%E5%AD%97%E4%BD%93)\n","slug":"解决fedora下webstorm中文字符不显示的问题","published":1,"updated":"2017-01-06T04:01:12.000Z","_id":"cixl9u5xr000ihjfyjmmu86ix","comments":1,"layout":"post","photos":[],"link":"","content":"<p>最近新换了系统(fedra 21)，顺便把webstorm 9换成了10.发现对中文的支持出了问题：<br>打开文件时目录中的一些汉字会变成‘口’，编辑器中的一些中文字符直接不显示。</p>\n<p>通过查阅一些资料发现是字体的原因，解决办法就是安装【文泉驿等宽正黑】字体：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo yum install -y wqy-zenhei-fonts</div></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>参考：</p>\n<p><a href=\"http://bigc.at/intellij-idea-font-famliy.orz\" target=\"_blank\" rel=\"external\">http://bigc.at/intellij-idea-font-famliy.orz</a><br><a href=\"http://zh.wikipedia.org/wiki/%E7%AD%89%E5%AE%BD%E5%AD%97%E4%BD%93\" target=\"_blank\" rel=\"external\">http://zh.wikipedia.org/wiki/%E7%AD%89%E5%AE%BD%E5%AD%97%E4%BD%93</a></p>\n","excerpt":"<p>最近新换了系统(fedra 21)，顺便把webstorm 9换成了10.发现对中文的支持出了问题：<br>打开文件时目录中的一些汉字会变成‘口’，编辑器中的一些中文字符直接不显示。</p>\n<p>通过查阅一些资料发现是字体的原因，解决办法就是安装【文泉驿等宽正黑】字体：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo yum install -y wqy-zenhei-fonts</div></pre></td></tr></table></figure>","more":"<p>参考：</p>\n<p><a href=\"http://bigc.at/intellij-idea-font-famliy.orz\">http://bigc.at/intellij-idea-font-famliy.orz</a><br><a href=\"http://zh.wikipedia.org/wiki/%E7%AD%89%E5%AE%BD%E5%AD%97%E4%BD%93\">http://zh.wikipedia.org/wiki/%E7%AD%89%E5%AE%BD%E5%AD%97%E4%BD%93</a></p>"}],"PostAsset":[],"PostCategory":[],"PostTag":[],"Tag":[]}}